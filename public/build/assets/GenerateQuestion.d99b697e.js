import{L as I}from"./Layout.0f695962.js";import{L as M,H as j,p as O,r as K,Y as U,c as i,a as q,w as S,b as e,t as m,f as d,F as v,g as T,d as A,e as _,q as V,n as f,v as F,_ as x,h as L,i as B,k as w,j as D,o as r}from"./app.6c999467.js";import{S as E}from"./sweetalert2.all.91dbb82a.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";const N={layout:I,components:{Link:M,Head:j},props:{errors:Object,lessons:Object,questionTemplates:Object,questionTitle:Object},setup(u){const o=O({source_data:"",question_template_id:"",total_question_per_section:"50",template:null,column_1:"",column_2:"",column_3:"",column_4:"",column_5:"",column_6:"",column_7:"",column_8:"",column_9:"",column_10:""}),l=K({...u.errors}),t=K([]);U(()=>u.errors,s=>{l.value={...s}});const C=s=>{o.template=s.target.files[0]},g=s=>{const n=o[s];n.length!==5?l.value[s]=`Kolom ${s.replace("column_","")} harus memiliki 5 karakter.`:new Set(n).size!==n.length?l.value[s]=`Kolom ${s.replace("column_","")} tidak boleh ada karakter yang sama.`:delete l.value[s]},k=()=>{if(l.value={},o.source_data||(l.value.source_data="Sumber Data Isian tidak boleh kosong"),o.question_template_id||(l.value.question_template_id="Template Soal tidak boleh kosong"),o.source_data==1&&!o.total_question_per_section&&(l.value.total_question_per_section="Total Soal tidak boleh kosong"),o.source_data==1&&parseInt(o.total_question_per_section)<50&&(l.value.total_question_per_section="Total Soal tidak boleh kurang dari 50 soal per kolom"),o.source_data==2&&!o.template&&(l.value.template="Template Excel harus diunggah"),o.source_data==1)for(let s=1;s<=10;s++)g(`column_${s}`);return Object.keys(l.value).length===0},p=()=>{const s=["1","2","3","4","5","6","7","8","9","0"],n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),b=["\u03B1","\u03B2","\u03B3","\u03B4","\u03B5","\u03B6","\u03B7","\u03B8","\u03B9","\u03BA","\u03BB","\u03BC","\u03BD","\u03BE","\u03BF","\u03C0","\u03C1","\u03C2","\u03C3","\u03C4","\u03C5","\u03C6","\u03C7","\u03C8","\u03C9","\u0393","\u0394","\u0398","\u039B","\u039E","\u03A0","\u03A3","\u03A6","\u03A8","\u03A9"];let c=[];t.value.includes("number")&&(c=c.concat(s)),t.value.includes("letter")&&(c=c.concat(n)),t.value.includes("symbol")&&(c=c.concat(b));for(let y=1;y<=10;y++)o[`column_${y}`]=a(c,5)},a=(s,n)=>{let b="";for(;b.length<n;){const c=s[Math.floor(Math.random()*s.length)];b.includes(c)||(b+=c)}return b};return{form:o,errors:l,submit:()=>{if(!k())return;const s=new FormData;s.append("source_data",o.source_data),s.append("total_question_per_section",o.total_question_per_section),s.append("question_template_id",o.question_template_id),s.append("template",o.template);for(let n=1;n<=10;n++)s.append(`column_${n}`,o[`column_${n}`]);L.Inertia.post(`/admin/question-titles/${u.questionTitle.id}/questions/generate-questions`,s,{onSuccess:n=>{E.fire({title:"Success!",text:"Generate Soal Kecermatan dijalankan!.",icon:"success",showConfirmButton:!1,timer:1e3}),l.value={}},onFinish:n=>{o.template="",document.querySelector("#fileInput").value=""},onError:n=>{l.value={...n}}})},validateColumn:g,selection:t,confirmSelection:()=>{p(),bootstrap.Modal.getInstance(document.getElementById("generateAutomaticQuestion")).hide()},handleFileChange:C,generateQuestion:p,resetForm:()=>{o.source_data="",o.question_template_id="",o.total_question_per_section="",o.template=null;for(let s=1;s<=10;s++)o[`column_${s}`]="";l.value={}}}}},P={class:"page-wrapper"},G={class:"page-content"},Q=B('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Generate Soal Kecermatan</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Soal Kecermatan</li></ol></nav></div></div>',1),z={class:"card border-top border-0 border-3 border-primary"},R={class:"card-body"},Y={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},J=e("strong",null,"Gagal",-1),W={class:"mt-3"},X={key:1,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},Z=e("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1),$={class:"mt-3"},ee={class:"d-lg-flex align-items-center"},te={class:"ms-auto"},oe=e("a",{href:"/assets/import_format/format-import-kecermatan.xlsx",class:"btn btn-success mx-1 btn-sm mt-lg-0",download:""},[e("i",{class:"bx bxs-file"}),w("Download Format Import Kecermatan")],-1),ae=w("Kembali"),se={class:"col-12"},le=e("label",{class:"form-label"},"Sumber Data Isian",-1),ne=e("option",{value:""},"[ Pilih ]",-1),ie=e("option",{value:"1"},"Disi Manual",-1),re=e("option",{value:"2"},"Diisi Menggunakan File Template Excel",-1),de=[ne,ie,re],ce={key:0,class:"invalid-feedback"},me={key:0,class:"col-12"},ue=e("label",{class:"form-label"},"Template Excel",-1),_e={key:0,class:"invalid-feedback"},be={class:"col-12"},pe=e("label",{class:"form-label"},"Template Soal",-1),he={class:"input-group"},fe=e("option",{value:""},"[ Pilih ]",-1),ve=["value"],ge=w("Tambah Template"),ke={key:0,class:"invalid-feedback"},ye={key:1,class:"col-12"},qe=e("label",{class:"form-label"},"Total Soal Per Kolom (Minimal 50 Per Kolom)",-1),Se={key:0,class:"invalid-feedback"},Te={class:"form-label"},xe=["onUpdate:modelValue","onInput"],we={key:0,class:"invalid-feedback"},Ce={class:"col-12"},Ke=e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1),Ve={key:0,type:"button",class:"btn btn-sm btn-success","data-bs-toggle":"modal","data-bs-target":"#generateAutomaticQuestion"},Fe={class:"modal fade",id:"generateAutomaticQuestion",tabindex:"-1","aria-hidden":"true"},De={class:"modal-dialog modal-dialog-centered"},Ie={class:"modal-content"},Me=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Soal Otomatis"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),je={class:"modal-body"},Oe=e("p",null," Kolom soal akan terisi otomatis berdasarkan huruf, angka dan simbol yang dipilih. ",-1),Ue={class:"table table-bordered"},Ae=e("tr",null,[e("th",null,"Keterangan"),e("th",null,"Action")],-1),Le=e("td",null,"Angka",-1),Be=e("td",null,"Huruf",-1),Ee=e("td",null,"Simbol",-1),He={class:"modal-footer"},Ne=e("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Batal",-1);function Pe(u,o,l,t,C,g){const k=D("Head"),p=D("Link");return r(),i(v,null,[q(k,null,{default:S(()=>{var a;return[e("title",null,m((a=u.$page.props.setting.app_name)!=null?a:"Atur Setting Terlebih Dahulu")+" - Tambah Generate Soal Kecermatan",1)]}),_:1}),e("div",P,[e("div",G,[Q,e("div",z,[e("div",R,[u.$page.props.session.error?(r(),i("div",Y,[J,e("ul",W,[e("li",null,m(u.$page.props.session.error),1)])])):d("",!0),Object.keys(t.errors).length>0?(r(),i("div",X,[Z,e("ul",$,[(r(!0),i(v,null,T(Object.values(t.errors).flat(),a=>(r(),i("li",{key:a},m(a),1))),128))])])):d("",!0),e("div",ee,[e("div",te,[oe,q(p,{href:`/admin/question-titles/${l.questionTitle.id}/questions`,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:S(()=>[ae]),_:1},8,["href"])])]),e("form",{onSubmit:o[5]||(o[5]=A((...a)=>t.submit&&t.submit(...a),["prevent"])),class:"row g-3"},[e("div",se,[le,_(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.form.source_data=a),class:f([{"is-invalid":t.errors.source_data},"form-select"])},de,2),[[V,t.form.source_data]]),t.errors.source_data?(r(),i("div",ce,m(t.errors.source_data),1)):d("",!0)]),t.form.source_data==2?(r(),i("div",me,[ue,e("input",{type:"file",class:f(["form-control",{"is-invalid":t.errors.template}]),onChange:o[1]||(o[1]=(...a)=>t.handleFileChange&&t.handleFileChange(...a)),placeholder:"template",id:"fileInput"},null,34),t.errors.template?(r(),i("div",_e,m(t.errors.template),1)):d("",!0)])):d("",!0),e("div",be,[pe,e("div",he,[_(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>t.form.question_template_id=a),class:f([{"is-invalid":t.errors.question_template_id},"form-select"])},[fe,(r(!0),i(v,null,T(l.questionTemplates,(a,h)=>(r(),i("option",{key:h,value:a.id},m(a.name),9,ve))),128))],2),[[V,t.form.question_template_id]]),q(p,{href:`/admin/question-titles/${l.questionTitle.id}/question-templates`,class:"btn btn-primary",id:"button-addon2"},{default:S(()=>[ge]),_:1},8,["href"]),t.errors.question_template_id?(r(),i("div",ke,m(t.errors.question_template_id),1)):d("",!0)])]),t.form.source_data==1?(r(),i("div",ye,[qe,_(e("input",{type:"number",class:f(["form-control",{"is-invalid":t.errors.total_question_per_section}]),"onUpdate:modelValue":o[3]||(o[3]=a=>t.form.total_question_per_section=a),placeholder:"Total Soal Per Kolom"},null,2),[[F,t.form.total_question_per_section]]),t.errors.total_question_per_section?(r(),i("div",Se,m(t.errors.total_question_per_section),1)):d("",!0)])):d("",!0),t.form.source_data==1?(r(),i(v,{key:2},T(10,a=>e("div",{class:"col-6",key:a},[e("label",Te,"Kolom "+m(a),1),_(e("input",{type:"text",class:f(["form-control",{"is-invalid":t.errors[`column_${a}`]}]),"onUpdate:modelValue":h=>t.form[`column_${a}`]=h,onInput:h=>t.validateColumn(`column_${a}`),placeholder:"Ketik Maksimal 5 Angka, Huruf atau Simbol. Nilai Bisa Dicampur."},null,42,xe),[[F,t.form[`column_${a}`]]]),t.errors[`column_${a}`]?(r(),i("div",we,m(t.errors[`column_${a}`]),1)):d("",!0)])),64)):d("",!0),e("div",Ce,[Ke,e("button",{type:"button",class:"btn btn-sm btn-danger mx-2",onClick:o[4]||(o[4]=(...a)=>t.resetForm&&t.resetForm(...a))},"Reset"),t.form.source_data==1?(r(),i("button",Ve,"Soal Otomatis")):d("",!0)])],32)])]),e("div",Fe,[e("div",De,[e("div",Ie,[Me,e("div",je,[Oe,e("table",Ue,[Ae,e("tr",null,[Le,e("td",null,[_(e("input",{type:"checkbox",value:"number","onUpdate:modelValue":o[6]||(o[6]=a=>t.selection=a)},null,512),[[x,t.selection]])])]),e("tr",null,[Be,e("td",null,[_(e("input",{type:"checkbox",value:"letter","onUpdate:modelValue":o[7]||(o[7]=a=>t.selection=a)},null,512),[[x,t.selection]])])]),e("tr",null,[Ee,e("td",null,[_(e("input",{type:"checkbox",value:"symbol","onUpdate:modelValue":o[8]||(o[8]=a=>t.selection=a)},null,512),[[x,t.selection]])])])])]),e("div",He,[e("button",{type:"button",class:"btn btn-primary",onClick:o[9]||(o[9]=(...a)=>t.confirmSelection&&t.confirmSelection(...a))},"Lanjutkan"),Ne])])])])])])],64)}const We=H(N,[["render",Pe]]);export{We as default};
