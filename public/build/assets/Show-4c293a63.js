import{L as m}from"./Layout-9dcbcbe9.js";import{L as u,H as _,v as e,d as b}from"./app-dde9a483.js";import{S as c}from"./sweetalert2.esm.all-61741a63.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";const p={layout:m,components:{Link:u,Head:_},props:{errors:Object,transaction:Object,banks:Object},setup(n){const t=e.reactive({payment_method:""});return{form:t,submit:()=>{b.Inertia.post(`/user/vouchers/${n.voucher.id}/buy`,{payment_method:t.payment_method},{onSuccess:()=>{c.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{typeof window.snap<"u"?window.snap.pay(n.transaction.snap_token,{onSuccess:()=>{this.$inertia.visit($page.props.setting.app_url+"/user/transactions/success")},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}}):c.fire({title:"Error",text:"Midtrans Snap belum diinisialisasi.",icon:"error",showConfirmButton:!0})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},copyText(n){const t=document.createElement("textarea");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}},N={class:"page-wrapper"},k={class:"page-content"},V={class:"row"},y={class:"col-lg-12"},E={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},v=["innerHTML"],g={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},h=["innerHTML"],x={class:"col-lg-12"},w={class:"card border-top border-0 border-3 border-primary"},B={class:"card-header"},T={class:"d-lg-flex align-items-center"},C={class:"ms-auto"},S={class:"text-center"},P=["href"],L={class:"card-body p-4"},D={class:"row mb-3"},H={class:"col-sm-9"},M=["value"],z={class:"row mb-3"},K={class:"col-sm-9"},A=["value"],j={class:"row mb-3"},F={class:"col-sm-9"},O=["value"],U={class:"row mb-3"},R={class:"col-sm-9"},G=["value"],I={class:"row mb-3"},J={class:"col-sm-9"},W=["value"],q={key:0,class:"row mb-3"},Q={class:"col-sm-9"},X=["value"],Y={class:"row mb-3"},Z={class:"col-sm-9"},$=["value"],ee={class:"row mb-3"},te={class:"col-sm-9"},ae={class:"form-select",disabled:"",style:{"background-color":"#fff"}},ne=["selected"],oe=["selected"],se=["selected"],le=["selected"],re={class:"row mb-3"},ce={class:"col-sm-9"},ie=["value"],de={class:"row mb-3"},me={class:"col-sm-9"},ue={key:0,style:{"font-size":"12px"},class:"badge bg-warning text-dark"},_e={key:1,style:{"font-size":"12px"},class:"badge bg-primary"},be={key:2,style:{"font-size":"12px"},class:"badge bg-danger"},fe={key:3,style:{"font-size":"12px"},class:"badge bg-success"},pe={key:4,style:{"font-size":"12px"},class:"badge bg-danger"},Ne={key:1,class:"row mb-3"},ke={class:"col-sm-9"},Ve={key:2},ye={class:"row mb-3"},Ee={class:"col-sm-9"},ve=["value"],ge={class:"row mb-3"},he={class:"col-sm-9"},xe=["value"],we={class:"row mb-3"},Be={class:"col-sm-9"},Te=["value"],Ce={class:"row mb-3"},Se={class:"col-sm-9"},Pe=["value"],Le={class:"row mb-3"},De={class:"col-sm-9"},He=["src"],Me={key:3,class:"row"},ze={class:"col-lg-12"},Ke={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},Ae={class:"col"},je={class:"card"},Fe={style:{height:"75px"}},Oe=["src"],Ue={class:"card-body text-center"},Re={class:"card-title"},Ge={class:"input-group mb-3"},Ie=["value"],Je=["onClick"],We={class:"card-text mt-3 fw-bold"},qe={key:0,class:"text-center"},Qe=["href"];function Xe(n,t,a,s,Ye,l){const i=e.resolveComponent("Head"),r=e.resolveComponent("Link"),d=e.resolveComponent("center");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,null,{default:e.withCtx(()=>[e.createElementVNode("title",null,e.toDisplayString(n.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Transaksi",1)]),_:1}),e.createElementVNode("div",N,[e.createElementVNode("div",k,[t[31]||(t[31]=e.createStaticVNode('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1)),e.createElementVNode("div",V,[e.createElementVNode("div",y,[n.$page.props.session.error?(e.openBlock(),e.createElementBlock("div",E,[e.createElementVNode("div",{innerHTML:n.$page.props.session.error},null,8,v)])):e.createCommentVNode("",!0),n.$page.props.session.success?(e.openBlock(),e.createElementBlock("div",g,[e.createElementVNode("div",{innerHTML:n.$page.props.session.success},null,8,h)])):e.createCommentVNode("",!0)]),e.createElementVNode("div",x,[e.createElementVNode("div",w,[e.createElementVNode("div",B,[e.createElementVNode("div",T,[t[5]||(t[5]=e.createElementVNode("h6",null,"Detail Transaksi",-1)),e.createElementVNode("div",C,[e.createElementVNode("div",S,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e.openBlock(),e.createBlock(r,{key:0,href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:e.withCtx(()=>[...t[2]||(t[2]=[e.createTextVNode("Upload Bukti Pembayaran",-1)])]),_:1},8,["href"])):e.createCommentVNode("",!0),a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e.openBlock(),e.createElementBlock("a",{key:1,target:"_blank",href:`https://wa.me/${n.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},[...t[3]||(t[3]=[e.createElementVNode("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),e.createTextVNode("Hubungi Admin",-1)])],8,P)):e.createCommentVNode("",!0),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e.openBlock(),e.createElementBlock("button",{key:2,onClick:t[0]||(t[0]=(...o)=>s.pay&&s.pay(...o)),class:"btn btn-success btn-sm m-1"},"Bayar Transaksi")):e.createCommentVNode("",!0),e.createVNode(r,{href:"/user/transactions",class:"btn btn-primary btn-sm m-1"},{default:e.withCtx(()=>[...t[4]||(t[4]=[e.createTextVNode("Riwayat Transaksi",-1)])]),_:1})])])])]),e.createElementVNode("div",L,[t[29]||(t[29]=e.createElementVNode("h5",{class:"mb-3"},"Data Pembeli",-1)),e.createElementVNode("div",D,[t[6]||(t[6]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),e.createElementVNode("div",H,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,M)])]),e.createElementVNode("div",z,[t[7]||(t[7]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Email",-1)),e.createElementVNode("div",K,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,A)])]),e.createElementVNode("div",j,[t[8]||(t[8]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),e.createElementVNode("div",F,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,O)])]),t[30]||(t[30]=e.createElementVNode("h5",{class:"mb-3"},"Detail Transaksi",-1)),e.createElementVNode("div",U,[t[9]||(t[9]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),e.createElementVNode("div",R,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,G)])]),e.createElementVNode("div",I,[t[10]||(t[10]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),e.createElementVNode("div",J,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,W)])]),a.transaction.category?(e.openBlock(),e.createElementBlock("div",q,[t[11]||(t[11]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1)),e.createElementVNode("div",Q,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,X)])])):e.createCommentVNode("",!0),e.createElementVNode("div",Y,[t[12]||(t[12]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),e.createElementVNode("div",Z,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,$)])]),e.createElementVNode("div",ee,[t[14]||(t[14]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),e.createElementVNode("div",te,[e.createElementVNode("select",ae,[e.createElementVNode("option",{value:"account_balance",selected:a.transaction.payment_method=="account_balance"},"Saldo Akun",8,ne),e.createElementVNode("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"},"Transfer Manual (Konfirmasi Pembayaran)",8,oe),e.createElementVNode("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"},"Transfer Otomatis",8,se),e.createElementVNode("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="not_payment_method"},"Tanpa Metode Pembayaran",8,le),t[13]||(t[13]=e.createTextVNode(" not_payment_method ",-1))])])]),e.createElementVNode("div",re,[t[15]||(t[15]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),e.createElementVNode("div",ce,[e.createElementVNode("input",{type:"text",class:"form-control",value:l.formatPrice(a.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,ie)])]),e.createElementVNode("div",de,[t[16]||(t[16]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),e.createElementVNode("div",me,[a.transaction.transaction_status=="pending"?(e.openBlock(),e.createElementBlock("span",ue,"Pending - belum melakukan pembayaran")):e.createCommentVNode("",!0),a.transaction.transaction_status=="paid"?(e.openBlock(),e.createElementBlock("span",_e,"Paid - sudah melakukan pembayaran")):e.createCommentVNode("",!0),a.transaction.transaction_status=="failed"?(e.openBlock(),e.createElementBlock("span",be,"Failed - transaksi Gagal")):e.createCommentVNode("",!0),a.transaction.transaction_status=="done"?(e.openBlock(),e.createElementBlock("span",fe,"Done - transaksi Selesai")):e.createCommentVNode("",!0),a.transaction.transaction_status=="expired"?(e.openBlock(),e.createElementBlock("span",pe,"Expired - Transaksi Kadaluarsa")):e.createCommentVNode("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(e.openBlock(),e.createElementBlock("div",Ne,[t[17]||(t[17]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Action",-1)),e.createElementVNode("div",ke,[e.createElementVNode("button",{onClick:t[1]||(t[1]=(...o)=>s.pay&&s.pay(...o)),class:"btn btn-success btn-sm"},"Bayar Transaksi Sekarang")])])):e.createCommentVNode("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.payment_confirmation?(e.openBlock(),e.createElementBlock("div",Ve,[t[23]||(t[23]=e.createElementVNode("hr",null,null,-1)),t[24]||(t[24]=e.createElementVNode("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),e.createElementVNode("div",ye,[t[18]||(t[18]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),e.createElementVNode("div",Ee,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,ve)])]),e.createElementVNode("div",ge,[t[19]||(t[19]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke",-1)),e.createElementVNode("div",he,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.bank.bank_name+" - "+a.transaction.payment_confirmation.bank.rekening_number+" - "+a.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,xe)])]),e.createElementVNode("div",we,[t[20]||(t[20]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),e.createElementVNode("div",Be,[e.createElementVNode("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,Te)])]),e.createElementVNode("div",Ce,[t[21]||(t[21]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),e.createElementVNode("div",Se,[e.createElementVNode("input",{type:"text",class:"form-control",value:l.formatPrice(a.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Pe)])]),e.createElementVNode("div",Le,[t[22]||(t[22]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),e.createElementVNode("div",De,[e.createElementVNode("img",{src:"/storage/upload_files/payment_confirmation/"+a.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,He)])])])):e.createCommentVNode("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(e.openBlock(),e.createElementBlock("div",Me,[e.createElementVNode("div",ze,[t[27]||(t[27]=e.createElementVNode("h6",{class:"text-center"},"Silakan lakukan pembayaran melalui rekening bank/e-wallet berikut ini dan lakukan konfirmasi",-1)),t[28]||(t[28]=e.createElementVNode("br",null,null,-1)),e.createElementVNode("div",Ke,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.banks,o=>(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("div",je,[e.createElementVNode("div",Fe,[e.createVNode(d,null,{default:e.withCtx(()=>[e.createElementVNode("img",{src:"/storage/upload_files/banks/"+o.image,style:{width:"125px","margin-top":"20px"}},null,8,Oe)]),_:2},1024)]),e.createElementVNode("div",Ue,[e.createElementVNode("h5",Re,e.toDisplayString(o.bank_name),1),e.createElementVNode("div",Ge,[e.createElementVNode("input",{type:"text",class:"form-control form-control-sm text-center",value:o.rekening_number,disabled:"",style:{"background-color":"#fff"}},null,8,Ie),e.createElementVNode("button",{class:"btn btn-primary btn-sm",type:"button",onClick:Ze=>l.copyText(o.rekening_number)},"Copy",8,Je)]),e.createElementVNode("p",We,e.toDisplayString(o.rekening_name),1)])])]))),256))]),a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(e.openBlock(),e.createElementBlock("div",qe,[e.createVNode(r,{href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:e.withCtx(()=>[...t[25]||(t[25]=[e.createTextVNode("Upload Bukti Pembayaran",-1)])]),_:1},8,["href"]),e.createElementVNode("a",{target:"_blank",href:`https://wa.me/${n.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},[...t[26]||(t[26]=[e.createElementVNode("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),e.createTextVNode("Klik Untuk Menghubungi Admin",-1)])],8,Qe)])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)])])])])])])],64)}const nt=f(p,[["render",Xe]]);export{nt as default};
