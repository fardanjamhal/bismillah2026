import{L as I}from"./Layout.48c4e186.js";import{L as M,H as j,m as A,r as K,A as O,c as i,a as h,w as S,b as t,d as U,t as u,g as d,F as g,h as T,k as x,e as L,f as b,p as V,n as v,v as F,C,i as B,j as D,o as r}from"./app.c75ce23b.js";import{S as E}from"./sweetalert2.esm.all.089855d2.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";const N={layout:I,components:{Link:M,Head:j},props:{errors:Object,lessons:Object,questionTemplates:Object,questionTitle:Object},setup(c){const e=A({source_data:"",question_template_id:"",total_question_per_section:"50",template:null,column_1:"",column_2:"",column_3:"",column_4:"",column_5:"",column_6:"",column_7:"",column_8:"",column_9:"",column_10:""}),s=K({...c.errors}),o=K([]);O(()=>c.errors,a=>{s.value={...a}});const w=a=>{e.template=a.target.files[0]},k=a=>{const n=e[a];n.length!==5?s.value[a]=`Kolom ${a.replace("column_","")} harus memiliki 5 karakter.`:new Set(n).size!==n.length?s.value[a]=`Kolom ${a.replace("column_","")} tidak boleh ada karakter yang sama.`:delete s.value[a]},y=()=>{if(s.value={},e.source_data||(s.value.source_data="Sumber Data Isian tidak boleh kosong"),e.question_template_id||(s.value.question_template_id="Template Soal tidak boleh kosong"),e.source_data==1&&!e.total_question_per_section&&(s.value.total_question_per_section="Total Soal tidak boleh kosong"),e.source_data==1&&parseInt(e.total_question_per_section)<50&&(s.value.total_question_per_section="Total Soal tidak boleh kurang dari 50 soal per kolom"),e.source_data==2&&!e.template&&(s.value.template="Template Excel harus diunggah"),e.source_data==1)for(let a=1;a<=10;a++)k(`column_${a}`);return Object.keys(s.value).length===0},p=()=>{const a=["1","2","3","4","5","6","7","8","9","0"],n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),_=["\u03B1","\u03B2","\u03B3","\u03B4","\u03B5","\u03B6","\u03B7","\u03B8","\u03B9","\u03BA","\u03BB","\u03BC","\u03BD","\u03BE","\u03BF","\u03C0","\u03C1","\u03C2","\u03C3","\u03C4","\u03C5","\u03C6","\u03C7","\u03C8","\u03C9","\u0393","\u0394","\u0398","\u039B","\u039E","\u03A0","\u03A3","\u03A6","\u03A8","\u03A9"];let m=[];o.value.includes("number")&&(m=m.concat(a)),o.value.includes("letter")&&(m=m.concat(n)),o.value.includes("symbol")&&(m=m.concat(_));for(let q=1;q<=10;q++)e[`column_${q}`]=l(m,5)},l=(a,n)=>{let _="";for(;_.length<n;){const m=a[Math.floor(Math.random()*a.length)];_.includes(m)||(_+=m)}return _};return{form:e,errors:s,submit:()=>{if(!y())return;const a=new FormData;a.append("source_data",e.source_data),a.append("total_question_per_section",e.total_question_per_section),a.append("question_template_id",e.question_template_id),a.append("template",e.template);for(let n=1;n<=10;n++)a.append(`column_${n}`,e[`column_${n}`]);B.Inertia.post(`/admin/question-titles/${c.questionTitle.id}/questions/generate-questions`,a,{onSuccess:n=>{E.fire({title:"Success!",text:"Generate Soal Kecermatan dijalankan!.",icon:"success",showConfirmButton:!1,timer:1e3}),s.value={}},onFinish:n=>{e.template="",document.querySelector("#fileInput").value=""},onError:n=>{s.value={...n}}})},validateColumn:k,selection:o,confirmSelection:()=>{p(),bootstrap.Modal.getInstance(document.getElementById("generateAutomaticQuestion")).hide()},handleFileChange:w,generateQuestion:p,resetForm:()=>{e.source_data="",e.question_template_id="",e.total_question_per_section="",e.template=null;for(let a=1;a<=10;a++)e[`column_${a}`]="";s.value={}}}}},P={class:"page-wrapper"},G={class:"page-content"},Q={class:"card border-top border-0 border-3 border-primary"},z={class:"card-body"},R={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},J={class:"mt-3"},W={key:1,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},X={class:"mt-3"},Y={class:"d-lg-flex align-items-center"},Z={class:"ms-auto"},$={class:"col-12"},ee={key:0,class:"invalid-feedback"},te={key:0,class:"col-12"},oe={key:0,class:"invalid-feedback"},le={class:"col-12"},ae={class:"input-group"},se=["value"],ne={key:0,class:"invalid-feedback"},ie={key:1,class:"col-12"},re={key:0,class:"invalid-feedback"},de={class:"form-label"},me=["onUpdate:modelValue","onInput"],ue={key:0,class:"invalid-feedback"},ce={class:"col-12"},be={key:0,type:"button",class:"btn btn-sm btn-success","data-bs-toggle":"modal","data-bs-target":"#generateAutomaticQuestion"},_e={class:"modal fade",id:"generateAutomaticQuestion",tabindex:"-1","aria-hidden":"true"},pe={class:"modal-dialog modal-dialog-centered"},fe={class:"modal-content"},ve={class:"modal-body"},ge={class:"table table-bordered"},ke={class:"modal-footer"};function ye(c,e,s,o,w,k){const y=D("Head"),p=D("Link");return r(),i(g,null,[h(y,null,{default:S(()=>{var l;return[t("title",null,u((l=c.$page.props.setting.app_name)!=null?l:"Atur Setting Terlebih Dahulu")+" - Tambah Generate Soal Kecermatan",1)]}),_:1}),t("div",P,[t("div",G,[e[29]||(e[29]=U('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Generate Soal Kecermatan</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Soal Kecermatan</li></ol></nav></div></div>',1)),t("div",Q,[t("div",z,[c.$page.props.session.error?(r(),i("div",R,[e[10]||(e[10]=t("strong",null,"Gagal",-1)),t("ul",J,[t("li",null,u(c.$page.props.session.error),1)])])):d("",!0),Object.keys(o.errors).length>0?(r(),i("div",W,[e[11]||(e[11]=t("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),t("ul",X,[(r(!0),i(g,null,T(Object.values(o.errors).flat(),l=>(r(),i("li",{key:l},u(l),1))),128))])])):d("",!0),t("div",Y,[t("div",Z,[e[13]||(e[13]=t("a",{href:"/assets/import_format/format-import-kecermatan.xlsx",class:"btn btn-success mx-1 btn-sm mt-lg-0",download:""},[t("i",{class:"bx bxs-file"}),x("Download Format Import Kecermatan")],-1)),h(p,{href:`/admin/question-titles/${s.questionTitle.id}/questions`,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:S(()=>[...e[12]||(e[12]=[x("Kembali",-1)])]),_:1},8,["href"])])]),t("form",{onSubmit:e[5]||(e[5]=L((...l)=>o.submit&&o.submit(...l),["prevent"])),class:"row g-3"},[t("div",$,[e[15]||(e[15]=t("label",{class:"form-label"},"Sumber Data Isian",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.source_data=l),class:v([{"is-invalid":o.errors.source_data},"form-select"])},[...e[14]||(e[14]=[t("option",{value:""},"[ Pilih ]",-1),t("option",{value:"1"},"Disi Manual",-1),t("option",{value:"2"},"Diisi Menggunakan File Template Excel",-1)])],2),[[V,o.form.source_data]]),o.errors.source_data?(r(),i("div",ee,u(o.errors.source_data),1)):d("",!0)]),o.form.source_data==2?(r(),i("div",te,[e[16]||(e[16]=t("label",{class:"form-label"},"Template Excel",-1)),t("input",{type:"file",class:v(["form-control",{"is-invalid":o.errors.template}]),onChange:e[1]||(e[1]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),placeholder:"template",id:"fileInput"},null,34),o.errors.template?(r(),i("div",oe,u(o.errors.template),1)):d("",!0)])):d("",!0),t("div",le,[e[19]||(e[19]=t("label",{class:"form-label"},"Template Soal",-1)),t("div",ae,[b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.question_template_id=l),class:v([{"is-invalid":o.errors.question_template_id},"form-select"])},[e[17]||(e[17]=t("option",{value:""},"[ Pilih ]",-1)),(r(!0),i(g,null,T(s.questionTemplates,(l,f)=>(r(),i("option",{key:f,value:l.id},u(l.name),9,se))),128))],2),[[V,o.form.question_template_id]]),h(p,{href:`/admin/question-titles/${s.questionTitle.id}/question-templates`,class:"btn btn-primary",id:"button-addon2"},{default:S(()=>[...e[18]||(e[18]=[x("Tambah Template",-1)])]),_:1},8,["href"]),o.errors.question_template_id?(r(),i("div",ne,u(o.errors.question_template_id),1)):d("",!0)])]),o.form.source_data==1?(r(),i("div",ie,[e[20]||(e[20]=t("label",{class:"form-label"},"Total Soal Per Kolom (Minimal 50 Per Kolom)",-1)),b(t("input",{type:"number",class:v(["form-control",{"is-invalid":o.errors.total_question_per_section}]),"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.total_question_per_section=l),placeholder:"Total Soal Per Kolom"},null,2),[[F,o.form.total_question_per_section]]),o.errors.total_question_per_section?(r(),i("div",re,u(o.errors.total_question_per_section),1)):d("",!0)])):d("",!0),o.form.source_data==1?(r(),i(g,{key:2},T(10,l=>t("div",{class:"col-6",key:l},[t("label",de,"Kolom "+u(l),1),b(t("input",{type:"text",class:v(["form-control",{"is-invalid":o.errors[`column_${l}`]}]),"onUpdate:modelValue":f=>o.form[`column_${l}`]=f,onInput:f=>o.validateColumn(`column_${l}`),placeholder:"Ketik Maksimal 5 Angka, Huruf atau Simbol. Nilai Bisa Dicampur."},null,42,me),[[F,o.form[`column_${l}`]]]),o.errors[`column_${l}`]?(r(),i("div",ue,u(o.errors[`column_${l}`]),1)):d("",!0)])),64)):d("",!0),t("div",ce,[e[21]||(e[21]=t("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1)),t("button",{type:"button",class:"btn btn-sm btn-danger mx-2",onClick:e[4]||(e[4]=(...l)=>o.resetForm&&o.resetForm(...l))},"Reset"),o.form.source_data==1?(r(),i("button",be,"Soal Otomatis")):d("",!0)])],32)])]),t("div",_e,[t("div",pe,[t("div",fe,[e[28]||(e[28]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Soal Otomatis"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",ve,[e[26]||(e[26]=t("p",null," Kolom soal akan terisi otomatis berdasarkan huruf, angka dan simbol yang dipilih. ",-1)),t("table",ge,[e[25]||(e[25]=t("tr",null,[t("th",null,"Keterangan"),t("th",null,"Action")],-1)),t("tr",null,[e[22]||(e[22]=t("td",null,"Angka",-1)),t("td",null,[b(t("input",{type:"checkbox",value:"number","onUpdate:modelValue":e[6]||(e[6]=l=>o.selection=l)},null,512),[[C,o.selection]])])]),t("tr",null,[e[23]||(e[23]=t("td",null,"Huruf",-1)),t("td",null,[b(t("input",{type:"checkbox",value:"letter","onUpdate:modelValue":e[7]||(e[7]=l=>o.selection=l)},null,512),[[C,o.selection]])])]),t("tr",null,[e[24]||(e[24]=t("td",null,"Simbol",-1)),t("td",null,[b(t("input",{type:"checkbox",value:"symbol","onUpdate:modelValue":e[8]||(e[8]=l=>o.selection=l)},null,512),[[C,o.selection]])])])])]),t("div",ke,[t("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=(...l)=>o.confirmSelection&&o.confirmSelection(...l))},"Lanjutkan"),e[27]||(e[27]=t("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Batal",-1))])])])])])])],64)}const we=H(N,[["render",ye]]);export{we as default};
