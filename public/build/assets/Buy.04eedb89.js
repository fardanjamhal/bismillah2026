import{L as v}from"./Layout.6e589519.js";import{L as g,H as k,m as w,c as o,a as b,w as _,b as e,t as i,g as d,F as c,h as m,e as B,f as x,p as T,n as M,i as L,j as p,o as l,k as P}from"./app.3c4545f2.js";import{S as j}from"./sweetalert2.esm.all.089855d2.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";const S={layout:v,components:{Link:g,Head:k},props:{errors:Object,purchase:Object,type:Object,typeTranslation:Object,urlBack:Object,paymentMethods:Object},setup(n){const s=w({payment_method:"",price:""});return{form:s,submit:()=>{j.fire({title:"Selamat",text:"Selangkah lagi pembelianmu berhasil",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Lanjutkan",cancelButtonText:"Batalkan"}).then(r=>{r.isConfirmed&&L.Inertia.post(`/user/transactions/${n.type}/${n.purchase.id}/buy`,{payment_method:s.payment_method,price:n.purchase.price_after_discount})})}}},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(n=>!(this.type==="topupBalance"&&n.code==="account_balance"))}}},C={class:"page-wrapper"},O={class:"page-content"},D={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},N={class:"breadcrumb-title pe-3"},V={class:"ps-3"},A={"aria-label":"breadcrumb"},F={class:"breadcrumb mb-0 p-0"},K={class:"breadcrumb-item active","aria-current":"page"},U={class:"row"},z={class:"col-lg-12"},E={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},I=["innerHTML"],R={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},q=["innerHTML"],G={key:2,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},J={class:"mt-3"},Q={class:"col-lg-12"},W={class:"card border-top border-0 border-3 border-primary"},X={class:"card-header"},Y={class:"d-lg-flex align-items-center"},Z={class:"ms-auto"},$={class:"card-body p-4"},ee={key:0,class:"row mb-3"},se={class:"col-sm-9"},te=["value"],ae={class:"row mb-3"},oe={class:"col-sm-3 col-form-label"},le={class:"col-sm-9"},ne=["value"],ie={key:1,class:"row mb-3"},re={class:"col-sm-9"},de=["value"],ce={class:"row mb-3"},me={class:"col-sm-3 col-form-label"},ue={class:"col-sm-9"},be=["value"],_e={key:2,class:"row mb-3"},pe={class:"col-sm-9"},he={key:0},fe={class:"badge bg-success ms-1"},ye={key:1},ve={class:"row mb-3"},ge={class:"col-sm-9"},ke=["value"],we={key:0,class:"invalid-feedback"},Be={key:3,class:"row mb-3"},xe={class:"col-sm-9"},Te={class:"alert border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2 alert-success"};function Me(n,s,t,r,Le,u){const h=p("Head"),f=p("Link");return l(),o(c,null,[b(h,null,{default:_(()=>{var a;return[e("title",null,i((a=n.$page.props.setting.app_name)!=null?a:"Atur Setting Terlebih Dahulu")+" - Pembelian "+i(t.typeTranslation),1)]}),_:1}),e("div",C,[e("div",O,[e("div",D,[e("div",N,i(t.typeTranslation),1),e("div",V,[e("nav",A,[e("ol",F,[s[2]||(s[2]=e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},[e("i",{class:"bx bx-home-alt"})])],-1)),e("li",K,"Pembelian "+i(t.typeTranslation),1)])])])]),e("div",U,[e("div",z,[n.$page.props.session.error?(l(),o("div",E,[e("div",{innerHTML:n.$page.props.session.error},null,8,I)])):d("",!0),n.$page.props.session.success?(l(),o("div",R,[e("div",{innerHTML:n.$page.props.session.success},null,8,q)])):d("",!0),Object.keys(t.errors).length>0?(l(),o("div",G,[s[3]||(s[3]=e("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),e("ul",J,[(l(!0),o(c,null,m(t.errors,a=>(l(),o("li",null,i(a),1))),256))])])):d("",!0)]),e("div",Q,[e("form",{onSubmit:s[1]||(s[1]=B((...a)=>r.submit&&r.submit(...a),["prevent"]))},[e("div",W,[e("div",X,[e("div",Y,[e("h6",null,"Detail Pembelian "+i(t.typeTranslation),1),e("div",Z,[b(f,{href:t.urlBack,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:_(()=>[...s[4]||(s[4]=[P("Kembali",-1)])]),_:1},8,["href"])])])]),e("div",$,[t.type!="topupBalance"?(l(),o("div",ee,[s[5]||(s[5]=e("label",{class:"col-sm-3 col-form-label"},"Kategori",-1)),e("div",se,[e("input",{type:"text",class:"form-control",value:t.purchase.category.name,disabled:""},null,8,te)])])):d("",!0),e("div",ae,[e("label",oe,i(t.type=="topupBalance"?"Deskripsi Pembelian":"Pembelian "+t.typeTranslation),1),e("div",le,[e("input",{type:"text",class:"form-control",value:t.purchase.title,disabled:"",style:{"background-color":"#fff"}},null,8,ne)])]),t.type=="voucher"?(l(),o("div",ie,[s[6]||(s[6]=e("label",{class:"col-sm-3 col-form-label"},"Masa Aktif",-1)),e("div",re,[e("input",{type:"text",class:"form-control",value:t.purchase.active_period+(t.purchase.period_type=="day"?" Hari":" Bulan"),disabled:"",style:{"background-color":"#fff"}},null,8,de)])])):d("",!0),e("div",ce,[e("label",me,i(t.type=="topupBalance"?"Nominal":"Harga")+" "+i(t.typeTranslation),1),e("div",ue,[e("input",{type:"text",class:"form-control",value:u.formatPrice(t.purchase.price_after_discount),disabled:"",style:{"background-color":"#fff"}},null,8,be)])]),t.type!="topupBalance"?(l(),o("div",_e,[s[8]||(s[8]=e("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1)),e("div",pe,[t.purchase.member_categories.length?(l(),o("div",he,[(l(!0),o(c,null,m(t.purchase.member_categories,(a,y)=>(l(),o("div",{key:y,style:{display:"inline"}},[e("span",fe,i(a.name),1)]))),128))])):(l(),o("div",ye,[...s[7]||(s[7]=[e("span",{class:"badge bg-success ms-1"},"Akses Untuk Seluruh Tipe Member",-1)])]))])])):d("",!0),e("div",ve,[s[10]||(s[10]=e("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),e("div",ge,[x(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>r.form.payment_method=a),class:M([{"is-invalid":t.errors.payment_method},"form-select"])},[s[9]||(s[9]=e("option",{value:""},"[ Pilih Metode Pembayaran ]",-1)),(l(!0),o(c,null,m(u.filteredPaymentMethods,a=>(l(),o("option",{key:a.code,value:a.code},i(a.name),9,ke))),128))],2),[[T,r.form.payment_method]]),t.errors.payment_method?(l(),o("div",we,i(t.errors.payment_method),1)):d("",!0)])]),t.paymentMethods.find(a=>a.code===r.form.payment_method)&&t.paymentMethods.find(a=>a.code===r.form.payment_method).show_description==1?(l(),o("div",Be,[s[11]||(s[11]=e("label",{class:"col-sm-3 col-form-label"},null,-1)),e("div",xe,[e("div",Te,i(t.paymentMethods.find(a=>a.code===r.form.payment_method).description),1)])])):d("",!0),s[12]||(s[12]=e("div",{class:"row"},[e("label",{class:"col-sm-3 col-form-label"}),e("div",{class:"col-sm-9"},[e("div",{class:"d-md-flex d-grid align-items-center gap-3"},[e("button",{class:"btn btn-primary btn-sm px-4",onclick:"buy()"},"Lanjutkan ke pembayaran")])])],-1))])])],32)])])])])],64)}const Ce=H(S,[["render",Me]]);export{Ce as default};
