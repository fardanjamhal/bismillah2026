import{L as V}from"./Layout-3f5fccec.js";import{P as b}from"./Pagination-dc7dcfe1.js";import{L as N,H as E,v as e,d as p}from"./app-17df11ec.js";import{S as u}from"./sweetalert2.esm.all-61741a63.js";import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";const _={layout:V,components:{Link:N,Head:E,Pagination:b},setup(){const n=e.ref(new URL(document.location).searchParams.get("search")),t=e.ref(new URL(document.location).searchParams.get("item_type")||""),l=e.ref(new URL(document.location).searchParams.get("transaction_status")||""),o=e.ref(new URL(document.location).searchParams.get("payment_method")||""),d=e.ref(new URL(document.location).searchParams.get("start_date")),r=e.ref(new URL(document.location).searchParams.get("end_date"));return{search:n,item_type:t,transaction_status:l,payment_method:o,start_date:d,end_date:r,destroy:a=>{u.fire({title:"Apakah Anda yakin ?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hapus"}).then(s=>{s.isConfirmed&&(p.Inertia.delete(`/admin/transactions/${a}`),u.fire({title:"Deleted!",text:"Transaksi Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},handleSearch:()=>{p.Inertia.get("/admin/transactions",{search:n.value,item_type:t.value,transaction_status:l.value,payment_method:o.value,start_date:d.value,end_date:r.value})},exportTransaction:()=>{const a=new URLSearchParams;a.append("search",n.value??""),a.append("item_type",t.value??""),a.append("transaction_status",l.value??""),a.append("payment_method",o.value??""),a.append("start_date",d.value??""),a.append("end_date",r.value??"");const s="/admin/transactions/export?"+a.toString();window.open(s,"_blank")}}},props:{transactions:Object},methods:{formatPrice(n){return"Rp."+(n/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},v={class:"page-wrapper"},k={class:"page-content"},h={class:"card border-top border-0 border-3 border-primary"},f={class:"card-body"},y={class:"row"},x={class:"col-lg-6 col-md-6 mt-1"},B={class:"col-lg-3 col-md-6 mt-1"},w={class:"col-lg-3 col-md-6 mt-1"},T={class:"col-lg-3 col-md-6 mt-1"},S=["value"],P={class:"col-lg-3 col-md-6 mt-1"},C={class:"col-lg-3 col-md-6 mt-1"},M={class:"col-lg-3 col-md-6 mt-1"},D={key:0,class:"alert alert-success border-0 bg-success alert-dismissible fade show py-2"},L={class:"d-flex align-items-center"},U={class:"ms-3"},A={class:"text-white"},R={class:"card border-top border-0 border-3 border-primary"},F={class:"card-header"},H={class:"d-flex align-items-center"},K={class:"ms-auto"},j={class:"card-body"},I={class:"table-responsive"},J={class:"table mb-0",style:{"font-size":"10pt"}},O={key:0,class:"badge bg-primary"},q={key:1,class:"badge bg-primary"},z={key:2,class:"badge bg-primary"},G={key:3,class:"badge bg-primary"},Q={key:0,class:"badge bg-warning"},W={key:1,class:"badge bg-danger"},X={key:2,class:"badge bg-primary"},Y={key:3,class:"badge bg-danger"},Z={key:4,class:"badge bg-success"},$={class:"dropdown"},ee={class:"dropdown-menu","data-popper-placement":"top-start","data-popper-reference-hidden":"","data-popper-escaped":""},te=["onClick"],ae={key:0,align:"center",colspan:"9"};function oe(n,t,l,o,d,r){const c=e.resolveComponent("Head"),i=e.resolveComponent("Link"),m=e.resolveComponent("Pagination");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(c,null,{default:e.withCtx(()=>[e.createElementVNode("title",null,e.toDisplayString(n.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Data Transaksi",1)]),_:1}),e.createElementVNode("div",v,[e.createElementVNode("div",k,[t[29]||(t[29]=e.createStaticVNode('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Data Transaksi</li></ol></nav></div></div>',1)),e.createElementVNode("div",h,[e.createElementVNode("div",f,[e.createElementVNode("form",null,[e.createElementVNode("div",y,[e.createElementVNode("div",x,[t[8]||(t[8]=e.createElementVNode("label",{for:"search"},"Kode Transaksi",-1)),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o.search=a),class:"form-control form-control-sm",id:"search",placeholder:"Cari Berdasarkan Kode Transaksi...."},null,512),[[e.vModelText,o.search]])]),e.createElementVNode("div",B,[t[10]||(t[10]=e.createElementVNode("label",{for:"item_type"},"Jenis Transaksi",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.item_type=a),class:"form-select form-select-sm",id:"item_type"},[...t[9]||(t[9]=[e.createStaticVNode('<option value="">[ Pilih Jenis Transaksi ]</option><option value="App\\Models\\Exam\\Exam">Pembelian Latihan Soal</option><option value="App\\Models\\Exam\\ExamGroup">Pembelian Tryout</option><option value="App\\Models\\Material\\Module">Pembelian Modul/Materi</option><option value="App\\Models\\Material\\VideoModule">Pembelian Video Pembajaran</option><option value="App\\Models\\Transaction\\Voucher">Pembelian Membership</option><option value="TopupBalance">Top Up Saldo</option>',7)])],512),[[e.vModelSelect,o.item_type]])]),e.createElementVNode("div",w,[t[12]||(t[12]=e.createElementVNode("label",{for:"transaction_status"},"Status Transaksi",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.transaction_status=a),class:"form-select form-select-sm",id:"transaction_status"},[...t[11]||(t[11]=[e.createStaticVNode('<option value="">[ Pilih Status ]</option><option value="pending">Pending</option><option value="paid">Paid</option><option value="done">Done</option><option value="failed">Failed</option>',5)])],512),[[e.vModelSelect,o.transaction_status]])]),e.createElementVNode("div",T,[t[14]||(t[14]=e.createElementVNode("label",{for:"payment_method"},"Metode Pembayaran",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.payment_method=a),class:"form-select form-select-sm",id:"payment_method"},[t[13]||(t[13]=e.createElementVNode("option",{value:""},"[ Pilih Metode Pembayaran ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.$page.props.setting.payment_methods,a=>(e.openBlock(),e.createElementBlock("option",{value:a.code},e.toDisplayString(a.name),9,S))),256))],512),[[e.vModelSelect,o.payment_method]])]),e.createElementVNode("div",P,[t[15]||(t[15]=e.createElementVNode("label",{for:"start_date"},"Tanggal Mulai",-1)),e.withDirectives(e.createElementVNode("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":t[4]||(t[4]=a=>o.start_date=a),id:"start_date"},null,512),[[e.vModelText,o.start_date]])]),e.createElementVNode("div",C,[t[16]||(t[16]=e.createElementVNode("label",{for:"end_date"},"Tanggal Akhir",-1)),e.withDirectives(e.createElementVNode("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":t[5]||(t[5]=a=>o.end_date=a),id:"end_date"},null,512),[[e.vModelText,o.end_date]])]),e.createElementVNode("div",M,[t[20]||(t[20]=e.createElementVNode("label",{for:"end_date"},"Action",-1)),t[21]||(t[21]=e.createElementVNode("br",null,null,-1)),e.createElementVNode("button",{onClick:t[6]||(t[6]=e.withModifiers((...a)=>o.handleSearch&&o.handleSearch(...a),["prevent"])),class:"btn btn-primary btn-sm me-2"},[...t[17]||(t[17]=[e.createElementVNode("i",{class:"bx bx-filter"},null,-1),e.createTextVNode("Filter ",-1)])]),e.createVNode(i,{href:"/admin/transactions",class:"btn btn-danger btn-sm me-2"},{default:e.withCtx(()=>[...t[18]||(t[18]=[e.createElementVNode("i",{class:"bx bx-refresh"},null,-1),e.createTextVNode("reset ",-1)])]),_:1}),e.createElementVNode("a",{target:"_blank",onClick:t[7]||(t[7]=e.withModifiers((...a)=>o.exportTransaction&&o.exportTransaction(...a),["prevent"])),class:"btn btn-success btn-sm"},[...t[19]||(t[19]=[e.createElementVNode("i",{class:"bx bxs-file"},null,-1),e.createTextVNode(" Export ",-1)])])])])])])]),n.$page.props.session.success?(e.openBlock(),e.createElementBlock("div",D,[e.createElementVNode("div",L,[t[23]||(t[23]=e.createElementVNode("div",{class:"font-35 text-white"},[e.createElementVNode("i",{class:"bx bxs-check-circle"})],-1)),e.createElementVNode("div",U,[t[22]||(t[22]=e.createElementVNode("h6",{class:"mb-0 text-white"},"Sukses",-1)),e.createElementVNode("div",A,e.toDisplayString(n.$page.props.session.success),1)])])])):e.createCommentVNode("",!0),e.createElementVNode("div",R,[e.createElementVNode("div",F,[e.createElementVNode("div",H,[t[25]||(t[25]=e.createElementVNode("div",null,[e.createElementVNode("h6",{class:"mb-0"},"Data Transaksi")],-1)),e.createElementVNode("div",K,[e.createVNode(i,{href:"/admin/transactions/create",class:"btn btn-primary btn-sm me-2"},{default:e.withCtx(()=>[...t[24]||(t[24]=[e.createElementVNode("i",{class:"bx bxs-plus-square"},null,-1),e.createTextVNode("Tambah Transaksi ",-1)])]),_:1})])])]),e.createElementVNode("div",j,[e.createElementVNode("div",I,[e.createElementVNode("table",J,[t[28]||(t[28]=e.createElementVNode("thead",{class:"table-light"},[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"No"),e.createElementVNode("th",null,"Kode"),e.createElementVNode("th",null,"Tanggal"),e.createElementVNode("th",null,"User"),e.createElementVNode("th",null,"Keterangan"),e.createElementVNode("th",null,"Metode"),e.createElementVNode("th",null,"Total"),e.createElementVNode("th",null,"Status"),e.createElementVNode("th",null,"Actions")])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.transactions.data,(a,s)=>(e.openBlock(),e.createElementBlock("tr",{key:s},[e.createElementVNode("td",null,e.toDisplayString(++s+(l.transactions.current_page-1)*l.transactions.per_page),1),e.createElementVNode("td",null,e.toDisplayString(a.code),1),e.createElementVNode("td",null,e.toDisplayString(a.created_at),1),e.createElementVNode("td",null,e.toDisplayString(a.user.name),1),e.createElementVNode("td",null,e.toDisplayString(a.description),1),e.createElementVNode("td",null,[a.payment_method=="account_balance"?(e.openBlock(),e.createElementBlock("span",O,"Saldo Akun")):e.createCommentVNode("",!0),a.payment_method=="manual_transfer"?(e.openBlock(),e.createElementBlock("span",q,"Transfer Manual")):e.createCommentVNode("",!0),a.payment_method=="automatic_transfer_midtrans"?(e.openBlock(),e.createElementBlock("span",z,"Transfer Otomatis")):e.createCommentVNode("",!0),a.payment_method=="not_payment_method"?(e.openBlock(),e.createElementBlock("span",G,"Tanpa Metode Pembayaran")):e.createCommentVNode("",!0)]),e.createElementVNode("td",null,e.toDisplayString(r.formatPrice(a.total_payment)),1),e.createElementVNode("td",null,[a.transaction_status=="pending"?(e.openBlock(),e.createElementBlock("span",Q,"Pending")):e.createCommentVNode("",!0),a.transaction_status=="expired"?(e.openBlock(),e.createElementBlock("span",W,"Expired")):e.createCommentVNode("",!0),a.transaction_status=="paid"?(e.openBlock(),e.createElementBlock("span",X,"Paid")):e.createCommentVNode("",!0),a.transaction_status=="failed"?(e.openBlock(),e.createElementBlock("span",Y,"Failed")):e.createCommentVNode("",!0),a.transaction_status=="done"?(e.openBlock(),e.createElementBlock("span",Z,"Done")):e.createCommentVNode("",!0)]),e.createElementVNode("td",null,[e.createElementVNode("div",$,[t[27]||(t[27]=e.createElementVNode("button",{class:"btn btn-light btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"true"},"Action",-1)),e.createElementVNode("ul",ee,[e.createElementVNode("li",null,[e.createVNode(i,{class:"dropdown-item",href:`/admin/transactions/${a.id}`},{default:e.withCtx(()=>[...t[26]||(t[26]=[e.createTextVNode("Detail",-1)])]),_:1},8,["href"])]),e.createElementVNode("li",null,[e.createElementVNode("a",{class:"dropdown-item",href:"#",onClick:e.withModifiers(ne=>o.destroy(a.id),["prevent"])},"Hapus",8,te)])])])])]))),128)),e.createElementVNode("tr",null,[l.transactions.data.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("td",ae,"Data Tidak Tersedia"))])])])]),e.createVNode(m,{links:l.transactions.links,align:"end"},null,8,["links"])])])])])],64)}const ce=g(_,[["render",oe]]);export{ce as default};
