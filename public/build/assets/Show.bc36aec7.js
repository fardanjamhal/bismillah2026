import{L as g}from"./Layout.f219793d.js";import{L as k,H as w,p as x,c as e,a as _,w as d,b as t,f as n,W as T,F as f,g as S,h as P,i as C,k as l,j as b,o as a,t as h}from"./app.db5b7af9.js";import{S as y}from"./sweetalert2.all.b0408aeb.js";import{_ as L}from"./_plugin-vue_export-helper.cdc0426e.js";const B={layout:g,components:{Link:k,Head:w},props:{errors:Object,transaction:Object,banks:Object},setup(o){const c=x({payment_method:""});return{form:c,submit:()=>{P.Inertia.post(`/user/vouchers/${o.voucher.id}/buy`,{payment_method:c.payment_method},{onSuccess:()=>{y.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{typeof window.snap<"u"?window.snap.pay(o.transaction.snap_token,{onSuccess:()=>{this.$inertia.visit($page.props.setting.app_url+"/user/transactions/success")},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}}):y.fire({title:"Error",text:"Midtrans Snap belum diinisialisasi.",icon:"error",showConfirmButton:!0})}}},methods:{formatPrice(o){return"Rp."+(o/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},copyText(o){const c=document.createElement("textarea");c.value=o,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c)}}},D={class:"page-wrapper"},H={class:"page-content"},M=C('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1),N={class:"row"},z={class:"col-lg-12"},K={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},A=["innerHTML"],E={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},j=["innerHTML"],V={class:"col-lg-12"},F={class:"card border-top border-0 border-3 border-primary"},O={class:"card-header"},U={class:"d-lg-flex align-items-center"},R=t("h6",null,"Detail Transaksi",-1),W={class:"ms-auto"},G={class:"text-center"},I=l("Upload Bukti Pembayaran"),J=["href"],q=t("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),Q=l("Hubungi Admin"),X=[q,Q],Y=l("Riwayat Transaksi"),Z={class:"card-body p-4"},$=t("h5",{class:"mb-3"},"Data Pembeli",-1),tt={class:"row mb-3"},st=t("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1),at={class:"col-sm-9"},et=["value"],nt={class:"row mb-3"},ot=t("label",{class:"col-sm-3 col-form-label"},"Email",-1),ct={class:"col-sm-9"},it=["value"],lt={class:"row mb-3"},rt=t("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1),dt={class:"col-sm-9"},_t=["value"],mt=t("h5",{class:"mb-3"},"Detail Transaksi",-1),ut={class:"row mb-3"},bt=t("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1),ht={class:"col-sm-9"},ft=["value"],yt={class:"row mb-3"},pt=t("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1),vt={class:"col-sm-9"},gt=["value"],kt={key:0,class:"row mb-3"},wt=t("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1),xt={class:"col-sm-9"},Tt=["value"],St={class:"row mb-3"},Pt=t("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1),Ct={class:"col-sm-9"},Lt=["value"],Bt={class:"row mb-3"},Dt=t("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1),Ht={class:"col-sm-9"},Mt={class:"form-select",disabled:"",style:{"background-color":"#fff"}},Nt=["selected"],zt=["selected"],Kt=["selected"],At=["selected"],Et=l(" not_payment_method "),jt={class:"row mb-3"},Vt=t("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1),Ft={class:"col-sm-9"},Ot=["value"],Ut={class:"row mb-3"},Rt=t("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1),Wt={class:"col-sm-9"},Gt={key:0,style:{"font-size":"12px"},class:"badge bg-warning text-dark"},It={key:1,style:{"font-size":"12px"},class:"badge bg-primary"},Jt={key:2,style:{"font-size":"12px"},class:"badge bg-danger"},qt={key:3,style:{"font-size":"12px"},class:"badge bg-success"},Qt={key:4,style:{"font-size":"12px"},class:"badge bg-danger"},Xt={key:1,class:"row mb-3"},Yt=t("label",{class:"col-sm-3 col-form-label"},"Action",-1),Zt={class:"col-sm-9"},$t={key:2},ts=t("hr",null,null,-1),ss=t("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1),as={class:"row mb-3"},es=t("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1),ns={class:"col-sm-9"},os=["value"],cs={class:"row mb-3"},is=t("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke",-1),ls={class:"col-sm-9"},rs=["value"],ds={class:"row mb-3"},_s=t("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1),ms={class:"col-sm-9"},us=["value"],bs={class:"row mb-3"},hs=t("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1),fs={class:"col-sm-9"},ys=["value"],ps={class:"row mb-3"},vs=t("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1),gs={class:"col-sm-9"},ks=["src"],ws={key:3,class:"row"},xs={class:"col-lg-12"},Ts=t("h6",{class:"text-center"},"Silakan lakukan pembayaran melalui rekening bank/e-wallet berikut ini dan lakukan konfirmasi",-1),Ss=t("br",null,null,-1),Ps={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},Cs={class:"col"},Ls={class:"card"},Bs={style:{height:"75px"}},Ds=["src"],Hs={class:"card-body text-center"},Ms={class:"card-title"},Ns={class:"input-group mb-3"},zs=["value"],Ks=["onClick"],As={class:"card-text mt-3 fw-bold"},Es={key:0,class:"text-center"},js=l("Upload Bukti Pembayaran"),Vs=["href"],Fs=t("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),Os=l("Klik Untuk Menghubungi Admin"),Us=[Fs,Os];function Rs(o,c,s,r,Ws,m){const p=b("Head"),u=b("Link"),v=b("center");return a(),e(f,null,[_(p,null,{default:d(()=>{var i;return[t("title",null,h((i=o.$page.props.setting.app_name)!=null?i:"Atur Setting Terlebih Dahulu")+" - Transaksi",1)]}),_:1}),t("div",D,[t("div",H,[M,t("div",N,[t("div",z,[o.$page.props.session.error?(a(),e("div",K,[t("div",{innerHTML:o.$page.props.session.error},null,8,A)])):n("",!0),o.$page.props.session.success?(a(),e("div",E,[t("div",{innerHTML:o.$page.props.session.success},null,8,j)])):n("",!0)]),t("div",V,[t("div",F,[t("div",O,[t("div",U,[R,t("div",W,[t("div",G,[s.transaction.transaction_status=="pending"&&s.transaction.payment_method=="manual_transfer"?(a(),T(u,{key:0,href:`/user/transactions/${s.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:d(()=>[I]),_:1},8,["href"])):n("",!0),s.transaction.transaction_status=="pending"&&s.transaction.payment_method=="manual_transfer"?(a(),e("a",{key:1,target:"_blank",href:`https://wa.me/${o.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},X,8,J)):n("",!0),s.transaction.payment_method=="automatic_transfer_midtrans"&&s.transaction.transaction_status=="pending"?(a(),e("button",{key:2,onClick:c[0]||(c[0]=(...i)=>r.pay&&r.pay(...i)),class:"btn btn-success btn-sm m-1"},"Bayar Transaksi")):n("",!0),_(u,{href:"/user/transactions",class:"btn btn-primary btn-sm m-1"},{default:d(()=>[Y]),_:1})])])])]),t("div",Z,[$,t("div",tt,[st,t("div",at,[t("input",{type:"text",class:"form-control",value:s.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,et)])]),t("div",nt,[ot,t("div",ct,[t("input",{type:"text",class:"form-control",value:s.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,it)])]),t("div",lt,[rt,t("div",dt,[t("input",{type:"text",class:"form-control",value:s.transaction.user.student&&s.transaction.user.student.phone_number?s.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,_t)])]),mt,t("div",ut,[bt,t("div",ht,[t("input",{type:"text",class:"form-control",value:s.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,ft)])]),t("div",yt,[pt,t("div",vt,[t("input",{type:"text",class:"form-control",value:s.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,gt)])]),s.transaction.category?(a(),e("div",kt,[wt,t("div",xt,[t("input",{type:"text",class:"form-control",value:s.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,Tt)])])):n("",!0),t("div",St,[Pt,t("div",Ct,[t("input",{type:"text",class:"form-control",value:s.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,Lt)])]),t("div",Bt,[Dt,t("div",Ht,[t("select",Mt,[t("option",{value:"account_balance",selected:s.transaction.payment_method=="account_balance"},"Saldo Akun",8,Nt),t("option",{value:"manual_transfer",selected:s.transaction.payment_method=="manual_transfer"},"Transfer Manual (Konfirmasi Pembayaran)",8,zt),t("option",{value:"automatic_transfer_midtrans",selected:s.transaction.payment_method=="automatic_transfer_midtrans"},"Transfer Otomatis",8,Kt),t("option",{value:"automatic_transfer_midtrans",selected:s.transaction.payment_method=="not_payment_method"},"Tanpa Metode Pembayaran",8,At),Et])])]),t("div",jt,[Vt,t("div",Ft,[t("input",{type:"text",class:"form-control",value:m.formatPrice(s.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,Ot)])]),t("div",Ut,[Rt,t("div",Wt,[s.transaction.transaction_status=="pending"?(a(),e("span",Gt,"Pending - belum melakukan pembayaran")):n("",!0),s.transaction.transaction_status=="paid"?(a(),e("span",It,"Paid - sudah melakukan pembayaran")):n("",!0),s.transaction.transaction_status=="failed"?(a(),e("span",Jt,"Failed - transaksi Gagal")):n("",!0),s.transaction.transaction_status=="done"?(a(),e("span",qt,"Done - transaksi Selesai")):n("",!0),s.transaction.transaction_status=="expired"?(a(),e("span",Qt,"Expired - Transaksi Kadaluarsa")):n("",!0)])]),s.transaction.payment_method=="automatic_transfer_midtrans"&&s.transaction.transaction_status=="pending"?(a(),e("div",Xt,[Yt,t("div",Zt,[t("button",{onClick:c[1]||(c[1]=(...i)=>r.pay&&r.pay(...i)),class:"btn btn-success btn-sm"},"Bayar Transaksi Sekarang")])])):n("",!0),s.transaction.payment_method=="manual_transfer"&&s.transaction.payment_confirmation?(a(),e("div",$t,[ts,ss,t("div",as,[es,t("div",ns,[t("input",{type:"text",class:"form-control",value:s.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,os)])]),t("div",cs,[is,t("div",ls,[t("input",{type:"text",class:"form-control",value:s.transaction.payment_confirmation.bank.bank_name+" - "+s.transaction.payment_confirmation.bank.rekening_number+" - "+s.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,rs)])]),t("div",ds,[_s,t("div",ms,[t("input",{type:"text",class:"form-control",value:s.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,us)])]),t("div",bs,[hs,t("div",fs,[t("input",{type:"text",class:"form-control",value:m.formatPrice(s.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,ys)])]),t("div",ps,[vs,t("div",gs,[t("img",{src:"/storage/upload_files/payment_confirmation/"+s.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,ks)])])])):n("",!0),s.transaction.payment_method=="manual_transfer"&&s.transaction.transaction_status=="pending"?(a(),e("div",ws,[t("div",xs,[Ts,Ss,t("div",Ps,[(a(!0),e(f,null,S(s.banks,i=>(a(),e("div",Cs,[t("div",Ls,[t("div",Bs,[_(v,null,{default:d(()=>[t("img",{src:"/storage/upload_files/banks/"+i.image,style:{width:"125px","margin-top":"20px"}},null,8,Ds)]),_:2},1024)]),t("div",Hs,[t("h5",Ms,h(i.bank_name),1),t("div",Ns,[t("input",{type:"text",class:"form-control form-control-sm text-center",value:i.rekening_number,disabled:"",style:{"background-color":"#fff"}},null,8,zs),t("button",{class:"btn btn-primary btn-sm",type:"button",onClick:Gs=>m.copyText(i.rekening_number)},"Copy",8,Ks)]),t("p",As,h(i.rekening_name),1)])])]))),256))]),s.transaction.transaction_status=="pending"&&s.transaction.payment_method=="manual_transfer"?(a(),e("div",Es,[_(u,{href:`/user/transactions/${s.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:d(()=>[js]),_:1},8,["href"]),t("a",{target:"_blank",href:`https://wa.me/${o.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},Us,8,Vs)])):n("",!0)])])):n("",!0)])])])])])])],64)}const Xs=L(B,[["render",Rs]]);export{Xs as default};
