import{L as w}from"./Layout-80160f1d.js";import{x as g,L as M,H as L,l as O,a as k,o as i,c as l,b as x,w as h,d as t,e as T,t as d,h as n,F as v,i as b,f as K,g as c,m as u,n as _,v as p,j as G,k as N}from"./app-50a2f634.js";import{M as B}from"./vue3-multiselect.umd.min-bce5824b.js";import{a as y}from"./index-c612f2c9.js";/* empty css                                                                  */import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-2725ad78.js";var F=typeof g=="object"&&g&&g.Object===Object&&g,H=F,E=H,q=typeof self=="object"&&self&&self.Object===Object&&self,z=E||q||Function("return this")(),I=z,J=I,R=J.Symbol,V=R,P=V;P&&P.toStringTag;var S=V;S&&S.toStringTag;const Y={layout:w,components:{Link:M,Head:L,Multiselect:B},props:{errors:Object,categories:Object,memberCategories:Object,users:Object},methods:{formatPrice(s){return"Rp."+(s/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(s=>!(this.form.item_type==3&&s.code==="account_balance"))}},setup(){const s=O({item_type:"",category_id:"",voucher_id:"",lesson_category_id:"",lesson_id:"",exam_id:"",exam_group_id:"",user_id:"",expired_date:"",total_payment:"",payment_method:"",reduce_account_balance:"",transaction_status:"",created_at:"",lessonCategories:[],lessons:[],exams:[],examGroups:[],users:[],vouchers:[]});return{form:s,submit:()=>{G.Inertia.post("/admin/transactions",{item_type:s.item_type,category_id:s.category_id,voucher_id:s.voucher_id,lesson_category_id:s.lesson_category_id,lesson_id:s.lesson_id,exam_id:s.exam_id,exam_group_id:s.exam_group_id,user_id:s.user_id,expired_date:s.expired_date,total_payment:s.total_payment,created_at:s.created_at,payment_method:s.payment_method,reduce_account_balance:s.reduce_account_balance,transaction_status:s.transaction_status})},lessonCategoryData:()=>{s.lesson_category_id="",s.lesson_id="",s.exam_id="",s.exam_group_id="",y.get(`/admin/categories/${s.category_id}/vouchers`).then(m=>{s.vouchers=m.data}).catch(m=>console.error(m)),y.get(`/admin/categories/${s.category_id}/lesson-categories`).then(m=>{s.lessonCategories=m.data}).catch(m=>console.error(m))},lessonData:()=>{s.lesson_id="",s.exam_id="",y.get(`/admin/lesson-categories/${s.lesson_category_id}/exam-groups`).then(m=>{s.examGroups=m.data}).catch(m=>console.error(m)),y.get(`/admin/lesson-categories/${s.lesson_category_id}/lessons`).then(m=>{s.lessons=m.data}).catch(m=>console.error(m))},examData:()=>{s.exam_id="",y.get(`/admin/lessons/${s.lesson_id}/exams`).then(m=>{s.exams=m.data}).catch(m=>console.error(m))},changeTransactionType:()=>{s.category_id="",s.voucher_id="",s.lesson_category_id="",s.lesson_id="",s.exam_id="",s.exam_group_id="",s.user_id="",s.expired_date="",s.total_payment="",s.payment_method="",s.created_at="",s.reduce_account_balance="",s.transaction_status=""}}}},Q={class:"page-wrapper"},W={class:"page-content"},X={key:0,class:"alert alert-danger border-0 bg-danger alert-dismissible fade show py-2"},Z={class:"d-flex align-items-center"},$={class:"ms-3"},ee={class:"text-white"},ae={class:"row"},te={class:"col-lg-12 col-md-12"},oe={class:"card border-top border-0 border-3 border-primary"},se={class:"card-body"},re={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},ie={class:"mt-3"},le={class:"d-lg-flex align-items-center"},ne={class:"ms-auto"},de={class:"col-12"},me={key:0,class:"invalid-feedback"},_e={key:0,class:"col-12"},ce=["value"],ue={key:0,class:"invalid-feedback"},ve={key:1,class:"col-12"},be=["value"],fe={key:0,class:"invalid-feedback"},ye={key:2,class:"col-12"},ge=["value"],ke={key:0,class:"invalid-feedback"},xe={key:3,class:"col-12"},pe=["value"],he={key:0,class:"invalid-feedback"},Te={key:4,class:"col-12"},Pe=["value"],Se={key:0,class:"invalid-feedback"},Ve={key:5,class:"col-12"},je=["value"],Ce={key:0,class:"invalid-feedback"},De={key:6,class:"col-12"},Ue={key:0,class:"invalid-feedback"},we={class:"col-12"},Me={key:0,class:"invalid-feedback"},Le={class:"col-12"},Oe=["value"],Ke={key:0,class:"invalid-feedback"},Ge={key:7,class:"col-12"},Ne={key:0,class:"invalid-feedback"},Be={key:8,class:"col-12"},Ae={key:0,class:"invalid-feedback"},Fe={class:"col-12"},He={key:0,class:"invalid-feedback"},Ee={class:"col-12"},qe={key:0,value:"pending"},ze={key:1,value:"paid"},Ie={key:2,value:"failed"},Je={key:3,value:"expired"},Re={key:0,class:"invalid-feedback"};function Ye(s,e,r,o,j,f){const m=k("Head"),C=k("Link"),D=k("multiselect");return i(),l(v,null,[x(m,null,{default:h(()=>[t("title",null,d(s.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Tambah Transaksi",1)]),_:1}),t("div",Q,[t("div",W,[e[49]||(e[49]=T('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Transaksi</li></ol></nav></div></div>',1)),s.$page.props.session.error?(i(),l("div",X,[t("div",Z,[e[20]||(e[20]=t("div",{class:"font-35 text-white"},[t("i",{class:"bx bxs-message-square-x"})],-1)),t("div",$,[e[19]||(e[19]=t("h6",{class:"mb-0 text-white"},"Gagal",-1)),t("div",ee,d(s.$page.props.session.error),1)])])])):n("",!0),t("div",ae,[t("div",te,[t("div",oe,[t("div",se,[Object.keys(r.errors).length>0?(i(),l("div",re,[e[21]||(e[21]=t("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),t("ul",ie,[(i(!0),l(v,null,b(r.errors,a=>(i(),l("li",null,d(a),1))),256))])])):n("",!0),t("div",le,[t("div",ne,[x(C,{href:"/admin/exams",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:h(()=>[...e[22]||(e[22]=[N("Kembali",-1)])]),_:1})])]),t("form",{onSubmit:e[18]||(e[18]=K((...a)=>o.submit&&o.submit(...a),["prevent"])),class:"row g-3"},[t("div",de,[e[24]||(e[24]=t("label",{class:"form-label"},"Jenis Transaksi",-1)),c(t("select",{onChange:e[0]||(e[0]=(...a)=>o.changeTransactionType&&o.changeTransactionType(...a)),"onUpdate:modelValue":e[1]||(e[1]=a=>o.form.item_type=a),class:_([{"is-invalid":r.errors.item_type},"form-select"])},[...e[23]||(e[23]=[T('<option value="">[ Pilih ]</option><option value="0">Pembelian Latihan Soal</option><option value="1">Pembelian Tryout</option><option value="2">Pembelian Membership</option><option value="3">Top Up Saldo</option>',5)])],34),[[u,o.form.item_type]]),r.errors.item_type?(i(),l("div",me,d(r.errors.item_type),1)):n("",!0)]),o.form.item_type&&o.form.item_type!="3"?(i(),l("div",_e,[e[26]||(e[26]=t("label",{class:"form-label"},"Kategori Peminatan",-1)),c(t("select",{onChange:e[2]||(e[2]=(...a)=>o.lessonCategoryData&&o.lessonCategoryData(...a)),"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.category_id=a),class:_([{"is-invalid":r.errors.category_id},"form-select"])},[e[25]||(e[25]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(r.categories,(a,U)=>(i(),l("option",{key:U,value:a.id},d(a.name),9,ce))),128))],34),[[u,o.form.category_id]]),r.errors.category_id?(i(),l("div",ue,d(r.errors.category_id),1)):n("",!0)])):n("",!0),o.form.item_type=="2"?(i(),l("div",ve,[e[28]||(e[28]=t("label",{class:"form-label"},"Voucher Membership",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>o.form.voucher_id=a),class:_([{"is-invalid":r.errors.voucher_id},"form-select"])},[e[27]||(e[27]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(o.form.vouchers,a=>(i(),l("option",{value:a.id},d(a.title)+" [ "+d(f.formatPrice(a.price_after_discount))+" ]",9,be))),256))],2),[[u,o.form.voucher_id]]),r.errors.voucher_id?(i(),l("div",fe,d(r.errors.voucher_id),1)):n("",!0)])):n("",!0),o.form.item_type=="0"||o.form.item_type=="1"?(i(),l("div",ye,[e[30]||(e[30]=t("label",{class:"form-label"},"Kategori Mata Pelajaran",-1)),c(t("select",{onChange:e[5]||(e[5]=(...a)=>o.lessonData&&o.lessonData(...a)),"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.lesson_category_id=a),class:_([{"is-invalid":r.errors.lesson_category_id},"form-select"])},[e[29]||(e[29]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(o.form.lessonCategories,a=>(i(),l("option",{value:a.id},d(a.name),9,ge))),256))],34),[[u,o.form.lesson_category_id]]),r.errors.lesson_category_id?(i(),l("div",ke,d(r.errors.lesson_category_id),1)):n("",!0)])):n("",!0),o.form.item_type=="0"?(i(),l("div",xe,[e[32]||(e[32]=t("label",{class:"form-label"},"Mata Pelajaran",-1)),c(t("select",{onChange:e[7]||(e[7]=(...a)=>o.examData&&o.examData(...a)),"onUpdate:modelValue":e[8]||(e[8]=a=>o.form.lesson_id=a),class:_([{"is-invalid":r.errors.lesson_id},"form-select"])},[e[31]||(e[31]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(o.form.lessons,a=>(i(),l("option",{value:a.id},d(a.name),9,pe))),256))],34),[[u,o.form.lesson_id]]),r.errors.lesson_id?(i(),l("div",he,d(r.errors.lesson_id),1)):n("",!0)])):n("",!0),o.form.item_type=="0"?(i(),l("div",Te,[e[34]||(e[34]=t("label",{class:"form-label"},"Latihan Soal",-1)),c(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>o.form.exam_id=a),class:_([{"is-invalid":r.errors.exam_id},"form-select"])},[e[33]||(e[33]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(o.form.exams,a=>(i(),l("option",{value:a.id},d(a.title)+" [ "+d(f.formatPrice(a.price_after_discount))+" ]",9,Pe))),256))],2),[[u,o.form.exam_id]]),r.errors.exam_id?(i(),l("div",Se,d(r.errors.exam_id),1)):n("",!0)])):n("",!0),o.form.item_type=="1"?(i(),l("div",Ve,[e[36]||(e[36]=t("label",{class:"form-label"},"Tryout",-1)),c(t("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>o.form.exam_group_id=a),class:_([{"is-invalid":r.errors.exam_group_id},"form-select"])},[e[35]||(e[35]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(o.form.examGroups,a=>(i(),l("option",{value:a.id},d(a.title)+" [ "+d(f.formatPrice(a.price_after_discount))+" ]",9,je))),256))],2),[[u,o.form.exam_group_id]]),r.errors.exam_group_id?(i(),l("div",Ce,d(r.errors.exam_group_id),1)):n("",!0)])):n("",!0),o.form.item_type=="3"?(i(),l("div",De,[e[37]||(e[37]=t("label",{class:"form-label"},"Nominal Saldo",-1)),c(t("input",{type:"number",min:"1",class:_(["form-control",{"is-invalid":r.errors.total_payment}]),"onUpdate:modelValue":e[11]||(e[11]=a=>o.form.total_payment=a),placeholder:"Nominal Saldo"},null,2),[[p,o.form.total_payment]]),r.errors.total_payment?(i(),l("div",Ue,d(r.errors.total_payment),1)):n("",!0)])):n("",!0),t("div",we,[e[38]||(e[38]=t("label",{class:"form-label"},"Peserta",-1)),x(D,{class:_({"is-invalid":r.errors.user_id}),modelValue:o.form.user_id,"onUpdate:modelValue":e[12]||(e[12]=a=>o.form.user_id=a),options:r.users,multiple:!1,label:"name","close-on-select":!0,"allow-empty":!1,"track-by":"id",placeholder:"[ Pilih ]"},null,8,["class","modelValue","options"]),r.errors.user_id?(i(),l("div",Me,d(r.errors.user_id),1)):n("",!0)]),t("div",Le,[e[40]||(e[40]=t("label",{class:"form-label"},"Metode Pembayaran",-1)),c(t("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>o.form.payment_method=a),class:_([{"is-invalid":r.errors.payment_method},"form-select"])},[e[39]||(e[39]=t("option",{value:""},"[ Pilih ]",-1)),(i(!0),l(v,null,b(f.filteredPaymentMethods,a=>(i(),l("option",{key:a.code,value:a.code},d(a.name),9,Oe))),128))],2),[[u,o.form.payment_method]]),r.errors.payment_method?(i(),l("div",Ke,d(r.errors.payment_method),1)):n("",!0)]),o.form.payment_method=="account_balance"?(i(),l("div",Ge,[e[42]||(e[42]=t("label",{class:"form-label"},"Potong Saldo Akun",-1)),c(t("select",{"onUpdate:modelValue":e[14]||(e[14]=a=>o.form.reduce_account_balance=a),class:_([{"is-invalid":r.errors.reduce_account_balance},"form-select"])},[...e[41]||(e[41]=[t("option",{value:""},"[ Pilih ]",-1),t("option",{value:"1"},"Ya",-1),t("option",{value:"0"},"Tidak",-1)])],2),[[u,o.form.reduce_account_balance]]),r.errors.reduce_account_balance?(i(),l("div",Ne,d(r.errors.reduce_account_balance),1)):n("",!0)])):n("",!0),o.form.item_type=="2"?(i(),l("div",Be,[e[43]||(e[43]=t("label",{class:"form-label"},"Tanggal Kedaluarsa Membership (Kosongkan untuk otomatis sesuai durasi voucher)",-1)),c(t("input",{type:"date",class:_(["form-control",{"is-invalid":r.errors.expired_date}]),"onUpdate:modelValue":e[15]||(e[15]=a=>o.form.expired_date=a),placeholder:"Tanggal Kedaluarsa Membership"},null,2),[[p,o.form.expired_date]]),r.errors.expired_date?(i(),l("div",Ae,d(r.errors.expired_date),1)):n("",!0)])):n("",!0),t("div",Fe,[e[44]||(e[44]=t("label",{class:"form-label"},"Tanggal Transaksi (Kosongkan untuk otomatis sesuai tanggal dibuatnya transaksi)",-1)),c(t("input",{type:"datetime-local",class:_(["form-control",{"is-invalid":r.errors.created_at}]),"onUpdate:modelValue":e[16]||(e[16]=a=>o.form.created_at=a),placeholder:"Tanggal Transaksi"},null,2),[[p,o.form.created_at]]),r.errors.created_at?(i(),l("div",He,d(r.errors.created_at),1)):n("",!0)]),t("div",Ee,[e[47]||(e[47]=t("label",{class:"form-label"},"Status Transaksi",-1)),c(t("select",{"onUpdate:modelValue":e[17]||(e[17]=a=>o.form.transaction_status=a),class:_([{"is-invalid":r.errors.transaction_status},"form-select"])},[e[45]||(e[45]=t("option",{value:""},"[ Pilih ]",-1)),o.form.payment_method!="account_balance"?(i(),l("option",qe,"Pending - Belum Melakukan Pembayaran")):n("",!0),o.form.payment_method!="account_balance"?(i(),l("option",ze,"Paid - Sudah bayar dan Perlu Approval dari Admin")):n("",!0),o.form.payment_method!="account_balance"?(i(),l("option",Ie,"Failed - Transaksi Gagal")):n("",!0),e[46]||(e[46]=t("option",{value:"done"},"Done - Transaksi Selesai",-1)),o.form.payment_method!="account_balance"?(i(),l("option",Je,"Expired - Transaksi Kadaluarsa")):n("",!0)],2),[[u,o.form.transaction_status]]),r.errors.transaction_status?(i(),l("div",Re,d(r.errors.transaction_status),1)):n("",!0)]),e[48]||(e[48]=t("div",{class:"col-12"},[t("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Buat Transaksi")],-1))],32)])])])])])])],64)}const ta=A(Y,[["render",Ye]]);export{ta as default};
