import{L as d}from"./Layout-7e1b051b.js";import{L as m,H as u,v as e,d as p}from"./app-c0affb98.js";import{S as b}from"./sweetalert2.esm.all-61741a63.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";const y={layout:d,components:{Link:m,Head:u},props:{errors:Object,purchase:Object,type:Object,typeTranslation:Object,urlBack:Object,paymentMethods:Object},setup(a){const t=e.reactive({payment_method:"",price:""});return{form:t,submit:()=>{b.fire({title:"Selamat",text:"Selangkah lagi pembelianmu berhasil",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Lanjutkan",cancelButtonText:"Batalkan"}).then(s=>{s.isConfirmed&&p.Inertia.post(`/user/transactions/${a.type}/${a.purchase.id}/buy`,{payment_method:t.payment_method,price:a.purchase.price_after_discount})})}}},methods:{formatPrice(a){return"Rp."+(a/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(a=>!(this.type==="topupBalance"&&a.code==="account_balance"))}}},h={class:"page-wrapper"},E={class:"page-content"},f={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},N={class:"breadcrumb-title pe-3"},V={class:"ps-3"},v={"aria-label":"breadcrumb"},k={class:"breadcrumb mb-0 p-0"},g={class:"breadcrumb-item active","aria-current":"page"},B={class:"row"},S={class:"col-lg-12"},w={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},x=["innerHTML"],C={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},D=["innerHTML"],T={key:2,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},L={class:"mt-3"},M={class:"col-lg-12"},P={class:"card border-top border-0 border-3 border-primary"},j={class:"card-header"},H={class:"d-lg-flex align-items-center"},O={class:"ms-auto"},F={class:"card-body p-4"},A={key:0,class:"row mb-3"},K={class:"col-sm-9"},U=["value"],z={class:"row mb-3"},I={class:"col-sm-3 col-form-label"},R={class:"col-sm-9"},q=["value"],G={key:1,class:"row mb-3"},J={class:"col-sm-9"},Q=["value"],W={class:"row mb-3"},X={class:"col-sm-3 col-form-label"},Y={class:"col-sm-9"},Z=["value"],$={key:2,class:"row mb-3"},ee={class:"col-sm-9"},te={key:0},oe={class:"badge bg-success ms-1"},le={key:1},ae={class:"row mb-3"},se={class:"col-sm-9"},ne=["value"],re={key:0,class:"invalid-feedback"},ce={key:3,class:"row mb-3"},ie={class:"col-sm-9"},de={class:"alert border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2 alert-success"};function me(a,t,o,s,ue,n){const r=e.resolveComponent("Head"),c=e.resolveComponent("Link");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(r,null,{default:e.withCtx(()=>[e.createElementVNode("title",null,e.toDisplayString(a.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Pembelian "+e.toDisplayString(o.typeTranslation),1)]),_:1}),e.createElementVNode("div",h,[e.createElementVNode("div",E,[e.createElementVNode("div",f,[e.createElementVNode("div",N,e.toDisplayString(o.typeTranslation),1),e.createElementVNode("div",V,[e.createElementVNode("nav",v,[e.createElementVNode("ol",k,[t[2]||(t[2]=e.createElementVNode("li",{class:"breadcrumb-item"},[e.createElementVNode("a",{href:"javascript:;"},[e.createElementVNode("i",{class:"bx bx-home-alt"})])],-1)),e.createElementVNode("li",g,"Pembelian "+e.toDisplayString(o.typeTranslation),1)])])])]),e.createElementVNode("div",B,[e.createElementVNode("div",S,[a.$page.props.session.error?(e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("div",{innerHTML:a.$page.props.session.error},null,8,x)])):e.createCommentVNode("",!0),a.$page.props.session.success?(e.openBlock(),e.createElementBlock("div",C,[e.createElementVNode("div",{innerHTML:a.$page.props.session.success},null,8,D)])):e.createCommentVNode("",!0),Object.keys(o.errors).length>0?(e.openBlock(),e.createElementBlock("div",T,[t[3]||(t[3]=e.createElementVNode("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),e.createElementVNode("ul",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.errors,l=>(e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(l),1))),256))])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",M,[e.createElementVNode("form",{onSubmit:t[1]||(t[1]=e.withModifiers((...l)=>s.submit&&s.submit(...l),["prevent"]))},[e.createElementVNode("div",P,[e.createElementVNode("div",j,[e.createElementVNode("div",H,[e.createElementVNode("h6",null,"Detail Pembelian "+e.toDisplayString(o.typeTranslation),1),e.createElementVNode("div",O,[e.createVNode(c,{href:o.urlBack,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:e.withCtx(()=>[...t[4]||(t[4]=[e.createTextVNode("Kembali",-1)])]),_:1},8,["href"])])])]),e.createElementVNode("div",F,[o.type!="topupBalance"?(e.openBlock(),e.createElementBlock("div",A,[t[5]||(t[5]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Kategori",-1)),e.createElementVNode("div",K,[e.createElementVNode("input",{type:"text",class:"form-control",value:o.purchase.category.name,disabled:""},null,8,U)])])):e.createCommentVNode("",!0),e.createElementVNode("div",z,[e.createElementVNode("label",I,e.toDisplayString(o.type=="topupBalance"?"Deskripsi Pembelian":"Pembelian "+o.typeTranslation),1),e.createElementVNode("div",R,[e.createElementVNode("input",{type:"text",class:"form-control",value:o.purchase.title,disabled:"",style:{"background-color":"#fff"}},null,8,q)])]),o.type=="voucher"?(e.openBlock(),e.createElementBlock("div",G,[t[6]||(t[6]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Masa Aktif",-1)),e.createElementVNode("div",J,[e.createElementVNode("input",{type:"text",class:"form-control",value:o.purchase.active_period+(o.purchase.period_type=="day"?" Hari":" Bulan"),disabled:"",style:{"background-color":"#fff"}},null,8,Q)])])):e.createCommentVNode("",!0),e.createElementVNode("div",W,[e.createElementVNode("label",X,e.toDisplayString(o.type=="topupBalance"?"Nominal":"Harga")+" "+e.toDisplayString(o.typeTranslation),1),e.createElementVNode("div",Y,[e.createElementVNode("input",{type:"text",class:"form-control",value:n.formatPrice(o.purchase.price_after_discount),disabled:"",style:{"background-color":"#fff"}},null,8,Z)])]),o.type!="topupBalance"?(e.openBlock(),e.createElementBlock("div",$,[t[8]||(t[8]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1)),e.createElementVNode("div",ee,[o.purchase.member_categories.length?(e.openBlock(),e.createElementBlock("div",te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.purchase.member_categories,(l,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,style:{display:"inline"}},[e.createElementVNode("span",oe,e.toDisplayString(l.name),1)]))),128))])):(e.openBlock(),e.createElementBlock("div",le,[...t[7]||(t[7]=[e.createElementVNode("span",{class:"badge bg-success ms-1"},"Akses Untuk Seluruh Tipe Member",-1)])]))])])):e.createCommentVNode("",!0),e.createElementVNode("div",ae,[t[10]||(t[10]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),e.createElementVNode("div",se,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s.form.payment_method=l),class:e.normalizeClass([{"is-invalid":o.errors.payment_method},"form-select"])},[t[9]||(t[9]=e.createElementVNode("option",{value:""},"[ Pilih Metode Pembayaran ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.filteredPaymentMethods,l=>(e.openBlock(),e.createElementBlock("option",{key:l.code,value:l.code},e.toDisplayString(l.name),9,ne))),128))],2),[[e.vModelSelect,s.form.payment_method]]),o.errors.payment_method?(e.openBlock(),e.createElementBlock("div",re,e.toDisplayString(o.errors.payment_method),1)):e.createCommentVNode("",!0)])]),o.paymentMethods.find(l=>l.code===s.form.payment_method)&&o.paymentMethods.find(l=>l.code===s.form.payment_method).show_description==1?(e.openBlock(),e.createElementBlock("div",ce,[t[11]||(t[11]=e.createElementVNode("label",{class:"col-sm-3 col-form-label"},null,-1)),e.createElementVNode("div",ie,[e.createElementVNode("div",de,e.toDisplayString(o.paymentMethods.find(l=>l.code===s.form.payment_method).description),1)])])):e.createCommentVNode("",!0),t[12]||(t[12]=e.createElementVNode("div",{class:"row"},[e.createElementVNode("label",{class:"col-sm-3 col-form-label"}),e.createElementVNode("div",{class:"col-sm-9"},[e.createElementVNode("div",{class:"d-md-flex d-grid align-items-center gap-3"},[e.createElementVNode("button",{class:"btn btn-primary btn-sm px-4",onclick:"buy()"},"Lanjutkan ke pembayaran")])])],-1))])])],32)])])])])],64)}const he=_(y,[["render",me]]);export{he as default};
