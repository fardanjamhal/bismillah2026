import{L as w}from"./Layout.832db21f.js";import{m as y,L as M,H as L,p as O,c as i,a as g,w as p,b as a,t as d,f as n,F as v,g as b,d as K,e as m,q as u,n as _,v as k,h as G,i as S,j as x,o as r,k as N}from"./app.ec49e899.js";import{M as B}from"./vue3-multiselect.umd.min.8cb8e804.js";import{a as h}from"./index.2dcb7b4d.js";/* empty css                                                                  */import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";var F=typeof y=="object"&&y&&y.Object===Object&&y,H=F,q=H,E=typeof self=="object"&&self&&self.Object===Object&&self,z=q||E||Function("return this")(),I=z,J=I,R=J.Symbol,V=R,T=V;T&&T.toStringTag;var P=V;P&&P.toStringTag;const Y={layout:w,components:{Link:M,Head:L,Multiselect:B},props:{errors:Object,categories:Object,memberCategories:Object,users:Object},methods:{formatPrice(o){return"Rp."+(o/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(o=>!(this.form.item_type==3&&o.code==="account_balance"))}},setup(){const o=O({item_type:"",category_id:"",voucher_id:"",lesson_category_id:"",lesson_id:"",exam_id:"",exam_group_id:"",user_id:"",expired_date:"",total_payment:"",payment_method:"",reduce_account_balance:"",transaction_status:"",created_at:"",lessonCategories:[],lessons:[],exams:[],examGroups:[],users:[],vouchers:[]});return{form:o,submit:()=>{G.Inertia.post("/admin/transactions",{item_type:o.item_type,category_id:o.category_id,voucher_id:o.voucher_id,lesson_category_id:o.lesson_category_id,lesson_id:o.lesson_id,exam_id:o.exam_id,exam_group_id:o.exam_group_id,user_id:o.user_id,expired_date:o.expired_date,total_payment:o.total_payment,created_at:o.created_at,payment_method:o.payment_method,reduce_account_balance:o.reduce_account_balance,transaction_status:o.transaction_status})},lessonCategoryData:()=>{o.lesson_category_id="",o.lesson_id="",o.exam_id="",o.exam_group_id="",h.get(`/admin/categories/${o.category_id}/vouchers`).then(c=>{o.vouchers=c.data}).catch(c=>console.error(c)),h.get(`/admin/categories/${o.category_id}/lesson-categories`).then(c=>{o.lessonCategories=c.data}).catch(c=>console.error(c))},lessonData:()=>{o.lesson_id="",o.exam_id="",h.get(`/admin/lesson-categories/${o.lesson_category_id}/exam-groups`).then(c=>{o.examGroups=c.data}).catch(c=>console.error(c)),h.get(`/admin/lesson-categories/${o.lesson_category_id}/lessons`).then(c=>{o.lessons=c.data}).catch(c=>console.error(c))},examData:()=>{o.exam_id="",h.get(`/admin/lessons/${o.lesson_id}/exams`).then(c=>{o.exams=c.data}).catch(c=>console.error(c))},changeTransactionType:()=>{o.category_id="",o.voucher_id="",o.lesson_category_id="",o.lesson_id="",o.exam_id="",o.exam_group_id="",o.user_id="",o.expired_date="",o.total_payment="",o.payment_method="",o.created_at="",o.reduce_account_balance="",o.transaction_status=""}}}},Q={class:"page-wrapper"},W={class:"page-content"},X=S('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Transaksi</li></ol></nav></div></div>',1),Z={key:0,class:"alert alert-danger border-0 bg-danger alert-dismissible fade show py-2"},$={class:"d-flex align-items-center"},ee=a("div",{class:"font-35 text-white"},[a("i",{class:"bx bxs-message-square-x"})],-1),ae={class:"ms-3"},te=a("h6",{class:"mb-0 text-white"},"Gagal",-1),oe={class:"text-white"},se={class:"row"},ie={class:"col-lg-12 col-md-12"},re={class:"card border-top border-0 border-3 border-primary"},le={class:"card-body"},ne={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},de=a("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1),ce={class:"mt-3"},_e={class:"d-lg-flex align-items-center"},me={class:"ms-auto"},ue=N("Kembali"),ve={class:"col-12"},be=a("label",{class:"form-label"},"Jenis Transaksi",-1),fe=S('<option value="">[ Pilih ]</option><option value="0">Pembelian Latihan Soal</option><option value="1">Pembelian Tryout</option><option value="2">Pembelian Membership</option><option value="3">Top Up Saldo</option>',5),he=[fe],ye={key:0,class:"invalid-feedback"},ge={key:0,class:"col-12"},ke=a("label",{class:"form-label"},"Kategori Peminatan",-1),xe=a("option",{value:""},"[ Pilih ]",-1),pe=["value"],Te={key:0,class:"invalid-feedback"},Pe={key:1,class:"col-12"},Se=a("label",{class:"form-label"},"Voucher Membership",-1),Ve=a("option",{value:""},"[ Pilih ]",-1),je=["value"],Ce={key:0,class:"invalid-feedback"},De={key:2,class:"col-12"},Ue=a("label",{class:"form-label"},"Kategori Mata Pelajaran",-1),we=a("option",{value:""},"[ Pilih ]",-1),Me=["value"],Le={key:0,class:"invalid-feedback"},Oe={key:3,class:"col-12"},Ke=a("label",{class:"form-label"},"Mata Pelajaran",-1),Ge=a("option",{value:""},"[ Pilih ]",-1),Ne=["value"],Be={key:0,class:"invalid-feedback"},Ae={key:4,class:"col-12"},Fe=a("label",{class:"form-label"},"Latihan Soal",-1),He=a("option",{value:""},"[ Pilih ]",-1),qe=["value"],Ee={key:0,class:"invalid-feedback"},ze={key:5,class:"col-12"},Ie=a("label",{class:"form-label"},"Tryout",-1),Je=a("option",{value:""},"[ Pilih ]",-1),Re=["value"],Ye={key:0,class:"invalid-feedback"},Qe={key:6,class:"col-12"},We=a("label",{class:"form-label"},"Nominal Saldo",-1),Xe={key:0,class:"invalid-feedback"},Ze={class:"col-12"},$e=a("label",{class:"form-label"},"Peserta",-1),ea={key:0,class:"invalid-feedback"},aa={class:"col-12"},ta=a("label",{class:"form-label"},"Metode Pembayaran",-1),oa=a("option",{value:""},"[ Pilih ]",-1),sa=["value"],ia={key:0,class:"invalid-feedback"},ra={key:7,class:"col-12"},la=a("label",{class:"form-label"},"Potong Saldo Akun",-1),na=a("option",{value:""},"[ Pilih ]",-1),da=a("option",{value:"1"},"Ya",-1),ca=a("option",{value:"0"},"Tidak",-1),_a=[na,da,ca],ma={key:0,class:"invalid-feedback"},ua={key:8,class:"col-12"},va=a("label",{class:"form-label"},"Tanggal Kedaluarsa Membership (Kosongkan untuk otomatis sesuai durasi voucher)",-1),ba={key:0,class:"invalid-feedback"},fa={class:"col-12"},ha=a("label",{class:"form-label"},"Tanggal Transaksi (Kosongkan untuk otomatis sesuai tanggal dibuatnya transaksi)",-1),ya={key:0,class:"invalid-feedback"},ga={class:"col-12"},ka=a("label",{class:"form-label"},"Status Transaksi",-1),xa=a("option",{value:""},"[ Pilih ]",-1),pa={key:0,value:"pending"},Ta={key:1,value:"paid"},Pa={key:2,value:"failed"},Sa=a("option",{value:"done"},"Done - Transaksi Selesai",-1),Va={key:3,value:"expired"},ja={key:0,class:"invalid-feedback"},Ca=a("div",{class:"col-12"},[a("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Buat Transaksi")],-1);function Da(o,l,s,t,j,f){const c=x("Head"),C=x("Link"),D=x("multiselect");return r(),i(v,null,[g(c,null,{default:p(()=>{var e;return[a("title",null,d((e=o.$page.props.setting.app_name)!=null?e:"Atur Setting Terlebih Dahulu")+" - Tambah Transaksi",1)]}),_:1}),a("div",Q,[a("div",W,[X,o.$page.props.session.error?(r(),i("div",Z,[a("div",$,[ee,a("div",ae,[te,a("div",oe,d(o.$page.props.session.error),1)])])])):n("",!0),a("div",se,[a("div",ie,[a("div",re,[a("div",le,[Object.keys(s.errors).length>0?(r(),i("div",ne,[de,a("ul",ce,[(r(!0),i(v,null,b(s.errors,e=>(r(),i("li",null,d(e),1))),256))])])):n("",!0),a("div",_e,[a("div",me,[g(C,{href:"/admin/exams",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:p(()=>[ue]),_:1})])]),a("form",{onSubmit:l[18]||(l[18]=K((...e)=>t.submit&&t.submit(...e),["prevent"])),class:"row g-3"},[a("div",ve,[be,m(a("select",{onChange:l[0]||(l[0]=(...e)=>t.changeTransactionType&&t.changeTransactionType(...e)),"onUpdate:modelValue":l[1]||(l[1]=e=>t.form.item_type=e),class:_([{"is-invalid":s.errors.item_type},"form-select"])},he,34),[[u,t.form.item_type]]),s.errors.item_type?(r(),i("div",ye,d(s.errors.item_type),1)):n("",!0)]),t.form.item_type&&t.form.item_type!="3"?(r(),i("div",ge,[ke,m(a("select",{onChange:l[2]||(l[2]=(...e)=>t.lessonCategoryData&&t.lessonCategoryData(...e)),"onUpdate:modelValue":l[3]||(l[3]=e=>t.form.category_id=e),class:_([{"is-invalid":s.errors.category_id},"form-select"])},[xe,(r(!0),i(v,null,b(s.categories,(e,U)=>(r(),i("option",{key:U,value:e.id},d(e.name),9,pe))),128))],34),[[u,t.form.category_id]]),s.errors.category_id?(r(),i("div",Te,d(s.errors.category_id),1)):n("",!0)])):n("",!0),t.form.item_type=="2"?(r(),i("div",Pe,[Se,m(a("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>t.form.voucher_id=e),class:_([{"is-invalid":s.errors.voucher_id},"form-select"])},[Ve,(r(!0),i(v,null,b(t.form.vouchers,e=>(r(),i("option",{value:e.id},d(e.title)+" [ "+d(f.formatPrice(e.price_after_discount))+" ]",9,je))),256))],2),[[u,t.form.voucher_id]]),s.errors.voucher_id?(r(),i("div",Ce,d(s.errors.voucher_id),1)):n("",!0)])):n("",!0),t.form.item_type=="0"||t.form.item_type=="1"?(r(),i("div",De,[Ue,m(a("select",{onChange:l[5]||(l[5]=(...e)=>t.lessonData&&t.lessonData(...e)),"onUpdate:modelValue":l[6]||(l[6]=e=>t.form.lesson_category_id=e),class:_([{"is-invalid":s.errors.lesson_category_id},"form-select"])},[we,(r(!0),i(v,null,b(t.form.lessonCategories,e=>(r(),i("option",{value:e.id},d(e.name),9,Me))),256))],34),[[u,t.form.lesson_category_id]]),s.errors.lesson_category_id?(r(),i("div",Le,d(s.errors.lesson_category_id),1)):n("",!0)])):n("",!0),t.form.item_type=="0"?(r(),i("div",Oe,[Ke,m(a("select",{onChange:l[7]||(l[7]=(...e)=>t.examData&&t.examData(...e)),"onUpdate:modelValue":l[8]||(l[8]=e=>t.form.lesson_id=e),class:_([{"is-invalid":s.errors.lesson_id},"form-select"])},[Ge,(r(!0),i(v,null,b(t.form.lessons,e=>(r(),i("option",{value:e.id},d(e.name),9,Ne))),256))],34),[[u,t.form.lesson_id]]),s.errors.lesson_id?(r(),i("div",Be,d(s.errors.lesson_id),1)):n("",!0)])):n("",!0),t.form.item_type=="0"?(r(),i("div",Ae,[Fe,m(a("select",{"onUpdate:modelValue":l[9]||(l[9]=e=>t.form.exam_id=e),class:_([{"is-invalid":s.errors.exam_id},"form-select"])},[He,(r(!0),i(v,null,b(t.form.exams,e=>(r(),i("option",{value:e.id},d(e.title)+" [ "+d(f.formatPrice(e.price_after_discount))+" ]",9,qe))),256))],2),[[u,t.form.exam_id]]),s.errors.exam_id?(r(),i("div",Ee,d(s.errors.exam_id),1)):n("",!0)])):n("",!0),t.form.item_type=="1"?(r(),i("div",ze,[Ie,m(a("select",{"onUpdate:modelValue":l[10]||(l[10]=e=>t.form.exam_group_id=e),class:_([{"is-invalid":s.errors.exam_group_id},"form-select"])},[Je,(r(!0),i(v,null,b(t.form.examGroups,e=>(r(),i("option",{value:e.id},d(e.title)+" [ "+d(f.formatPrice(e.price_after_discount))+" ]",9,Re))),256))],2),[[u,t.form.exam_group_id]]),s.errors.exam_group_id?(r(),i("div",Ye,d(s.errors.exam_group_id),1)):n("",!0)])):n("",!0),t.form.item_type=="3"?(r(),i("div",Qe,[We,m(a("input",{type:"number",min:"1",class:_(["form-control",{"is-invalid":s.errors.total_payment}]),"onUpdate:modelValue":l[11]||(l[11]=e=>t.form.total_payment=e),placeholder:"Nominal Saldo"},null,2),[[k,t.form.total_payment]]),s.errors.total_payment?(r(),i("div",Xe,d(s.errors.total_payment),1)):n("",!0)])):n("",!0),a("div",Ze,[$e,g(D,{class:_({"is-invalid":s.errors.user_id}),modelValue:t.form.user_id,"onUpdate:modelValue":l[12]||(l[12]=e=>t.form.user_id=e),options:s.users,multiple:!1,label:"name","close-on-select":!0,"allow-empty":!1,"track-by":"id",placeholder:"[ Pilih ]"},null,8,["class","modelValue","options"]),s.errors.user_id?(r(),i("div",ea,d(s.errors.user_id),1)):n("",!0)]),a("div",aa,[ta,m(a("select",{"onUpdate:modelValue":l[13]||(l[13]=e=>t.form.payment_method=e),class:_([{"is-invalid":s.errors.payment_method},"form-select"])},[oa,(r(!0),i(v,null,b(f.filteredPaymentMethods,e=>(r(),i("option",{key:e.code,value:e.code},d(e.name),9,sa))),128))],2),[[u,t.form.payment_method]]),s.errors.payment_method?(r(),i("div",ia,d(s.errors.payment_method),1)):n("",!0)]),t.form.payment_method=="account_balance"?(r(),i("div",ra,[la,m(a("select",{"onUpdate:modelValue":l[14]||(l[14]=e=>t.form.reduce_account_balance=e),class:_([{"is-invalid":s.errors.reduce_account_balance},"form-select"])},_a,2),[[u,t.form.reduce_account_balance]]),s.errors.reduce_account_balance?(r(),i("div",ma,d(s.errors.reduce_account_balance),1)):n("",!0)])):n("",!0),t.form.item_type=="2"?(r(),i("div",ua,[va,m(a("input",{type:"date",class:_(["form-control",{"is-invalid":s.errors.expired_date}]),"onUpdate:modelValue":l[15]||(l[15]=e=>t.form.expired_date=e),placeholder:"Tanggal Kedaluarsa Membership"},null,2),[[k,t.form.expired_date]]),s.errors.expired_date?(r(),i("div",ba,d(s.errors.expired_date),1)):n("",!0)])):n("",!0),a("div",fa,[ha,m(a("input",{type:"datetime-local",class:_(["form-control",{"is-invalid":s.errors.created_at}]),"onUpdate:modelValue":l[16]||(l[16]=e=>t.form.created_at=e),placeholder:"Tanggal Transaksi"},null,2),[[k,t.form.created_at]]),s.errors.created_at?(r(),i("div",ya,d(s.errors.created_at),1)):n("",!0)]),a("div",ga,[ka,m(a("select",{"onUpdate:modelValue":l[17]||(l[17]=e=>t.form.transaction_status=e),class:_([{"is-invalid":s.errors.transaction_status},"form-select"])},[xa,t.form.payment_method!="account_balance"?(r(),i("option",pa,"Pending - Belum Melakukan Pembayaran")):n("",!0),t.form.payment_method!="account_balance"?(r(),i("option",Ta,"Paid - Sudah bayar dan Perlu Approval dari Admin")):n("",!0),t.form.payment_method!="account_balance"?(r(),i("option",Pa,"Failed - Transaksi Gagal")):n("",!0),Sa,t.form.payment_method!="account_balance"?(r(),i("option",Va,"Expired - Transaksi Kadaluarsa")):n("",!0)],2),[[u,t.form.transaction_status]]),s.errors.transaction_status?(r(),i("div",ja,d(s.errors.transaction_status),1)):n("",!0)]),Ca],32)])])])])])])],64)}const Ga=A(Y,[["render",Da]]);export{Ga as default};
