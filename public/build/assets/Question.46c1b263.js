import{L as G,i as X}from"./vue-countdown.esm.92f3a42e.js";import{p as Z,e as D,t as J}from"./index.es.26750386.js";import{a as q}from"./index.a3245ad3.js";import{H as p,L as ee,r as y,c as a,a as A,w as B,b as n,n as w,t as h,f as u,F as v,g as I,h as O,j as Q,o as i,k as C}from"./app.3d780cf9.js";import{S as _}from"./sweetalert2.all.31f9910d.js";import{_ as te}from"./_plugin-vue_export-helper.cdc0426e.js";const ne={layout:G,components:{Head:p,Link:ee,VueCountdown:X,MathJax:Z},props:{id:String,page:Number,exam:Object,duration:Object,questionLists:Object,section:Number,lastSection:Number,grade:Object,setting:Object,indexPage:Object},mounted(){let s=document.createElement("script");s.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(s);function l(){const t=document.getElementById("elementId");J(t)}D({},l)},setup(s){var l,t=s.exam.id!=localStorage.getItem("examId")||s.grade.user_id!=localStorage.getItem("userId")||localStorage.getItem("indexPage")===null?0:parseInt(localStorage.getItem("indexPage"));l=y(t),localStorage.getItem("indexPage")===null&&localStorage.setItem("indexPage",0);let e=["A","B","C","D","E"];(s.exam.id!=localStorage.getItem("examId")||s.grade.user_id!=localStorage.getItem("userId"))&&(localStorage.setItem("examId",s.exam.id),localStorage.setItem("userId",s.grade.user_id),localStorage.setItem("myAnswers",[]),localStorage.setItem("indexPage",0));const L=localStorage.getItem("myAnswers");let m=L?JSON.parse(L):[];localStorage.setItem("myAnswers",JSON.stringify(m)),localStorage.setItem("examId",s.exam.id);const S=y(0),x=y(s.duration),o=y(0),r=()=>{x.value=x.value-1e3,S.value=S.value+1},k=()=>{o.value=o.value-1e3},E=()=>{let d=document.createElement("script");d.setAttribute("src","https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"),document.head.appendChild(d);function c(){const g=document.getElementById("elementId");J(g)}D({},c)},U=()=>{E(),l.value=parseInt(l.value)-1},N=()=>{E(),l.value=parseInt(l.value)+1},K=d=>{E(),l.value=d},H=()=>{if(s.setting.block_system_type==1){if(s.grade.is_blocked!=1&&s.exam.total_tolerance){let d=parseInt(s.grade.total_tolerance)>0?parseInt(s.grade.total_tolerance)-1:0,c=d==0?"Tolerasi habis, ":"Toleransi Tersisa "+d+" kali lagi, ";_.fire({title:"UJIAN AKAN DI DIBLOKIR JIKA ANDA MENINGGALKAN SESI UJIAN",text:c+" jika toleransi habis anda tidak dapat melanjutkan ujian dan harus menghubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&O.Inertia.post(`/user/exam-groups/${s.exam.id}/decrement-tolerance`,{grade_id:s.grade.id},{onSuccess:()=>{d==0&&location.reload()}})})}}else s.setting.block_system_type==2&&_.fire({title:"Peringatan",text:"Hindari Membuka Tab atau Aplikasi Lain Selama Ujian. Fokuslah Pada Pertanyaan Selama Ujian Berlangsung.",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",cancelButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1})},V=d=>{const c=m.find(g=>g.question_id===d);return c?c.answer:[]};let R=0;const z=(d,c)=>{const g=Number(c),b=m.findIndex(f=>f.question_id===d),T=s.questionLists[l.value].total_answer_limit;if(b!==-1)if(Array.isArray(m[b].answer))if(T===1)m[b].answer=[g];else if(m[b].answer.includes(g))m[b].answer=m[b].answer.filter(f=>f!==g);else if(m[b].answer.length<T)m[b].answer.push(g),m[b].answer.sort((f,P)=>f-P);else return _.fire({title:"Informasi",text:"Tidak dapat mengirim jawaban karena sudah mencapai batas. Silakan klik jawaban yang sudah ada untuk menghapusnya dan menggantinya dengan jawaban lain.",icon:"info",showCancelButton:!1,confirmButtonText:"Mengerti",allowOutsideClick:!1}),!1;else m[b].answer=[g];else m.push({question_id:d,answer:[g]});try{R%20===0&&j(),localStorage.setItem("myAnswers",JSON.stringify(m)),R++,l.value<Object.keys(s.questionLists).length-1&&s.exam.next_question_automatically==1&&T==(m[b]?m[b].answer.length:1)&&N(),localStorage.setItem("indexPage",l.value),l.value==Object.keys(s.questionLists).length-1&&s.exam.button_type_finish==3&&_.fire({title:"Informasi",text:"Anda sudah mengerjakan sampai soal terakhir, silakan akhiri, lanjut kebagian berikutnya atau tunggu waktu ujian hingga selesai.",icon:"info",showCancelButton:!1,confirmButtonText:"Mengerti",allowOutsideClick:!1})}catch(f){_.fire({title:"Error",text:"Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan."+f,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(P=>{P.isConfirmed&&location.reload()})}},W=y(!1),F=y(!1),j=()=>{q.get("/check-connection").then(d=>{console.log("ada")}).catch(d=>{_.fire({title:"Error",text:`Submit Jawaban Error, silakan lakukan refresh dan pastikan perangkat terhubungan dengan jaringan.
`+d,icon:"error",showCancelButton:!1,confirmButtonText:"Refresh",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()})})},M=(d="")=>{j(),s.section==s.lastSection||d=="block"?O.Inertia.post(`/user/exam-groups/${s.exam.id}/exam-end`,{exam_id:s.exam.id,grade_id:s.grade.id,myAnswers:m},{onSuccess:()=>{d=="block"?_.fire({title:"UJIAN DIBLOKIR KARENA SUDAH MELEWATI BATAS TOLERANSI.",text:"Anda tidak dapat melanjutkan ujian, silakan hubungi admin",icon:"warning",showCancelButton:!1,confirmButtonColor:"#d33",confirmButtonText:"Mengerti",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}):(_.fire({title:"Success..",text:"Ujian Anda Selesai, Semoga Mendapatkan Nilai Terbaik.",icon:"success",showCancelButton:!1,confirmButtonText:"Tutup",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&location.reload()}),localStorage.setItem("indexPage",0))}}):($("#questionExam").hide(),localStorage.setItem("indexPage",0),O.Inertia.get(`/user/exam-groups/${s.exam.id}/grades/${s.grade.id}/sections/${s.section+1}?nextsection=1`),_.fire({title:"Success!",text:"Lanjut Ke Kolom Berikutnya.",icon:"success",showConfirmButton:!1,timer:1e3}))},Y=()=>{s.section==s.lastSection?_.fire({title:"Waktu Habis",text:"Waktu Tryout sudah berakhir! Klik Selesai untuk mengakhiri Tryout",icon:"warning",showCancelButton:!1,confirmButtonText:"Selesai",allowOutsideClick:!1}).then(d=>{d.isConfirmed&&M()}):M()};return s.setting.block_system_type!=0&&window.addEventListener("blur",H),s.grade.is_blocked==1&&_.fire({title:"Ujian di Blokir",text:"Masukan Kode Untuk Membuka Blokir",input:"password",icon:"error",inputAttributes:{autocapitalize:"off"},showCancelButton:!1,allowOutsideClick:!1,confirmButtonText:"Buka Blokir",showLoaderOnConfirm:!0,preConfirm:d=>{q.get(`/user/exam-groups/${s.exam.id}/grades/${s.grade.id}/unblocked`,{params:{token:d}}).then(c=>{c.data.success==!0?_.fire({title:"Blokir Berhasil Dibuka",text:"Silakan Lanjut Mengerjakan Soal.",icon:"success",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&location.reload()}):_.fire({title:"Gagal",text:c.data.message,icon:"error",showCancelButton:!1,confirmButtonText:"Ulangi",allowOutsideClick:!1}).then(g=>{g.isConfirmed&&location.reload()})}).catch(c=>{console.error("Request failed:",c),_.showValidationMessage(`Request failed: ${c}`)})}}),{indexPage:l,options:e,duration:x,durationStartExam:o,handleChangeDuration:r,handleChangeDurationStartExam:k,prevPage:U,nextPage:N,clickQuestion:K,submitAnswer:z,getMyAnswer:V,showModalEndExam:W,showModalEndTimeExam:F,endExam:M,confirm:H,checkConnection:j,loadMath:E,showQuestionExam:()=>{q.get(`/user/exam-groups/${s.exam.id}/grades/${s.grade.id}/finished`).then(d=>{d.data.success==!0&&(d.data.is_finished==!0?($("#questionExam").hide(),$("#timeRemainingQuestion").hide(),_.fire({title:"Ujian Sudah Selesai",text:"Anda tidak dapat kembali ke sesi ujian karena sudah selesai.",icon:"error",showCancelButton:!1,confirmButtonText:"Oke",allowOutsideClick:!1}).then(c=>{c.isConfirmed&&(localStorage.setItem("indexPage",0),location.reload())})):($("#questionExam").show(),$("#timeRemainingQuestion").hide()))}).catch(d=>{console.error("Request failed:",d),_.showValidationMessage(`Request failed: ${d}`)})},handeCountdownEnd:Y}},methods:{transform(s){return Object.entries(s).forEach(([l,t])=>{const e=t<10?`0${t}`:t;s[l]=`${e}`}),s}}},ae={style:{background:"#fff",display:"none","justify-content":"center","align-items":"center",height:"100vh"},id:"timeRemainingQuestion"},ie={class:"mb-0 text-center"},oe={style:{"font-size":"6vw"}},se={style:{"font-size":"6vw"}},le={class:"container",style:{"margin-top":"6vh","margin-bottom":"100px",display:"none"},id:"questionExam"},de={class:"row"},re={class:"card"},ce={class:"card-header bg-primary mb-3"},ue={class:"d-flex justify-content-between"},me={class:"text-start"},he={key:0},ge={class:"text-end"},_e=n("i",{class:"fadeIn animated bx bx-time-five"},null,-1),ke={key:0},be=n("i",{class:"bx bx-"},null,-1),xe={key:1},fe=n("i",{class:"bx bx-"},null,-1),ye={class:"card-body"},we={key:0},ve=["innerHTML"],Ce={key:0},Se={width:"50",style:{padding:"10px"}},Ee=["onClick"],Ae=["onClick"],Be={style:{padding:"10px"}},Ie=["innerHTML"],Le={key:1},je={width:"30"},Me=["innerHTML"],Te={key:1},Pe=n("div",{class:"alert alert-danger border-0 shadow"},[n("i",{class:"fa fa-exclamation-triangle"}),C(" Question Not Found!. ")],-1),qe=[Pe],Oe={key:0,class:"mt-3 mb-3 m-3"},Ne=["onClick"],He=["onClick"],Re={class:"card-footer",style:{"min-height":"60px"}},De={class:"d-flex justify-content-between"},Je={class:"text-start"},Qe={key:0},Ue={key:0,class:"text-center"},Ke={key:0},Ve={key:1},ze={class:"card"},We=n("div",{class:"card-header text-white bg-primary"},[n("div",{class:"d-flex justify-content-between"},[n("div",null,[n("h5",{class:"mb-0 text-white"},"Navigasi Soal")])])],-1),Fe={class:"card-body",style:{height:"480px","overflow-y":"auto"}},Ye={style:{width:"20%",float:"left"}},Ge={style:{padding:"2px"}},Xe=["onClick"],Ze={style:{"font-size":"11px","font-weight":"500"}},$e=["onClick"],pe={style:{"font-size":"11px","font-weight":"500"}},et=["onClick"],tt={style:{"font-size":"11px","font-weight":"500"}},nt={class:"card-footer",style:{"min-height":"60px"}},at={key:0},it={key:1},ot={class:"modal-dialog"},st={class:"modal-content"},lt=n("div",{class:"modal-header"},[n("h5",{class:"modal-title"},"Akhiri Tryout ?")],-1),dt=n("div",{class:"modal-body"}," Setelah mengakhiri Tryout, Anda tidak dapat kembali ke Tryout ini lagi. Yakin akan mengakhiri Tryout? ",-1),rt={class:"modal-footer"},ct={class:"modal-dialog"},ut={class:"modal-content"},mt={class:"modal-header"},ht={key:0,class:"modal-title"},gt={key:1,class:"modal-title"},_t={class:"modal-body"},kt={key:0},bt=C("Waktu Tryout sudah berakhir!. Klik "),xt=n("strong",{class:"fw-bold"},"Ya",-1),ft=C(" untuk mengakhiri Tryout."),yt=[bt,xt,ft],wt={key:1},vt={class:"text-center"},Ct={class:"mb-0 text-white"},St={class:"badge bg-danger"},Et={key:0,class:"modal-footer"};function At(s,l,t,e,L,m){const S=Q("Head"),x=Q("VueCountdown");return i(),a(v,null,[A(S,null,{default:B(()=>{var o;return[n("title",null,h((o=s.$page.props.setting.app_name)!=null?o:"Atur Setting Terlebih Dahulu")+" - Tryout",1)]}),_:1}),n("div",ae,[A(x,{time:e.durationStartExam,onProgress:e.handleChangeDurationStartExam,onEnd:e.showQuestionExam},{default:B(({seconds:o})=>[n("h2",ie,[n("p",null,[n("span",oe,h(t.lastSection>1?"Persiapan Kolom "+t.section:"Ujian dimulai dari"),1)]),n("span",se,h(o),1)])]),_:1},8,["time","onProgress","onEnd"])]),n("div",le,[n("div",de,[n("div",{class:w(["col-md-12 col-sm-12 col-xs-12",t.exam.show_question_number_navigation==1?"col-lg-8":"col-lg-12"])},[n("div",re,[n("div",ce,[n("div",ue,[n("div",me,[t.exam.show_question_number==1?(i(),a("div",he,[n("h4",{class:w(["mb-0",{"text-dark":t.lastSection>1,"text-white":t.lastSection<=1}])},"No. "+h(t.questionLists[e.indexPage].navigation_order),3)])):u("",!0)]),n("div",ge,[A(x,{transform:m.transform,time:e.duration,onProgress:e.handleChangeDuration,onEnd:e.handeCountdownEnd},{default:B(({hours:o,minutes:r,seconds:k})=>[n("h4",{class:w(["mb-0",{"text-dark":t.lastSection>1,"text-white":t.lastSection<=1}])},[_e,t.exam.duration>=60?(i(),a("span",ke,[be,C(" "+h(o)+" : "+h(r)+" : "+h(k),1)])):(i(),a("span",xe,[fe,C(" "+h(r)+" : "+h(k),1)]))],2)]),_:1},8,["transform","time","onProgress","onEnd"])])])]),n("div",ye,[t.questionLists[e.indexPage]?(i(),a("div",we,[n("div",null,[n("div",{innerHTML:t.questionLists[e.indexPage].question,class:"prevent-select ck-content"},null,8,ve)]),n("table",null,[t.exam.type_option==1?(i(),a("tbody",Ce,[(i(!0),a(v,null,I(t.questionLists[e.indexPage].answer_order.split(","),(o,r)=>(i(),a("tr",{key:r},[n("span",null,[n("td",Se,[e.getMyAnswer(t.questionLists[e.indexPage].question_id).includes(Number(o))?(i(),a("button",{key:0,onClick:k=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-success text-white"},h(e.options[r]),9,Ee)):(i(),a("button",{key:1,onClick:k=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-outline-primary w-100 no-click-effect"},h(e.options[r]),9,Ae))]),n("td",Be,[t.exam.show_answer==1?(i(),a("p",{key:0,class:"prevent-select ck-content",innerHTML:t.questionLists[e.indexPage]["option_"+o]},null,8,Ie)):u("",!0)])])]))),128))])):u("",!0),t.exam.type_option==2?(i(),a("tbody",Le,[t.exam.show_answer==1?(i(!0),a(v,{key:0},I(t.questionLists[e.indexPage].answer_order.split(","),(o,r)=>(i(),a("tr",{key:r},[n("td",je,[n("p",null,h(e.options[r])+".",1)]),n("td",null,[n("p",{class:"ck-content",innerHTML:t.questionLists[e.indexPage]["option_"+o]},null,8,Me)])]))),128)):u("",!0)])):u("",!0)])])):(i(),a("div",Te,qe))]),t.exam.type_option==2?(i(),a("div",Oe,[(i(!0),a(v,null,I(t.questionLists[e.indexPage].answer_order.split(","),(o,r)=>(i(),a("span",{key:r},[e.getMyAnswer(t.questionLists[e.indexPage].question_id).includes(Number(o))?(i(),a("button",{key:0,onClick:k=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-secondary text-dark px-lg-5 px-md-5 mb-1 mx-1 rounded-3 no-click-effect-section",style:{"background-color":"#ccc"}},h(e.options[r]),9,Ne)):(i(),a("button",{key:1,onClick:k=>e.submitAnswer(t.questionLists[e.indexPage].question_id,o),class:"btn btn-secondary px-lg-5 px-md-5 mb-1 rounded-3 mx-1 text-dark no-click-effect-section",style:{"background-color":"#ccc"}},h(e.options[r]),9,He))]))),128))])):u("",!0),n("div",Re,[n("div",De,[n("div",Je,[t.exam.show_prev_next_button==1?(i(),a("div",Qe,[e.indexPage>0?(i(),a("button",{key:0,onClick:l[0]||(l[0]=o=>e.prevPage()),type:"button",class:"btn btn-primary me-3"},"Sebelumnya")):u("",!0),e.indexPage<Object.keys(t.questionLists).length-1?(i(),a("button",{key:1,onClick:l[1]||(l[1]=o=>e.nextPage()),type:"button",class:"btn btn-success"},"Selanjutnya")):u("",!0)])):u("",!0)]),t.exam.show_question_number_navigation==0?(i(),a("div",Ue,[t.exam.button_type_finish==1?(i(),a("div",Ke,[t.section==t.lastSection?(i(),a("button",{key:0,onClick:l[2]||(l[2]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Tryout")):(i(),a("button",{key:1,onClick:l[3]||(l[3]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(i(),a("div",Ve,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(i(),a("button",{key:0,onClick:l[4]||(l[4]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Tryout")):u("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(i(),a("button",{key:1,onClick:l[5]||(l[5]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):u("",!0)]))])):u("",!0)])])])],2),t.exam.show_question_number_navigation==1?(i(),a("div",{key:0,class:w(["col-md-12 col-sm-12 col-xs-12",{"col-lg-4":t.exam.show_question_number_navigation==1}])},[n("div",ze,[We,n("div",Fe,[(i(!0),a(v,null,I(t.questionLists,(o,r)=>(i(),a("div",{key:r},[n("div",Ye,[n("div",Ge,[r==e.indexPage?(i(),a("button",{key:0,onClick:k=>e.clickQuestion(r),class:"btn btn-primary w-100"},[n("span",Ze,h(o.navigation_order),1)],8,Xe)):u("",!0),r!=e.indexPage&&e.getMyAnswer(o.question_id)==0?(i(),a("button",{key:1,onClick:k=>e.clickQuestion(r),class:"btn btn-light w-100"},[n("span",pe,h(o.navigation_order),1)],8,$e)):u("",!0),r!=e.indexPage&&e.getMyAnswer(o.question_id)!=0?(i(),a("button",{key:2,onClick:k=>e.clickQuestion(r),class:"btn btn-success w-100"},[n("span",tt,h(o.navigation_order),1)],8,et)):u("",!0)])])]))),128))]),n("div",nt,[t.exam.button_type_finish==1?(i(),a("div",at,[t.section==t.lastSection?(i(),a("button",{key:0,onClick:l[6]||(l[6]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Tryout")):(i(),a("button",{key:1,onClick:l[7]||(l[7]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya"))])):(i(),a("div",it,[t.section==t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(i(),a("button",{key:0,onClick:l[8]||(l[8]=o=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Tryout")):u("",!0),t.section<t.lastSection&&e.indexPage>=Object.keys(t.questionLists).length-1?(i(),a("button",{key:1,onClick:l[9]||(l[9]=(...o)=>e.endExam&&e.endExam(...o)),class:"btn btn-danger btn-md border-0 shadow w-100"},"Lanjut Bagian Berikutnya")):u("",!0)]))])])],2)):u("",!0)])]),e.showModalEndExam?(i(),a("div",{key:0,class:w(["modal fade",{show:e.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[n("div",ot,[n("div",st,[lt,dt,n("div",rt,[n("button",{onClick:l[10]||(l[10]=(...o)=>e.endExam&&e.endExam(...o)),type:"button",class:"btn btn-primary"},"Ya, Akhiri"),n("button",{onClick:l[11]||(l[11]=o=>e.showModalEndExam=!1),type:"button",class:"btn btn-secondary"},"Tutup")])])])],2)):u("",!0),e.showModalEndTimeExam?(i(),a("div",{key:1,class:w(["modal fade",{show:e.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block","z-index":"9999"},role:"dialog"},[n("div",ct,[n("div",ut,[n("div",mt,[t.section==t.lastSection?(i(),a("h5",ht,"Waktu Habis !")):(i(),a("h5",gt," Lanjut ke bagian selanjutnya dalam hitungan : "))]),n("div",_t,[t.section==t.lastSection?(i(),a("div",kt,yt)):(i(),a("div",wt,[n("div",vt,[A(x,{time:5e3,onProgress:e.handleChangeDuration,onEnd:e.endExam},{default:B(({hours:o,minutes:r,seconds:k})=>[n("h2",Ct,[n("span",St,h(k),1)])]),_:1},8,["onProgress","onEnd"])])]))]),t.section==t.lastSection?(i(),a("div",Et,[n("button",{onClick:l[12]||(l[12]=(...o)=>e.endExam&&e.endExam(...o)),type:"button",class:"btn btn-primary"},"Ya")])):u("",!0)])])],2)):u("",!0)],64)}const qt=te(ne,[["render",At]]);export{qt as default};
