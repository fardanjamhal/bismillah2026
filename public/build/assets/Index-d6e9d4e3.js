import{L}from"./Layout-80160f1d.js";import{P as V}from"./Pagination-eba5b0b6.js";import{L as C,H as B,r as p,a as h,o as n,c as o,b,w as f,d as t,e as y,g as c,v as k,m as x,F as T,i as S,f as w,k as _,t as d,h as l,j as U}from"./app-50a2f634.js";import{S as A}from"./sweetalert2.esm.all-61741a63.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const R={layout:L,components:{Link:C,Head:B,Pagination:V},setup(){const i=p(new URL(document.location).searchParams.get("search")),e=p(new URL(document.location).searchParams.get("item_type")||""),r=p(new URL(document.location).searchParams.get("transaction_status")||""),s=p(new URL(document.location).searchParams.get("payment_method")||""),g=p(new URL(document.location).searchParams.get("start_date")),u=p(new URL(document.location).searchParams.get("end_date"));return{search:i,item_type:e,transaction_status:r,payment_method:s,start_date:g,end_date:u,destroy:a=>{A.fire({title:"Apakah Anda yakin ?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Hapus"}).then(m=>{m.isConfirmed&&(U.Inertia.delete(`/admin/transactions/${a}`),A.fire({title:"Deleted!",text:"Transaksi Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},handleSearch:()=>{U.Inertia.get("/admin/transactions",{search:i.value,item_type:e.value,transaction_status:r.value,payment_method:s.value,start_date:g.value,end_date:u.value})},exportTransaction:()=>{const a=new URLSearchParams;a.append("search",i.value??""),a.append("item_type",e.value??""),a.append("transaction_status",r.value??""),a.append("payment_method",s.value??""),a.append("start_date",g.value??""),a.append("end_date",u.value??"");const m="/admin/transactions/export?"+a.toString();window.open(m,"_blank")}}},props:{transactions:Object},methods:{formatPrice(i){return"Rp."+(i/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},E={class:"page-wrapper"},F={class:"page-content"},H={class:"card border-top border-0 border-3 border-primary"},N={class:"card-body"},j={class:"row"},K={class:"col-lg-6 col-md-6 mt-1"},I={class:"col-lg-3 col-md-6 mt-1"},J={class:"col-lg-3 col-md-6 mt-1"},O={class:"col-lg-3 col-md-6 mt-1"},q=["value"],z={class:"col-lg-3 col-md-6 mt-1"},G={class:"col-lg-3 col-md-6 mt-1"},Q={class:"col-lg-3 col-md-6 mt-1"},W={key:0,class:"alert alert-success border-0 bg-success alert-dismissible fade show py-2"},X={class:"d-flex align-items-center"},Y={class:"ms-3"},Z={class:"text-white"},$={class:"card border-top border-0 border-3 border-primary"},tt={class:"card-header"},et={class:"d-flex align-items-center"},at={class:"ms-auto"},st={class:"card-body"},nt={class:"table-responsive"},ot={class:"table mb-0",style:{"font-size":"10pt"}},lt={key:0,class:"badge bg-primary"},it={key:1,class:"badge bg-primary"},rt={key:2,class:"badge bg-primary"},dt={key:3,class:"badge bg-primary"},mt={key:0,class:"badge bg-warning"},pt={key:1,class:"badge bg-danger"},ct={key:2,class:"badge bg-primary"},ut={key:3,class:"badge bg-danger"},bt={key:4,class:"badge bg-success"},_t={class:"dropdown"},gt={class:"dropdown-menu","data-popper-placement":"top-start","data-popper-reference-hidden":"","data-popper-escaped":""},vt=["onClick"],ft={key:0,align:"center",colspan:"9"};function ht(i,e,r,s,g,u){const P=h("Head"),v=h("Link"),M=h("Pagination");return n(),o(T,null,[b(P,null,{default:f(()=>[t("title",null,d(i.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Data Transaksi",1)]),_:1}),t("div",E,[t("div",F,[e[29]||(e[29]=y('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Data Transaksi</li></ol></nav></div></div>',1)),t("div",H,[t("div",N,[t("form",null,[t("div",j,[t("div",K,[e[8]||(e[8]=t("label",{for:"search"},"Kode Transaksi",-1)),c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>s.search=a),class:"form-control form-control-sm",id:"search",placeholder:"Cari Berdasarkan Kode Transaksi...."},null,512),[[k,s.search]])]),t("div",I,[e[10]||(e[10]=t("label",{for:"item_type"},"Jenis Transaksi",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.item_type=a),class:"form-select form-select-sm",id:"item_type"},[...e[9]||(e[9]=[y('<option value="">[ Pilih Jenis Transaksi ]</option><option value="App\\Models\\Exam\\Exam">Pembelian Latihan Soal</option><option value="App\\Models\\Exam\\ExamGroup">Pembelian Tryout</option><option value="App\\Models\\Material\\Module">Pembelian Modul/Materi</option><option value="App\\Models\\Material\\VideoModule">Pembelian Video Pembajaran</option><option value="App\\Models\\Transaction\\Voucher">Pembelian Membership</option><option value="TopupBalance">Top Up Saldo</option>',7)])],512),[[x,s.item_type]])]),t("div",J,[e[12]||(e[12]=t("label",{for:"transaction_status"},"Status Transaksi",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.transaction_status=a),class:"form-select form-select-sm",id:"transaction_status"},[...e[11]||(e[11]=[y('<option value="">[ Pilih Status ]</option><option value="pending">Pending</option><option value="paid">Paid</option><option value="done">Done</option><option value="failed">Failed</option>',5)])],512),[[x,s.transaction_status]])]),t("div",O,[e[14]||(e[14]=t("label",{for:"payment_method"},"Metode Pembayaran",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.payment_method=a),class:"form-select form-select-sm",id:"payment_method"},[e[13]||(e[13]=t("option",{value:""},"[ Pilih Metode Pembayaran ]",-1)),(n(!0),o(T,null,S(i.$page.props.setting.payment_methods,a=>(n(),o("option",{value:a.code},d(a.name),9,q))),256))],512),[[x,s.payment_method]])]),t("div",z,[e[15]||(e[15]=t("label",{for:"start_date"},"Tanggal Mulai",-1)),c(t("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":e[4]||(e[4]=a=>s.start_date=a),id:"start_date"},null,512),[[k,s.start_date]])]),t("div",G,[e[16]||(e[16]=t("label",{for:"end_date"},"Tanggal Akhir",-1)),c(t("input",{type:"date",class:"form-control form-control-sm","onUpdate:modelValue":e[5]||(e[5]=a=>s.end_date=a),id:"end_date"},null,512),[[k,s.end_date]])]),t("div",Q,[e[20]||(e[20]=t("label",{for:"end_date"},"Action",-1)),e[21]||(e[21]=t("br",null,null,-1)),t("button",{onClick:e[6]||(e[6]=w((...a)=>s.handleSearch&&s.handleSearch(...a),["prevent"])),class:"btn btn-primary btn-sm me-2"},[...e[17]||(e[17]=[t("i",{class:"bx bx-filter"},null,-1),_("Filter ",-1)])]),b(v,{href:"/admin/transactions",class:"btn btn-danger btn-sm me-2"},{default:f(()=>[...e[18]||(e[18]=[t("i",{class:"bx bx-refresh"},null,-1),_("reset ",-1)])]),_:1}),t("a",{target:"_blank",onClick:e[7]||(e[7]=w((...a)=>s.exportTransaction&&s.exportTransaction(...a),["prevent"])),class:"btn btn-success btn-sm"},[...e[19]||(e[19]=[t("i",{class:"bx bxs-file"},null,-1),_(" Export ",-1)])])])])])])]),i.$page.props.session.success?(n(),o("div",W,[t("div",X,[e[23]||(e[23]=t("div",{class:"font-35 text-white"},[t("i",{class:"bx bxs-check-circle"})],-1)),t("div",Y,[e[22]||(e[22]=t("h6",{class:"mb-0 text-white"},"Sukses",-1)),t("div",Z,d(i.$page.props.session.success),1)])])])):l("",!0),t("div",$,[t("div",tt,[t("div",et,[e[25]||(e[25]=t("div",null,[t("h6",{class:"mb-0"},"Data Transaksi")],-1)),t("div",at,[b(v,{href:"/admin/transactions/create",class:"btn btn-primary btn-sm me-2"},{default:f(()=>[...e[24]||(e[24]=[t("i",{class:"bx bxs-plus-square"},null,-1),_("Tambah Transaksi ",-1)])]),_:1})])])]),t("div",st,[t("div",nt,[t("table",ot,[e[28]||(e[28]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"Kode"),t("th",null,"Tanggal"),t("th",null,"User"),t("th",null,"Keterangan"),t("th",null,"Metode"),t("th",null,"Total"),t("th",null,"Status"),t("th",null,"Actions")])],-1)),t("tbody",null,[(n(!0),o(T,null,S(r.transactions.data,(a,m)=>(n(),o("tr",{key:m},[t("td",null,d(++m+(r.transactions.current_page-1)*r.transactions.per_page),1),t("td",null,d(a.code),1),t("td",null,d(a.created_at),1),t("td",null,d(a.user.name),1),t("td",null,d(a.description),1),t("td",null,[a.payment_method=="account_balance"?(n(),o("span",lt,"Saldo Akun")):l("",!0),a.payment_method=="manual_transfer"?(n(),o("span",it,"Transfer Manual")):l("",!0),a.payment_method=="automatic_transfer_midtrans"?(n(),o("span",rt,"Transfer Otomatis")):l("",!0),a.payment_method=="not_payment_method"?(n(),o("span",dt,"Tanpa Metode Pembayaran")):l("",!0)]),t("td",null,d(u.formatPrice(a.total_payment)),1),t("td",null,[a.transaction_status=="pending"?(n(),o("span",mt,"Pending")):l("",!0),a.transaction_status=="expired"?(n(),o("span",pt,"Expired")):l("",!0),a.transaction_status=="paid"?(n(),o("span",ct,"Paid")):l("",!0),a.transaction_status=="failed"?(n(),o("span",ut,"Failed")):l("",!0),a.transaction_status=="done"?(n(),o("span",bt,"Done")):l("",!0)]),t("td",null,[t("div",_t,[e[27]||(e[27]=t("button",{class:"btn btn-light btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"true"},"Action",-1)),t("ul",gt,[t("li",null,[b(v,{class:"dropdown-item",href:`/admin/transactions/${a.id}`},{default:f(()=>[...e[26]||(e[26]=[_("Detail",-1)])]),_:1},8,["href"])]),t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:w(yt=>s.destroy(a.id),["prevent"])},"Hapus",8,vt)])])])])]))),128)),t("tr",null,[r.transactions.data.length?l("",!0):(n(),o("td",ft,"Data Tidak Tersedia"))])])])]),b(M,{links:r.transactions.links,align:"end"},null,8,["links"])])])])])],64)}const Mt=D(R,[["render",ht]]);export{Mt as default};
