import{L as v}from"./Layout-ed73603e.js";import{L as f,H as k,v as e,d as V}from"./app-cd8c7f16.js";import{S as E}from"./sweetalert2.esm.all-61741a63.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const g={layout:v,components:{Link:f,Head:k},props:{errors:Object,lessons:Object,questionTemplates:Object,questionTitle:Object},setup(i){const t=e.reactive({source_data:"",question_template_id:"",total_question_per_section:"50",template:null,column_1:"",column_2:"",column_3:"",column_4:"",column_5:"",column_6:"",column_7:"",column_8:"",column_9:"",column_10:""}),n=e.ref({...i.errors}),o=e.ref([]);e.watch(()=>i.errors,a=>{n.value={...a}});const _=a=>{t.template=a.target.files[0]},u=a=>{const r=t[a];r.length!==5?n.value[a]=`Kolom ${a.replace("column_","")} harus memiliki 5 karakter.`:new Set(r).size!==r.length?n.value[a]=`Kolom ${a.replace("column_","")} tidak boleh ada karakter yang sama.`:delete n.value[a]},p=()=>{if(n.value={},t.source_data||(n.value.source_data="Sumber Data Isian tidak boleh kosong"),t.question_template_id||(n.value.question_template_id="Template Soal tidak boleh kosong"),t.source_data==1&&!t.total_question_per_section&&(n.value.total_question_per_section="Total Soal tidak boleh kosong"),t.source_data==1&&parseInt(t.total_question_per_section)<50&&(n.value.total_question_per_section="Total Soal tidak boleh kurang dari 50 soal per kolom"),t.source_data==2&&!t.template&&(n.value.template="Template Excel harus diunggah"),t.source_data==1)for(let a=1;a<=10;a++)u(`column_${a}`);return Object.keys(n.value).length===0},m=()=>{const a=["1","2","3","4","5","6","7","8","9","0"],r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),d=["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω","Γ","Δ","Θ","Λ","Ξ","Π","Σ","Φ","Ψ","Ω"];let s=[];o.value.includes("number")&&(s=s.concat(a)),o.value.includes("letter")&&(s=s.concat(r)),o.value.includes("symbol")&&(s=s.concat(d));for(let b=1;b<=10;b++)t[`column_${b}`]=l(s,5)},l=(a,r)=>{let d="";for(;d.length<r;){const s=a[Math.floor(Math.random()*a.length)];d.includes(s)||(d+=s)}return d};return{form:t,errors:n,submit:()=>{if(!p())return;const a=new FormData;a.append("source_data",t.source_data),a.append("total_question_per_section",t.total_question_per_section),a.append("question_template_id",t.question_template_id),a.append("template",t.template);for(let r=1;r<=10;r++)a.append(`column_${r}`,t[`column_${r}`]);V.Inertia.post(`/admin/question-titles/${i.questionTitle.id}/questions/generate-questions`,a,{onSuccess:r=>{E.fire({title:"Success!",text:"Generate Soal Kecermatan dijalankan!.",icon:"success",showConfirmButton:!1,timer:1e3}),n.value={}},onFinish:r=>{t.template="",document.querySelector("#fileInput").value=""},onError:r=>{n.value={...r}}})},validateColumn:u,selection:o,confirmSelection:()=>{m(),bootstrap.Modal.getInstance(document.getElementById("generateAutomaticQuestion")).hide()},handleFileChange:_,generateQuestion:m,resetForm:()=>{t.source_data="",t.question_template_id="",t.total_question_per_section="",t.template=null;for(let a=1;a<=10;a++)t[`column_${a}`]="";n.value={}}}}},y={class:"page-wrapper"},h={class:"page-content"},S={class:"card border-top border-0 border-3 border-primary"},q={class:"card-body"},B={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},C={class:"mt-3"},D={key:1,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},x={class:"mt-3"},T={class:"d-lg-flex align-items-center"},w={class:"ms-auto"},F={class:"col-12"},K={key:0,class:"invalid-feedback"},M={key:0,class:"col-12"},I={key:0,class:"invalid-feedback"},L={class:"col-12"},j={class:"input-group"},O=["value"],U={key:0,class:"invalid-feedback"},A={key:1,class:"col-12"},H={key:0,class:"invalid-feedback"},P={class:"form-label"},z=["onUpdate:modelValue","onInput"],G={key:0,class:"invalid-feedback"},Q={class:"col-12"},R={key:0,type:"button",class:"btn btn-sm btn-success","data-bs-toggle":"modal","data-bs-target":"#generateAutomaticQuestion"},J={class:"modal fade",id:"generateAutomaticQuestion",tabindex:"-1","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-centered"},X={class:"modal-content"},Y={class:"modal-body"},Z={class:"table table-bordered"},$={class:"modal-footer"};function ee(i,t,n,o,_,u){const p=e.resolveComponent("Head"),m=e.resolveComponent("Link");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(p,null,{default:e.withCtx(()=>[e.createElementVNode("title",null,e.toDisplayString(i.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Tambah Generate Soal Kecermatan",1)]),_:1}),e.createElementVNode("div",y,[e.createElementVNode("div",h,[t[29]||(t[29]=e.createStaticVNode('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Generate Soal Kecermatan</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Soal Kecermatan</li></ol></nav></div></div>',1)),e.createElementVNode("div",S,[e.createElementVNode("div",q,[i.$page.props.session.error?(e.openBlock(),e.createElementBlock("div",B,[t[10]||(t[10]=e.createElementVNode("strong",null,"Gagal",-1)),e.createElementVNode("ul",C,[e.createElementVNode("li",null,e.toDisplayString(i.$page.props.session.error),1)])])):e.createCommentVNode("",!0),Object.keys(o.errors).length>0?(e.openBlock(),e.createElementBlock("div",D,[t[11]||(t[11]=e.createElementVNode("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),e.createElementVNode("ul",x,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Object.values(o.errors).flat(),l=>(e.openBlock(),e.createElementBlock("li",{key:l},e.toDisplayString(l),1))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",T,[e.createElementVNode("div",w,[t[13]||(t[13]=e.createElementVNode("a",{href:"/assets/import_format/format-import-kecermatan.xlsx",class:"btn btn-success mx-1 btn-sm mt-lg-0",download:""},[e.createElementVNode("i",{class:"bx bxs-file"}),e.createTextVNode("Download Format Import Kecermatan")],-1)),e.createVNode(m,{href:`/admin/question-titles/${n.questionTitle.id}/questions`,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:e.withCtx(()=>[...t[12]||(t[12]=[e.createTextVNode("Kembali",-1)])]),_:1},8,["href"])])]),e.createElementVNode("form",{onSubmit:t[5]||(t[5]=e.withModifiers((...l)=>o.submit&&o.submit(...l),["prevent"])),class:"row g-3"},[e.createElementVNode("div",F,[t[15]||(t[15]=e.createElementVNode("label",{class:"form-label"},"Sumber Data Isian",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.form.source_data=l),class:e.normalizeClass([{"is-invalid":o.errors.source_data},"form-select"])},[...t[14]||(t[14]=[e.createElementVNode("option",{value:""},"[ Pilih ]",-1),e.createElementVNode("option",{value:"1"},"Disi Manual",-1),e.createElementVNode("option",{value:"2"},"Diisi Menggunakan File Template Excel",-1)])],2),[[e.vModelSelect,o.form.source_data]]),o.errors.source_data?(e.openBlock(),e.createElementBlock("div",K,e.toDisplayString(o.errors.source_data),1)):e.createCommentVNode("",!0)]),o.form.source_data==2?(e.openBlock(),e.createElementBlock("div",M,[t[16]||(t[16]=e.createElementVNode("label",{class:"form-label"},"Template Excel",-1)),e.createElementVNode("input",{type:"file",class:e.normalizeClass(["form-control",{"is-invalid":o.errors.template}]),onChange:t[1]||(t[1]=(...l)=>o.handleFileChange&&o.handleFileChange(...l)),placeholder:"template",id:"fileInput"},null,34),o.errors.template?(e.openBlock(),e.createElementBlock("div",I,e.toDisplayString(o.errors.template),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",L,[t[19]||(t[19]=e.createElementVNode("label",{class:"form-label"},"Template Soal",-1)),e.createElementVNode("div",j,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.form.question_template_id=l),class:e.normalizeClass([{"is-invalid":o.errors.question_template_id},"form-select"])},[t[17]||(t[17]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.questionTemplates,(l,c)=>(e.openBlock(),e.createElementBlock("option",{key:c,value:l.id},e.toDisplayString(l.name),9,O))),128))],2),[[e.vModelSelect,o.form.question_template_id]]),e.createVNode(m,{href:`/admin/question-titles/${n.questionTitle.id}/question-templates`,class:"btn btn-primary",id:"button-addon2"},{default:e.withCtx(()=>[...t[18]||(t[18]=[e.createTextVNode("Tambah Template",-1)])]),_:1},8,["href"]),o.errors.question_template_id?(e.openBlock(),e.createElementBlock("div",U,e.toDisplayString(o.errors.question_template_id),1)):e.createCommentVNode("",!0)])]),o.form.source_data==1?(e.openBlock(),e.createElementBlock("div",A,[t[20]||(t[20]=e.createElementVNode("label",{class:"form-label"},"Total Soal Per Kolom (Minimal 50 Per Kolom)",-1)),e.withDirectives(e.createElementVNode("input",{type:"number",class:e.normalizeClass(["form-control",{"is-invalid":o.errors.total_question_per_section}]),"onUpdate:modelValue":t[3]||(t[3]=l=>o.form.total_question_per_section=l),placeholder:"Total Soal Per Kolom"},null,2),[[e.vModelText,o.form.total_question_per_section]]),o.errors.total_question_per_section?(e.openBlock(),e.createElementBlock("div",H,e.toDisplayString(o.errors.total_question_per_section),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),o.form.source_data==1?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},e.renderList(10,l=>e.createElementVNode("div",{class:"col-6",key:l},[e.createElementVNode("label",P,"Kolom "+e.toDisplayString(l),1),e.withDirectives(e.createElementVNode("input",{type:"text",class:e.normalizeClass(["form-control",{"is-invalid":o.errors[`column_${l}`]}]),"onUpdate:modelValue":c=>o.form[`column_${l}`]=c,onInput:c=>o.validateColumn(`column_${l}`),placeholder:"Ketik Maksimal 5 Angka, Huruf atau Simbol. Nilai Bisa Dicampur."},null,42,z),[[e.vModelText,o.form[`column_${l}`]]]),o.errors[`column_${l}`]?(e.openBlock(),e.createElementBlock("div",G,e.toDisplayString(o.errors[`column_${l}`]),1)):e.createCommentVNode("",!0)])),64)):e.createCommentVNode("",!0),e.createElementVNode("div",Q,[t[21]||(t[21]=e.createElementVNode("button",{type:"submit",class:"btn btn-sm btn-primary"},"Simpan",-1)),e.createElementVNode("button",{type:"button",class:"btn btn-sm btn-danger mx-2",onClick:t[4]||(t[4]=(...l)=>o.resetForm&&o.resetForm(...l))},"Reset"),o.form.source_data==1?(e.openBlock(),e.createElementBlock("button",R,"Soal Otomatis")):e.createCommentVNode("",!0)])],32)])]),e.createElementVNode("div",J,[e.createElementVNode("div",W,[e.createElementVNode("div",X,[t[28]||(t[28]=e.createElementVNode("div",{class:"modal-header"},[e.createElementVNode("h5",{class:"modal-title"},"Soal Otomatis"),e.createElementVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e.createElementVNode("div",Y,[t[26]||(t[26]=e.createElementVNode("p",null," Kolom soal akan terisi otomatis berdasarkan huruf, angka dan simbol yang dipilih. ",-1)),e.createElementVNode("table",Z,[t[25]||(t[25]=e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Keterangan"),e.createElementVNode("th",null,"Action")],-1)),e.createElementVNode("tr",null,[t[22]||(t[22]=e.createElementVNode("td",null,"Angka",-1)),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:"number","onUpdate:modelValue":t[6]||(t[6]=l=>o.selection=l)},null,512),[[e.vModelCheckbox,o.selection]])])]),e.createElementVNode("tr",null,[t[23]||(t[23]=e.createElementVNode("td",null,"Huruf",-1)),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:"letter","onUpdate:modelValue":t[7]||(t[7]=l=>o.selection=l)},null,512),[[e.vModelCheckbox,o.selection]])])]),e.createElementVNode("tr",null,[t[24]||(t[24]=e.createElementVNode("td",null,"Simbol",-1)),e.createElementVNode("td",null,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:"symbol","onUpdate:modelValue":t[8]||(t[8]=l=>o.selection=l)},null,512),[[e.vModelCheckbox,o.selection]])])])])]),e.createElementVNode("div",$,[e.createElementVNode("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...l)=>o.confirmSelection&&o.confirmSelection(...l))},"Lanjutkan"),t[27]||(t[27]=e.createElementVNode("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Batal",-1))])])])])])])],64)}const se=N(g,[["render",ee]]);export{se as default};
