import{L as B}from"./Layout-80160f1d.js";import{L as K,H as L,l as N,a as c,o as l,c as r,b as T,w as S,d as t,e as w,f as V,t as e,h as o,g as M,m as C,F,j as H,k as j}from"./app-50a2f634.js";import{S as A}from"./sweetalert2.esm.all-61741a63.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const U={layout:B,components:{Link:K,Head:L},props:{transaction:Object},setup(i){const n=N({transaction_status:i.transaction.transaction_status});return{form:n,submit:()=>{H.Inertia.put(`/admin/transactions/${i.transaction.id}`,{transaction_status:n.transaction_status},{onSuccess:()=>{A.fire({title:"Success!",text:"Transaksi Berhasil Diupdate!.",icon:"success",showConfirmButton:!1,timer:1e3})}})}}},methods:{formatPrice(i){return"Rp."+(i/1).toFixed().replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},E={class:"page-wrapper"},G={class:"page-content"},I={class:"card border-top border-0 border-3 border-primary"},J={class:"card-body"},R={class:"d-lg-flex align-items-center"},q={class:"ms-auto"},z={class:"table-responsive"},Q={class:"table mb-0"},W={key:0},X={key:1},Y={key:2},Z={key:3},x={key:4},h={key:5},$={key:6},tt={key:7},nt={key:8},at={key:9},st={class:"badge bg-primary"},et={key:0,class:"badge bg-primary"},it={key:1,class:"badge bg-primary"},lt={key:2,class:"badge bg-primary"},rt={key:3,class:"badge bg-primary"},ot={key:0,class:"fw-bold"},dt={key:1,class:"fw-bold"},ut={key:2,class:"fw-bold"},mt={key:3,class:"fw-bold"},gt={key:4,class:"fw-bold"},bt={key:0},ft=["src"],pt={key:1};function yt(i,n,s,d,kt,u){var m,g,b,f,p,y,k,v,_;const P=c("Head"),D=c("Link");return l(),r(F,null,[T(P,null,{default:S(()=>[t("title",null,e(i.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Detail Transaksi",1)]),_:1}),t("div",E,[t("div",G,[n[46]||(n[46]=w('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1)),t("div",I,[t("div",J,[t("div",R,[t("div",q,[T(D,{href:"/admin/transactions",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:S(()=>[...n[2]||(n[2]=[j("Kembali",-1)])]),_:1})])]),t("div",z,[t("form",{onSubmit:n[1]||(n[1]=V((...a)=>d.submit&&d.submit(...a),["prevent"]))},[t("table",Q,[t("tbody",null,[n[26]||(n[26]=t("tr",null,[t("th",{colspan:"3"},"Biodata")],-1)),i.$page.props.setting.authentication_field.some(a=>a.name=="code"&&a.is_active=="1")?(l(),r("tr",W,[t("td",null,e((m=i.$page.props.setting.authentication_field.find(a=>a.name=="code"))==null?void 0:m.translate),1),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.code??"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="name"&&a.is_active=="1")?(l(),r("tr",X,[t("td",null,e((g=i.$page.props.setting.authentication_field.find(a=>a.name=="name"))==null?void 0:g.translate),1),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.name??"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="email"&&a.is_active=="1")?(l(),r("tr",Y,[t("td",null,e((b=i.$page.props.setting.authentication_field.find(a=>a.name=="email"))==null?void 0:b.translate),1),n[5]||(n[5]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.email??"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="username"&&a.is_active=="1")?(l(),r("tr",Z,[t("td",null,e((f=i.$page.props.setting.authentication_field.find(a=>a.name=="username"))==null?void 0:f.translate),1),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.username??"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="province_id"&&a.is_active=="1")?(l(),r("tr",x,[t("td",null,e((p=i.$page.props.setting.authentication_field.find(a=>a.name=="province_id"))==null?void 0:p.translate),1),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.province?s.transaction.user.student.province.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="city_id"&&a.is_active=="1")?(l(),r("tr",h,[t("td",null,e((y=i.$page.props.setting.authentication_field.find(a=>a.name=="city_id"))==null?void 0:y.translate),1),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.city?s.transaction.user.student.city.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="district_id"&&a.is_active=="1")?(l(),r("tr",$,[t("td",null,e((k=i.$page.props.setting.authentication_field.find(a=>a.name=="district_id"))==null?void 0:k.translate),1),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.district?s.transaction.user.student.district.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="village_id"&&a.is_active=="1")?(l(),r("tr",tt,[t("td",null,e((v=i.$page.props.setting.authentication_field.find(a=>a.name=="village_id"))==null?void 0:v.translate),1),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.village?s.transaction.user.student.village.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="phone_number"&&a.is_active=="1")?(l(),r("tr",nt,[t("td",null,e((_=i.$page.props.setting.authentication_field.find(a=>a.name=="phone_number"))==null?void 0:_.translate),1),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.phone_number?s.transaction.user.student.phone_number:"-"),1)])):o("",!0),n[27]||(n[27]=t("tr",null,[t("td",{colspan:"3"}," ")],-1)),n[28]||(n[28]=t("tr",null,[t("th",{colspan:"3"},"Detail Transaksi")],-1)),t("tr",null,[n[12]||(n[12]=t("td",null,"Kode Transaksi",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,e(s.transaction.code),1)]),t("tr",null,[n[14]||(n[14]=t("td",null,"Tanggal Transaksi",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,e(s.transaction.created_at),1)]),s.transaction.category?(l(),r("tr",at,[n[16]||(n[16]=t("td",null,"Kategori Peminatan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[t("span",st,e(s.transaction.category.name),1)])])):o("",!0),t("tr",null,[n[18]||(n[18]=t("td",null,"Deskripsi Transaksi",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,e(s.transaction.description),1)]),t("tr",null,[n[20]||(n[20]=t("td",null,"Metode Pembayaran",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[s.transaction.payment_method=="account_balance"?(l(),r("span",et,"Saldo Akun")):o("",!0),s.transaction.payment_method=="manual_transfer"?(l(),r("span",it,"Transfer Manual (Konfirmasi Pembayaran)")):o("",!0),s.transaction.payment_method=="automatic_transfer_midtrans"?(l(),r("span",lt,"Transfer Otomatis")):o("",!0),s.transaction.payment_method=="not_payment_method"?(l(),r("span",rt,"Tanpa Metode Pembayaran")):o("",!0)])]),t("tr",null,[n[22]||(n[22]=t("td",null,"Total Transaksi",-1)),n[23]||(n[23]=t("td",null,":",-1)),t("td",null,e(u.formatPrice(s.transaction.total_payment)),1)]),t("tr",null,[n[24]||(n[24]=t("td",null,"Status Transaksi",-1)),n[25]||(n[25]=t("td",null,":",-1)),t("td",null,[s.transaction.transaction_status=="pending"?(l(),r("span",ot,"Pending - Belum melakukan pembayaran")):o("",!0),s.transaction.transaction_status=="paid"?(l(),r("span",dt,"Telah melakukan pembayaran")):o("",!0),s.transaction.transaction_status=="failed"?(l(),r("span",ut,"Transaksi Gagal")):o("",!0),s.transaction.transaction_status=="done"?(l(),r("span",mt,"Transaksi Selesai")):o("",!0),s.transaction.transaction_status=="expired"?(l(),r("span",gt,"Transaksi Kadaluarsa")):o("",!0)])])]),s.transaction.payment_method=="manual_transfer"&&s.transaction.payment_confirmation?(l(),r("tbody",bt,[n[39]||(n[39]=t("tr",null,[t("td",{colspan:"3"}," ")],-1)),n[40]||(n[40]=t("tr",null,[t("th",{colspan:"3"},"Data Konfirmasi Pembayaran")],-1)),t("tr",null,[n[29]||(n[29]=t("td",null,"Nama Pengirim Transfer",-1)),n[30]||(n[30]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.rekening_name),1)]),t("tr",null,[n[31]||(n[31]=t("td",null,"Di Transfer Ke",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.bank.bank_name+" - "+s.transaction.payment_confirmation.bank.rekening_number+" - "+s.transaction.payment_confirmation.bank.rekening_name),1)]),t("tr",null,[n[33]||(n[33]=t("td",null,"Tanggal Transfer",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.transfer_date),1)]),t("tr",null,[n[35]||(n[35]=t("td",null,"Jumlah Transfer",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,e(u.formatPrice(s.transaction.payment_confirmation.total_payment)),1)]),t("tr",null,[n[37]||(n[37]=t("td",null,"Bukti Transfer",-1)),n[38]||(n[38]=t("td",null,":",-1)),t("td",null,[t("img",{src:"/storage/upload_files/payment_confirmation/"+s.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,ft)])]),n[41]||(n[41]=t("tr",null,[t("th",{colspan:"3"}," ")],-1))])):o("",!0),s.transaction.transaction_status=="pending"||s.transaction.transaction_status=="paid"?(l(),r("tbody",pt,[t("tr",null,[n[43]||(n[43]=t("td",null,"Ubah Status Transaksi",-1)),n[44]||(n[44]=t("td",null,":",-1)),t("td",null,[M(t("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=a=>d.form.transaction_status=a)},[...n[42]||(n[42]=[w('<option value="">[ Pilih Status Transaksi ]</option><option value="pending">Pending</option><option value="paid">Paid</option><option value="done">Done</option><option value="failed">Failed</option>',5)])],512),[[C,d.form.transaction_status]])])]),n[45]||(n[45]=t("tr",null,[t("td",{colspan:"3"},[t("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Submit")])],-1))])):o("",!0)])],32)])])])])])],64)}const St=O(U,[["render",yt]]);export{St as default};
