import{L as V}from"./Layout.9d740512.js";import{L as M,H as C,m as F,c as l,a as P,w as D,b as t,d as B,e as H,t as e,g as o,f as j,p as A,F as O,i as U,j as K,o as r,k as E}from"./app.65838da4.js";import{S as G}from"./sweetalert2.esm.all.5c9cd675.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const J={layout:V,components:{Link:M,Head:C},props:{transaction:Object},setup(i){const n=F({transaction_status:i.transaction.transaction_status});return{form:n,submit:()=>{U.Inertia.put(`/admin/transactions/${i.transaction.id}`,{transaction_status:n.transaction_status},{onSuccess:()=>{G.fire({title:"Success!",text:"Transaksi Berhasil Diupdate!.",icon:"success",showConfirmButton:!1,timer:1e3})}})}}},methods:{formatPrice(i){return"Rp."+(i/1).toFixed().replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},R={class:"page-wrapper"},q={class:"page-content"},z={class:"card border-top border-0 border-3 border-primary"},Q={class:"card-body"},W={class:"d-lg-flex align-items-center"},X={class:"ms-auto"},Y={class:"table-responsive"},Z={class:"table mb-0"},x={key:0},h={key:1},$={key:2},tt={key:3},nt={key:4},at={key:5},st={key:6},et={key:7},it={key:8},lt={key:9},rt={class:"badge bg-primary"},ot={key:0,class:"badge bg-primary"},dt={key:1,class:"badge bg-primary"},ut={key:2,class:"badge bg-primary"},mt={key:3,class:"badge bg-primary"},gt={key:0,class:"fw-bold"},bt={key:1,class:"fw-bold"},ft={key:2,class:"fw-bold"},pt={key:3,class:"fw-bold"},yt={key:4,class:"fw-bold"},kt={key:0},vt=["src"],_t={key:1};function ct(i,n,s,d,Tt,u){var m,g,b,f,p,y,k,v,_,c,T,S,w;const L=K("Head"),N=K("Link");return r(),l(O,null,[P(L,null,{default:D(()=>{var a;return[t("title",null,e((a=i.$page.props.setting.app_name)!=null?a:"Atur Setting Terlebih Dahulu")+" - Detail Transaksi",1)]}),_:1}),t("div",R,[t("div",q,[n[46]||(n[46]=B('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1)),t("div",z,[t("div",Q,[t("div",W,[t("div",X,[P(N,{href:"/admin/transactions",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:D(()=>[...n[2]||(n[2]=[E("Kembali",-1)])]),_:1})])]),t("div",Y,[t("form",{onSubmit:n[1]||(n[1]=H((...a)=>d.submit&&d.submit(...a),["prevent"]))},[t("table",Z,[t("tbody",null,[n[26]||(n[26]=t("tr",null,[t("th",{colspan:"3"},"Biodata")],-1)),i.$page.props.setting.authentication_field.some(a=>a.name=="code"&&a.is_active=="1")?(r(),l("tr",x,[t("td",null,e((m=i.$page.props.setting.authentication_field.find(a=>a.name=="code"))==null?void 0:m.translate),1),n[3]||(n[3]=t("td",null,":",-1)),t("td",null,e((g=s.transaction.user.code)!=null?g:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="name"&&a.is_active=="1")?(r(),l("tr",h,[t("td",null,e((b=i.$page.props.setting.authentication_field.find(a=>a.name=="name"))==null?void 0:b.translate),1),n[4]||(n[4]=t("td",null,":",-1)),t("td",null,e((f=s.transaction.user.name)!=null?f:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="email"&&a.is_active=="1")?(r(),l("tr",$,[t("td",null,e((p=i.$page.props.setting.authentication_field.find(a=>a.name=="email"))==null?void 0:p.translate),1),n[5]||(n[5]=t("td",null,":",-1)),t("td",null,e((y=s.transaction.user.email)!=null?y:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="username"&&a.is_active=="1")?(r(),l("tr",tt,[t("td",null,e((k=i.$page.props.setting.authentication_field.find(a=>a.name=="username"))==null?void 0:k.translate),1),n[6]||(n[6]=t("td",null,":",-1)),t("td",null,e((v=s.transaction.user.username)!=null?v:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="province_id"&&a.is_active=="1")?(r(),l("tr",nt,[t("td",null,e((_=i.$page.props.setting.authentication_field.find(a=>a.name=="province_id"))==null?void 0:_.translate),1),n[7]||(n[7]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.province?s.transaction.user.student.province.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="city_id"&&a.is_active=="1")?(r(),l("tr",at,[t("td",null,e((c=i.$page.props.setting.authentication_field.find(a=>a.name=="city_id"))==null?void 0:c.translate),1),n[8]||(n[8]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.city?s.transaction.user.student.city.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="district_id"&&a.is_active=="1")?(r(),l("tr",st,[t("td",null,e((T=i.$page.props.setting.authentication_field.find(a=>a.name=="district_id"))==null?void 0:T.translate),1),n[9]||(n[9]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.district?s.transaction.user.student.district.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="village_id"&&a.is_active=="1")?(r(),l("tr",et,[t("td",null,e((S=i.$page.props.setting.authentication_field.find(a=>a.name=="village_id"))==null?void 0:S.translate),1),n[10]||(n[10]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.village?s.transaction.user.student.village.name:"-"),1)])):o("",!0),i.$page.props.setting.authentication_field.some(a=>a.name=="phone_number"&&a.is_active=="1")?(r(),l("tr",it,[t("td",null,e((w=i.$page.props.setting.authentication_field.find(a=>a.name=="phone_number"))==null?void 0:w.translate),1),n[11]||(n[11]=t("td",null,":",-1)),t("td",null,e(s.transaction.user.student&&s.transaction.user.student.phone_number?s.transaction.user.student.phone_number:"-"),1)])):o("",!0),n[27]||(n[27]=t("tr",null,[t("td",{colspan:"3"},"\xA0")],-1)),n[28]||(n[28]=t("tr",null,[t("th",{colspan:"3"},"Detail Transaksi")],-1)),t("tr",null,[n[12]||(n[12]=t("td",null,"Kode Transaksi",-1)),n[13]||(n[13]=t("td",null,":",-1)),t("td",null,e(s.transaction.code),1)]),t("tr",null,[n[14]||(n[14]=t("td",null,"Tanggal Transaksi",-1)),n[15]||(n[15]=t("td",null,":",-1)),t("td",null,e(s.transaction.created_at),1)]),s.transaction.category?(r(),l("tr",lt,[n[16]||(n[16]=t("td",null,"Kategori Peminatan",-1)),n[17]||(n[17]=t("td",null,":",-1)),t("td",null,[t("span",rt,e(s.transaction.category.name),1)])])):o("",!0),t("tr",null,[n[18]||(n[18]=t("td",null,"Deskripsi Transaksi",-1)),n[19]||(n[19]=t("td",null,":",-1)),t("td",null,e(s.transaction.description),1)]),t("tr",null,[n[20]||(n[20]=t("td",null,"Metode Pembayaran",-1)),n[21]||(n[21]=t("td",null,":",-1)),t("td",null,[s.transaction.payment_method=="account_balance"?(r(),l("span",ot,"Saldo Akun")):o("",!0),s.transaction.payment_method=="manual_transfer"?(r(),l("span",dt,"Transfer Manual (Konfirmasi Pembayaran)")):o("",!0),s.transaction.payment_method=="automatic_transfer_midtrans"?(r(),l("span",ut,"Transfer Otomatis")):o("",!0),s.transaction.payment_method=="not_payment_method"?(r(),l("span",mt,"Tanpa Metode Pembayaran")):o("",!0)])]),t("tr",null,[n[22]||(n[22]=t("td",null,"Total Transaksi",-1)),n[23]||(n[23]=t("td",null,":",-1)),t("td",null,e(u.formatPrice(s.transaction.total_payment)),1)]),t("tr",null,[n[24]||(n[24]=t("td",null,"Status Transaksi",-1)),n[25]||(n[25]=t("td",null,":",-1)),t("td",null,[s.transaction.transaction_status=="pending"?(r(),l("span",gt,"Pending - Belum melakukan pembayaran")):o("",!0),s.transaction.transaction_status=="paid"?(r(),l("span",bt,"Telah melakukan pembayaran")):o("",!0),s.transaction.transaction_status=="failed"?(r(),l("span",ft,"Transaksi Gagal")):o("",!0),s.transaction.transaction_status=="done"?(r(),l("span",pt,"Transaksi Selesai")):o("",!0),s.transaction.transaction_status=="expired"?(r(),l("span",yt,"Transaksi Kadaluarsa")):o("",!0)])])]),s.transaction.payment_method=="manual_transfer"&&s.transaction.payment_confirmation?(r(),l("tbody",kt,[n[39]||(n[39]=t("tr",null,[t("td",{colspan:"3"},"\xA0")],-1)),n[40]||(n[40]=t("tr",null,[t("th",{colspan:"3"},"Data Konfirmasi Pembayaran")],-1)),t("tr",null,[n[29]||(n[29]=t("td",null,"Nama Pengirim Transfer",-1)),n[30]||(n[30]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.rekening_name),1)]),t("tr",null,[n[31]||(n[31]=t("td",null,"Di Transfer Ke",-1)),n[32]||(n[32]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.bank.bank_name+" - "+s.transaction.payment_confirmation.bank.rekening_number+" - "+s.transaction.payment_confirmation.bank.rekening_name),1)]),t("tr",null,[n[33]||(n[33]=t("td",null,"Tanggal Transfer",-1)),n[34]||(n[34]=t("td",null,":",-1)),t("td",null,e(s.transaction.payment_confirmation.transfer_date),1)]),t("tr",null,[n[35]||(n[35]=t("td",null,"Jumlah Transfer",-1)),n[36]||(n[36]=t("td",null,":",-1)),t("td",null,e(u.formatPrice(s.transaction.payment_confirmation.total_payment)),1)]),t("tr",null,[n[37]||(n[37]=t("td",null,"Bukti Transfer",-1)),n[38]||(n[38]=t("td",null,":",-1)),t("td",null,[t("img",{src:"/storage/upload_files/payment_confirmation/"+s.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,vt)])]),n[41]||(n[41]=t("tr",null,[t("th",{colspan:"3"},"\xA0")],-1))])):o("",!0),s.transaction.transaction_status=="pending"||s.transaction.transaction_status=="paid"?(r(),l("tbody",_t,[t("tr",null,[n[43]||(n[43]=t("td",null,"Ubah Status Transaksi",-1)),n[44]||(n[44]=t("td",null,":",-1)),t("td",null,[j(t("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=a=>d.form.transaction_status=a)},[...n[42]||(n[42]=[B('<option value="">[ Pilih Status Transaksi ]</option><option value="pending">Pending</option><option value="paid">Paid</option><option value="done">Done</option><option value="failed">Failed</option>',5)])],512),[[A,d.form.transaction_status]])])]),n[45]||(n[45]=t("tr",null,[t("td",{colspan:"3"},[t("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Submit")])],-1))])):o("",!0)])],32)])])])])])],64)}const Bt=I(J,[["render",ct]]);export{Bt as default};
