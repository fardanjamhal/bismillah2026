import{L as O}from"./Layout.0d76d07d.js";import{L as E,H as J,a1 as U,c as i,a as b,w as p,b as e,f as o,t as s,F as u,g as m,h as y,i as W,k as h,j as V,o as l,d as k}from"./app.491e8c84.js";import{S as _}from"./sweetalert2.all.54f008f8.js";import{P as x}from"./Pagination.ace2954f.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";const G={layout:O,components:{Link:E,Head:J,Pagination:x},props:{user:Object,grades:Object,histories:Object,verificationLink:String,loginSessions:Object,errors:Object,session:Object},setup(a){return{deleteMembership:c=>{_.fire({title:"Apakah Anda yakin ?",text:"Menghapusnya dapat menyebabkan hilangnya akses peserta ke membership.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(d=>{d.isConfirmed&&(y.Inertia.delete(`/admin/users/${a.user.id}/user-member-categories/${c}`),_.fire({title:"Deleted!",text:"Membership Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},deleteUserAccess:c=>{_.fire({title:"Apakah Anda yakin ?",text:"Menghapusnya dapat menyebabkan hilangnya akses pada latihan soal dan tryout.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(d=>{d.isConfirmed&&(y.Inertia.delete(`/admin/users/${a.user.id}/user-access/${c}`),_.fire({title:"Deleted!",text:"Akses Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},deleteLoginSession:c=>{_.fire({title:"Apakah Anda yakin ?",text:"Menghapus data ini dapat menyebabkan akun Anda keluar dari perangkat yang sedang digunakan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(d=>{d.isConfirmed&&(y.Inertia.delete(`/admin/users/${a.user.id}/sessions/${c}`),_.fire({title:"Deleted!",text:"Perangkat Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})}}},methods:{formatPrice(a){return"Rp."+(a/1).toFixed().replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(a){return U(a).format("DD MMMM YYYY")},formatDateLoginSession:function(a){return U.unix(a).format("DD-MM-YYYY HH:mm:ss")}}},q={class:"page-wrapper"},z={class:"page-content"},Q=W('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">User</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Data User</li></ol></nav></div></div>',1),X={key:0,class:"alert alert-danger border-0"},Z=e("i",{class:"fa fa-exclamation-triangle"},null,-1),$=h(),ee=["innerHTML"],te={key:1,class:"alert alert-warning border-0"},se=e("i",{class:"fa fa-exclamation-triangle"},null,-1),ne=h(),ae=["innerHTML"],ie={key:2,class:"alert alert-success border-0"},le=e("i",{class:"fa fa-exclamation-triangle"},null,-1),oe=h(),re=["innerHTML"],de={class:"card border-top border-0 border-3 border-primary"},ce={class:"card-body"},ue={class:"d-lg-flex align-items-center"},_e={class:"ms-auto"},he=h("Kembali"),me={class:"table-responsive"},ge={class:"table mb-0"},be={key:0},pe=e("td",null,":",-1),fe={key:1},ye=e("td",null,":",-1),ke={key:2},ve=e("td",null,":",-1),Me={key:3},Ae=e("td",null,":",-1),Te=e("th",null,"Level",-1),Ce=e("td",{width:"10"},":",-1),Le=e("th",null,"Tipe Member",-1),we=e("td",null,":",-1),De=e("th",null,"Created at",-1),Be=e("td",null,":",-1),Se=e("th",null,"Saldo Akun",-1),Pe=e("td",null,":",-1),He=e("th",null,"Status Akun",-1),Ne=e("td",null,":",-1),je={key:0,class:"badge bg-success"},Ye={key:1,class:"badge bg-danger"},Ke={key:4},Re=e("th",null,"Kirim Verifikasi Akun",-1),Ue=e("td",null,":",-1),Ve=h("Klik Untuk Mengirim Link Verifikasi"),Ie={key:5},Oe=e("th",null,"Kirim Reminder Aktivasi",-1),Ee=e("td",null,":",-1),Je=h("Kirim Reminder Aktivasi Akun"),We={key:6},xe=e("th",null,"Referrer / Affiliator",-1),Fe=e("td",null,":",-1),Ge=e("tr",null,[e("th",{colspan:"3"},"\xA0")],-1),qe=e("tr",null,[e("th",{colspan:"3"},[e("h6",null,"INFORMASI LAINNYA")])],-1),ze={key:7},Qe=e("td",null,":",-1),Xe={key:8},Ze=e("td",null,":",-1),$e={key:9},et=e("td",null,":",-1),tt={key:10},st=e("td",null,":",-1),nt={key:11},at=e("td",null,":",-1),it={key:12},lt=e("td",null,":",-1),ot={key:13},rt=e("td",null,":",-1),dt={class:"card border-top border-0 border-3 border-primary"},ct=e("div",{class:"card-header"},[e("h6",{class:"card-title mb-0"},"Riwayat Login Perangkat")],-1),ut={class:"card-body"},_t={class:"table mb-0"},ht=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"No"),e("th",null,"IP Address"),e("th",null,"Perangkat"),e("th",null,"Aktivitas Terakhir"),e("th",null,"Action")])],-1),mt={key:0},gt=e("td",{colspan:"5",align:"center"},"Tidak Ada Riwayat Login Perangkat",-1),bt=[gt],pt={class:"d-flex order-actions"},ft=["onClick"],yt=e("i",{class:"bx bxs-trash"},null,-1),kt=[yt],vt={class:"card border-top border-0 border-3 border-primary"},Mt=e("div",{class:"card-header"},[e("h6",{class:"card-title mb-0"},"Akses Kategori Member Aktif (Jika Sistem Pembelian Dengan Membership)")],-1),At={class:"card-body"},Tt={class:"table-responsive"},Ct={class:"table mb-0"},Lt=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Kategori"),e("th",null,"Kategori Member"),e("th",null,"Tanggal Kedaluarsa"),e("th",null,"Action")])],-1),wt={class:"badge bg-primary"},Dt={class:"badge bg-success"},Bt={class:"d-flex order-actions"},St=["onClick"],Pt=e("i",{class:"bx bxs-trash"},null,-1),Ht=[Pt],Nt={key:0,align:"center",colspan:"5"},jt={class:"card border-top border-0 border-3 border-primary"},Yt=e("div",{class:"card-header"},[e("h6",{class:"card-title mb-0"},"Akses User Jika Pembelian Per Item")],-1),Kt={class:"card-body"},Rt={class:"table-responsive"},Ut={class:"table mb-0"},Vt=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"No"),e("th",null,"Peminatan"),e("th",null,"Type"),e("th",null,"Judul"),e("th",null,"Tanggal Dibuat Akses"),e("th",null,"Action")])],-1),It={key:0},Ot=e("td",{colspan:"6",align:"center"},"Tidak Ada Akses Soal atau Tryout",-1),Et=[Ot],Jt={class:"badge bg-primary"},Wt={class:"d-flex order-actions"},xt=["onClick"],Ft=e("i",{class:"bx bxs-trash"},null,-1),Gt=[Ft],qt={class:"card border-top border-0 border-3 border-primary"},zt=e("div",{class:"card-header"},[e("h6",{class:"card-title mb-0"},"Riwayat Latihan Soal")],-1),Qt={class:"card-body"},Xt={class:"table-responsive"},Zt={class:"table mb-0"},$t=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"No"),e("th",null,"Peminatan"),e("th",null,"Kategori Mata Pelajaran"),e("th",null,"Mata Pelajaran"),e("th",null,"Judul Tryout"),e("th",null,"Waktu Mulai"),e("th",null,"Waktu Selesai")])],-1),es={key:0},ts=e("td",{colspan:"8",align:"center"},"Tidak Ada Riwayat Latihan Soal",-1),ss=[ts],ns={class:"badge bg-primary"},as={class:"card border-top border-0 border-3 border-primary"},is=e("div",{class:"card-header"},[e("h6",{class:"card-title mb-0"},"Riwayat Tryout")],-1),ls={class:"card-body"},os={class:"table-responsive"},rs={class:"table mb-0"},ds=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"No"),e("th",null,"Peminatan"),e("th",null,"Kategori"),e("th",null,"Judul Tryout"),e("th",null,"Tanggal Pengerjaan")])],-1),cs={key:0},us=e("td",{colspan:"8",align:"center"},"Tidak Ada Riwayat Tryout",-1),_s=[us],hs={class:"badge bg-primary"},ms={class:"badge bg-primary"};function gs(a,v,n,g,c,d){var M,A,T,C,L,w,D,B,S,P,H,N,j,Y,K;const I=V("Head"),f=V("Link");return l(),i(u,null,[b(I,null,{default:p(()=>{var t;return[e("title",null,s((t=a.$page.props.setting.app_name)!=null?t:"Atur Setting Terlebih Dahulu")+" - Data User",1)]}),_:1}),e("div",q,[e("div",z,[Q,a.$page.props.session.error?(l(),i("div",X,[Z,$,e("div",{innerHTML:a.$page.props.session.error},null,8,ee)])):o("",!0),a.$page.props.session.warning?(l(),i("div",te,[se,ne,e("div",{innerHTML:a.$page.props.session.warning},null,8,ae)])):o("",!0),a.$page.props.session.success?(l(),i("div",ie,[le,oe,e("div",{innerHTML:a.$page.props.session.success},null,8,re)])):o("",!0),e("div",de,[e("div",ce,[e("div",ue,[e("div",_e,[b(f,{href:"/admin/users",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:p(()=>[he]),_:1})])]),e("div",me,[e("table",ge,[e("tbody",null,[a.$page.props.setting.authentication_field.some(t=>t.name=="code"&&t.is_active=="1")?(l(),i("tr",be,[e("th",null,s((M=a.$page.props.setting.authentication_field.find(t=>t.name=="code"))==null?void 0:M.translate),1),pe,e("td",null,s((A=n.user.code)!=null?A:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="name"&&t.is_active=="1")?(l(),i("tr",fe,[e("th",null,s((T=a.$page.props.setting.authentication_field.find(t=>t.name=="name"))==null?void 0:T.translate),1),ye,e("td",null,s((C=n.user.name)!=null?C:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="email"&&t.is_active=="1")?(l(),i("tr",ke,[e("th",null,s((L=a.$page.props.setting.authentication_field.find(t=>t.name=="email"))==null?void 0:L.translate),1),ve,e("td",null,s((w=n.user.email)!=null?w:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="username"&&t.is_active=="1")?(l(),i("tr",Me,[e("th",null,s((D=a.$page.props.setting.authentication_field.find(t=>t.name=="username"))==null?void 0:D.translate),1),Ae,e("td",null,s((B=n.user.username)!=null?B:"-"),1)])):o("",!0),e("tr",null,[Te,Ce,e("td",null,s(n.user.level==1?"Admin":"User"),1)]),e("tr",null,[Le,we,e("td",null,s(n.user.member_type==1?"Member Gratis Tryout":"Member Tryout Berbayar"),1)]),e("tr",null,[De,Be,e("td",null,s(n.user.created_at),1)]),e("tr",null,[Se,Pe,e("td",null,s(d.formatPrice(n.user.account_balance)),1)]),e("tr",null,[He,Ne,e("td",null,[n.user.is_active==1?(l(),i("span",je,"Active")):(l(),i("span",Ye,"Non-active"))])]),n.user.is_active==0&&n.user.student?(l(),i("tr",Ke,[Re,Ue,e("td",null,[b(f,{href:`/admin/users/${n.user.id}/send-activation-link`,class:"btn btn-success btn-sm"},{default:p(()=>[Ve]),_:1},8,["href"])])])):o("",!0),n.user.is_active==0&&n.user.student?(l(),i("tr",Ie,[Oe,Ee,e("td",null,[b(f,{href:`/admin/users/${n.user.id}/activation-reminder`,class:"btn btn-success btn-sm"},{default:p(()=>[Je]),_:1},8,["href"])])])):o("",!0),n.user.referrer?(l(),i("tr",We,[xe,Fe,e("td",null,s(n.user.referrer?n.user.referrer.name+" - "+n.user.referrer.email:""),1)])):o("",!0),Ge,qe,a.$page.props.setting.authentication_field.some(t=>t.name=="province_id"&&t.is_active=="1")?(l(),i("tr",ze,[e("th",null,s((S=a.$page.props.setting.authentication_field.find(t=>t.name=="province_id"))==null?void 0:S.translate),1),Qe,e("td",null,s(n.user.student&&n.user.student.province?n.user.student.province.name:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="city_id"&&t.is_active=="1")?(l(),i("tr",Xe,[e("th",null,s((P=a.$page.props.setting.authentication_field.find(t=>t.name=="city_id"))==null?void 0:P.translate),1),Ze,e("td",null,s(n.user.student&&n.user.student.city?n.user.student.city.name:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="district_id"&&t.is_active=="1")?(l(),i("tr",$e,[e("th",null,s((H=a.$page.props.setting.authentication_field.find(t=>t.name=="district_id"))==null?void 0:H.translate),1),et,e("td",null,s(n.user.student&&n.user.student.district?n.user.student.district.name:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="village_id"&&t.is_active=="1")?(l(),i("tr",tt,[e("th",null,s((N=a.$page.props.setting.authentication_field.find(t=>t.name=="village_id"))==null?void 0:N.translate),1),st,e("td",null,s(n.user.student&&n.user.student.village?n.user.student.village.name:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="address"&&t.is_active=="1")?(l(),i("tr",nt,[e("th",null,s((j=a.$page.props.setting.authentication_field.find(t=>t.name=="address"))==null?void 0:j.translate),1),at,e("td",null,s(n.user.student&&n.user.student.address?n.user.student.address:"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="gender"&&t.is_active=="1")?(l(),i("tr",it,[e("th",null,s((Y=a.$page.props.setting.authentication_field.find(t=>t.name=="gender"))==null?void 0:Y.translate),1),lt,e("td",null,s(n.user.student&&n.user.student.gender?n.user.student.gender=="M"?"Laki-laki":"Perempuan":"-"),1)])):o("",!0),a.$page.props.setting.authentication_field.some(t=>t.name=="phone_number"&&t.is_active=="1")?(l(),i("tr",ot,[e("th",null,s((K=a.$page.props.setting.authentication_field.find(t=>t.name=="phone_number"))==null?void 0:K.translate),1),rt,e("td",null,s(n.user.student&&n.user.student.phone_number?n.user.student.phone_number:"-"),1)])):o("",!0)])])])])]),e("div",dt,[ct,e("div",ut,[e("table",_t,[ht,e("tbody",null,[n.loginSessions.length?o("",!0):(l(),i("tr",mt,bt)),(l(!0),i(u,null,m(n.loginSessions,(t,r)=>(l(),i("tr",{key:r},[e("td",null,s(++r),1),e("td",null,s(t.ip_address),1),e("td",null,s(t.user_agent),1),e("td",null,s(d.formatDateLoginSession(t.last_activity)),1),e("td",null,[e("div",pt,[e("a",{href:"#",onClick:k(R=>g.deleteLoginSession(t.id),["prevent"]),class:"ms-1"},kt,8,ft)])])]))),128))])])])]),e("div",vt,[Mt,e("div",At,[e("div",Tt,[e("table",Ct,[Lt,e("tbody",null,[(l(!0),i(u,null,m(n.user.member_category_user,(t,r)=>(l(),i("tr",{key:r},[e("td",null,s(++r),1),e("td",null,[e("span",wt,s(t.category?t.category.name:""),1)]),e("td",null,[e("span",Dt,s(t.member_category?t.member_category.name:""),1)]),e("td",null,s(d.formatDate(t.expired_date)),1),e("td",null,[e("div",Bt,[e("a",{href:"#",onClick:k(R=>g.deleteMembership(t.id),["prevent"]),class:"ms-1"},Ht,8,St)])])]))),128)),e("tr",null,[n.user.member_category_user.length?o("",!0):(l(),i("td",Nt,"Data Tidak Tersedia"))])])])])])]),e("div",jt,[Yt,e("div",Kt,[e("div",Rt,[e("table",Ut,[Vt,e("tbody",null,[n.user.user_access.length?o("",!0):(l(),i("tr",It,Et)),(l(!0),i(u,null,m(n.user.user_access,(t,r)=>(l(),i("tr",{key:r},[e("td",null,s(++r),1),e("td",null,[e("span",Jt,s(t.access.category?t.access.category.name:""),1)]),e("td",null,s(t.access_type=="App\\Models\\Exam\\Exam"?"Latihan Soal":t.access_type=="App\\Models\\Exam\\ExamGroup"?"Tryout":t.access_type=="App\\Models\\Material\\Module"?"Modul / Materi":t.access_type=="App\\Models\\Material\\VideoModule"?"Video Pembelajaran":t.access_type=="App\\Models\\Course\\Course"?"Course":""),1),e("td",null,s(t.access.title),1),e("td",null,s(a.formatDateWithTime(t.access.created_at)),1),e("td",null,[e("div",Wt,[e("a",{href:"#",onClick:k(R=>g.deleteUserAccess(t.id),["prevent"]),class:"ms-1"},Gt,8,xt)])])]))),128))])])])])]),e("div",qt,[zt,e("div",Qt,[e("div",Xt,[e("table",Zt,[$t,e("tbody",null,[n.grades.length?o("",!0):(l(),i("tr",es,ss)),(l(!0),i(u,null,m(n.grades,(t,r)=>(l(),i("tr",{key:r},[e("td",null,s(++r),1),e("td",null,[e("span",ns,s(t.category.name),1)]),e("td",null,s(t.lesson_category.name),1),e("td",null,s(t.lesson.name),1),e("td",null,s(t.exam.title),1),e("td",null,s(a.formatDateWithTime(t.start_time)),1),e("td",null,s(a.formatDateWithTime(t.end_time)),1)]))),128))])])])])]),e("div",as,[is,e("div",ls,[e("div",os,[e("table",rs,[ds,e("tbody",null,[n.histories.length?o("",!0):(l(),i("tr",cs,_s)),(l(!0),i(u,null,m(n.histories,(t,r)=>(l(),i("tr",{key:r},[e("td",null,s(++r),1),e("td",null,[e("span",hs,s(t.exam_group.category.name),1)]),e("td",null,[e("span",ms,s(t.exam_group.lesson_category.name),1)]),e("td",null,s(t.exam_group.title),1),e("td",null,s(d.formatDate(t.created_at)),1)]))),128))])])])])])])])],64)}const vs=F(G,[["render",gs]]);export{vs as default};
