import{L as O}from"./Layout.48c4e186.js";import{L as E,H as J,G as U,c as i,a as f,w as y,b as t,d as W,k as g,g as d,t as s,F as b,h as c,i as v,j as V,o as r,e as _}from"./app.c75ce23b.js";import{S as h}from"./sweetalert2.esm.all.089855d2.js";import{P as x}from"./Pagination.2403c559.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";const G={layout:O,components:{Link:E,Head:J,Pagination:x},props:{user:Object,grades:Object,histories:Object,verificationLink:String,loginSessions:Object,errors:Object,session:Object},setup(l){return{deleteMembership:m=>{h.fire({title:"Apakah Anda yakin ?",text:"Menghapusnya dapat menyebabkan hilangnya akses peserta ke membership.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(u=>{u.isConfirmed&&(v.Inertia.delete(`/admin/users/${l.user.id}/user-member-categories/${m}`),h.fire({title:"Deleted!",text:"Membership Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},deleteUserAccess:m=>{h.fire({title:"Apakah Anda yakin ?",text:"Menghapusnya dapat menyebabkan hilangnya akses pada latihan soal dan tryout.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(u=>{u.isConfirmed&&(v.Inertia.delete(`/admin/users/${l.user.id}/user-access/${m}`),h.fire({title:"Deleted!",text:"Akses Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})},deleteLoginSession:m=>{h.fire({title:"Apakah Anda yakin ?",text:"Menghapus data ini dapat menyebabkan akun Anda keluar dari perangkat yang sedang digunakan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus"}).then(u=>{u.isConfirmed&&(v.Inertia.delete(`/admin/users/${l.user.id}/sessions/${m}`),h.fire({title:"Deleted!",text:"Perangkat Berhasil Dihapus!.",icon:"success",timer:1e3,showConfirmButton:!1}))})}}},methods:{formatPrice(l){return"Rp."+(l/1).toFixed().replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},formatDate:function(l){return U(l).format("DD MMMM YYYY")},formatDateLoginSession:function(l){return U.unix(l).format("DD-MM-YYYY HH:mm:ss")}}},q={class:"page-wrapper"},z={class:"page-content"},Q={key:0,class:"alert alert-danger border-0"},X=["innerHTML"],Z={key:1,class:"alert alert-warning border-0"},$=["innerHTML"],tt={key:2,class:"alert alert-success border-0"},et=["innerHTML"],nt={class:"card border-top border-0 border-3 border-primary"},st={class:"card-body"},at={class:"d-lg-flex align-items-center"},lt={class:"ms-auto"},it={class:"table-responsive"},rt={class:"table mb-0"},dt={key:0},ot={key:1},ut={key:2},mt={key:3},gt={key:0,class:"badge bg-success"},bt={key:1,class:"badge bg-danger"},ht={key:4},ct={key:5},pt={key:6},ft={key:7},yt={key:8},kt={key:9},vt={key:10},_t={key:11},Mt={key:12},At={key:13},Tt={class:"card border-top border-0 border-3 border-primary"},Ct={class:"card-body"},Lt={class:"table mb-0"},wt={key:0},Dt={class:"d-flex order-actions"},Bt=["onClick"],St={class:"card border-top border-0 border-3 border-primary"},Pt={class:"card-body"},Ht={class:"table-responsive"},Nt={class:"table mb-0"},jt={class:"badge bg-primary"},Yt={class:"badge bg-success"},Kt={class:"d-flex order-actions"},Rt=["onClick"],Ut={key:0,align:"center",colspan:"5"},Vt={class:"card border-top border-0 border-3 border-primary"},It={class:"card-body"},Ot={class:"table-responsive"},Et={class:"table mb-0"},Jt={key:0},Wt={class:"badge bg-primary"},xt={class:"d-flex order-actions"},Ft=["onClick"],Gt={class:"card border-top border-0 border-3 border-primary"},qt={class:"card-body"},zt={class:"table-responsive"},Qt={class:"table mb-0"},Xt={key:0},Zt={class:"badge bg-primary"},$t={class:"card border-top border-0 border-3 border-primary"},te={class:"card-body"},ee={class:"table-responsive"},ne={class:"table mb-0"},se={key:0},ae={class:"badge bg-primary"},le={class:"badge bg-primary"};function ie(l,e,a,p,m,u){var M,A,T,C,L,w,D,B,S,P,H,N,j,Y,K;const I=V("Head"),k=V("Link");return r(),i(b,null,[f(I,null,{default:y(()=>{var n;return[t("title",null,s((n=l.$page.props.setting.app_name)!=null?n:"Atur Setting Terlebih Dahulu")+" - Data User",1)]}),_:1}),t("div",q,[t("div",z,[e[55]||(e[55]=W('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">User</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Data User</li></ol></nav></div></div>',1)),l.$page.props.session.error?(r(),i("div",Q,[e[0]||(e[0]=t("i",{class:"fa fa-exclamation-triangle"},null,-1)),e[1]||(e[1]=g()),t("div",{innerHTML:l.$page.props.session.error},null,8,X)])):d("",!0),l.$page.props.session.warning?(r(),i("div",Z,[e[2]||(e[2]=t("i",{class:"fa fa-exclamation-triangle"},null,-1)),e[3]||(e[3]=g()),t("div",{innerHTML:l.$page.props.session.warning},null,8,$)])):d("",!0),l.$page.props.session.success?(r(),i("div",tt,[e[4]||(e[4]=t("i",{class:"fa fa-exclamation-triangle"},null,-1)),e[5]||(e[5]=g()),t("div",{innerHTML:l.$page.props.session.success},null,8,et)])):d("",!0),t("div",nt,[t("div",st,[t("div",at,[t("div",lt,[f(k,{href:"/admin/users",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:y(()=>[...e[6]||(e[6]=[g("Kembali",-1)])]),_:1})])]),t("div",it,[t("table",rt,[t("tbody",null,[l.$page.props.setting.authentication_field.some(n=>n.name=="code"&&n.is_active=="1")?(r(),i("tr",dt,[t("th",null,s((M=l.$page.props.setting.authentication_field.find(n=>n.name=="code"))==null?void 0:M.translate),1),e[7]||(e[7]=t("td",null,":",-1)),t("td",null,s((A=a.user.code)!=null?A:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="name"&&n.is_active=="1")?(r(),i("tr",ot,[t("th",null,s((T=l.$page.props.setting.authentication_field.find(n=>n.name=="name"))==null?void 0:T.translate),1),e[8]||(e[8]=t("td",null,":",-1)),t("td",null,s((C=a.user.name)!=null?C:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="email"&&n.is_active=="1")?(r(),i("tr",ut,[t("th",null,s((L=l.$page.props.setting.authentication_field.find(n=>n.name=="email"))==null?void 0:L.translate),1),e[9]||(e[9]=t("td",null,":",-1)),t("td",null,s((w=a.user.email)!=null?w:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="username"&&n.is_active=="1")?(r(),i("tr",mt,[t("th",null,s((D=l.$page.props.setting.authentication_field.find(n=>n.name=="username"))==null?void 0:D.translate),1),e[10]||(e[10]=t("td",null,":",-1)),t("td",null,s((B=a.user.username)!=null?B:"-"),1)])):d("",!0),t("tr",null,[e[11]||(e[11]=t("th",null,"Level",-1)),e[12]||(e[12]=t("td",{width:"10"},":",-1)),t("td",null,s(a.user.level==1?"Admin":"User"),1)]),t("tr",null,[e[13]||(e[13]=t("th",null,"Tipe Member",-1)),e[14]||(e[14]=t("td",null,":",-1)),t("td",null,s(a.user.member_type==1?"Member Gratis Tryout":"Member Tryout Berbayar"),1)]),t("tr",null,[e[15]||(e[15]=t("th",null,"Created at",-1)),e[16]||(e[16]=t("td",null,":",-1)),t("td",null,s(a.user.created_at),1)]),t("tr",null,[e[17]||(e[17]=t("th",null,"Saldo Akun",-1)),e[18]||(e[18]=t("td",null,":",-1)),t("td",null,s(u.formatPrice(a.user.account_balance)),1)]),t("tr",null,[e[19]||(e[19]=t("th",null,"Status Akun",-1)),e[20]||(e[20]=t("td",null,":",-1)),t("td",null,[a.user.is_active==1?(r(),i("span",gt,"Active")):(r(),i("span",bt,"Non-active"))])]),a.user.is_active==0&&a.user.student?(r(),i("tr",ht,[e[22]||(e[22]=t("th",null,"Kirim Verifikasi Akun",-1)),e[23]||(e[23]=t("td",null,":",-1)),t("td",null,[f(k,{href:`/admin/users/${a.user.id}/send-activation-link`,class:"btn btn-success btn-sm"},{default:y(()=>[...e[21]||(e[21]=[g("Klik Untuk Mengirim Link Verifikasi",-1)])]),_:1},8,["href"])])])):d("",!0),a.user.is_active==0&&a.user.student?(r(),i("tr",ct,[e[25]||(e[25]=t("th",null,"Kirim Reminder Aktivasi",-1)),e[26]||(e[26]=t("td",null,":",-1)),t("td",null,[f(k,{href:`/admin/users/${a.user.id}/activation-reminder`,class:"btn btn-success btn-sm"},{default:y(()=>[...e[24]||(e[24]=[g("Kirim Reminder Aktivasi Akun",-1)])]),_:1},8,["href"])])])):d("",!0),a.user.referrer?(r(),i("tr",pt,[e[27]||(e[27]=t("th",null,"Referrer / Affiliator",-1)),e[28]||(e[28]=t("td",null,":",-1)),t("td",null,s(a.user.referrer?a.user.referrer.name+" - "+a.user.referrer.email:""),1)])):d("",!0),e[36]||(e[36]=t("tr",null,[t("th",{colspan:"3"},"\xA0")],-1)),e[37]||(e[37]=t("tr",null,[t("th",{colspan:"3"},[t("h6",null,"INFORMASI LAINNYA")])],-1)),l.$page.props.setting.authentication_field.some(n=>n.name=="province_id"&&n.is_active=="1")?(r(),i("tr",ft,[t("th",null,s((S=l.$page.props.setting.authentication_field.find(n=>n.name=="province_id"))==null?void 0:S.translate),1),e[29]||(e[29]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.province?a.user.student.province.name:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="city_id"&&n.is_active=="1")?(r(),i("tr",yt,[t("th",null,s((P=l.$page.props.setting.authentication_field.find(n=>n.name=="city_id"))==null?void 0:P.translate),1),e[30]||(e[30]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.city?a.user.student.city.name:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="district_id"&&n.is_active=="1")?(r(),i("tr",kt,[t("th",null,s((H=l.$page.props.setting.authentication_field.find(n=>n.name=="district_id"))==null?void 0:H.translate),1),e[31]||(e[31]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.district?a.user.student.district.name:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="village_id"&&n.is_active=="1")?(r(),i("tr",vt,[t("th",null,s((N=l.$page.props.setting.authentication_field.find(n=>n.name=="village_id"))==null?void 0:N.translate),1),e[32]||(e[32]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.village?a.user.student.village.name:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="address"&&n.is_active=="1")?(r(),i("tr",_t,[t("th",null,s((j=l.$page.props.setting.authentication_field.find(n=>n.name=="address"))==null?void 0:j.translate),1),e[33]||(e[33]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.address?a.user.student.address:"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="gender"&&n.is_active=="1")?(r(),i("tr",Mt,[t("th",null,s((Y=l.$page.props.setting.authentication_field.find(n=>n.name=="gender"))==null?void 0:Y.translate),1),e[34]||(e[34]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.gender?a.user.student.gender=="M"?"Laki-laki":"Perempuan":"-"),1)])):d("",!0),l.$page.props.setting.authentication_field.some(n=>n.name=="phone_number"&&n.is_active=="1")?(r(),i("tr",At,[t("th",null,s((K=l.$page.props.setting.authentication_field.find(n=>n.name=="phone_number"))==null?void 0:K.translate),1),e[35]||(e[35]=t("td",null,":",-1)),t("td",null,s(a.user.student&&a.user.student.phone_number?a.user.student.phone_number:"-"),1)])):d("",!0)])])])])]),t("div",Tt,[e[41]||(e[41]=t("div",{class:"card-header"},[t("h6",{class:"card-title mb-0"},"Riwayat Login Perangkat")],-1)),t("div",Ct,[t("table",Lt,[e[40]||(e[40]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"IP Address"),t("th",null,"Perangkat"),t("th",null,"Aktivitas Terakhir"),t("th",null,"Action")])],-1)),t("tbody",null,[a.loginSessions.length?d("",!0):(r(),i("tr",wt,[...e[38]||(e[38]=[t("td",{colspan:"5",align:"center"},"Tidak Ada Riwayat Login Perangkat",-1)])])),(r(!0),i(b,null,c(a.loginSessions,(n,o)=>(r(),i("tr",{key:o},[t("td",null,s(++o),1),t("td",null,s(n.ip_address),1),t("td",null,s(n.user_agent),1),t("td",null,s(u.formatDateLoginSession(n.last_activity)),1),t("td",null,[t("div",Dt,[t("a",{href:"#",onClick:_(R=>p.deleteLoginSession(n.id),["prevent"]),class:"ms-1"},[...e[39]||(e[39]=[t("i",{class:"bx bxs-trash"},null,-1)])],8,Bt)])])]))),128))])])])]),t("div",St,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h6",{class:"card-title mb-0"},"Akses Kategori Member Aktif (Jika Sistem Pembelian Dengan Membership)")],-1)),t("div",Pt,[t("div",Ht,[t("table",Nt,[e[43]||(e[43]=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Kategori"),t("th",null,"Kategori Member"),t("th",null,"Tanggal Kedaluarsa"),t("th",null,"Action")])],-1)),t("tbody",null,[(r(!0),i(b,null,c(a.user.member_category_user,(n,o)=>(r(),i("tr",{key:o},[t("td",null,s(++o),1),t("td",null,[t("span",jt,s(n.category?n.category.name:""),1)]),t("td",null,[t("span",Yt,s(n.member_category?n.member_category.name:""),1)]),t("td",null,s(u.formatDate(n.expired_date)),1),t("td",null,[t("div",Kt,[t("a",{href:"#",onClick:_(R=>p.deleteMembership(n.id),["prevent"]),class:"ms-1"},[...e[42]||(e[42]=[t("i",{class:"bx bxs-trash"},null,-1)])],8,Rt)])])]))),128)),t("tr",null,[a.user.member_category_user.length?d("",!0):(r(),i("td",Ut,"Data Tidak Tersedia"))])])])])])]),t("div",Vt,[e[48]||(e[48]=t("div",{class:"card-header"},[t("h6",{class:"card-title mb-0"},"Akses User Jika Pembelian Per Item")],-1)),t("div",It,[t("div",Ot,[t("table",Et,[e[47]||(e[47]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"Peminatan"),t("th",null,"Type"),t("th",null,"Judul"),t("th",null,"Tanggal Dibuat Akses"),t("th",null,"Action")])],-1)),t("tbody",null,[a.user.user_access.length?d("",!0):(r(),i("tr",Jt,[...e[45]||(e[45]=[t("td",{colspan:"6",align:"center"},"Tidak Ada Akses Soal atau Tryout",-1)])])),(r(!0),i(b,null,c(a.user.user_access,(n,o)=>(r(),i("tr",{key:o},[t("td",null,s(++o),1),t("td",null,[t("span",Wt,s(n.access.category?n.access.category.name:""),1)]),t("td",null,s(n.access_type=="App\\Models\\Exam\\Exam"?"Latihan Soal":n.access_type=="App\\Models\\Exam\\ExamGroup"?"Tryout":n.access_type=="App\\Models\\Material\\Module"?"Modul / Materi":n.access_type=="App\\Models\\Material\\VideoModule"?"Video Pembelajaran":n.access_type=="App\\Models\\Course\\Course"?"Course":""),1),t("td",null,s(n.access.title),1),t("td",null,s(l.formatDateWithTime(n.access.created_at)),1),t("td",null,[t("div",xt,[t("a",{href:"#",onClick:_(R=>p.deleteUserAccess(n.id),["prevent"]),class:"ms-1"},[...e[46]||(e[46]=[t("i",{class:"bx bxs-trash"},null,-1)])],8,Ft)])])]))),128))])])])])]),t("div",Gt,[e[51]||(e[51]=t("div",{class:"card-header"},[t("h6",{class:"card-title mb-0"},"Riwayat Latihan Soal")],-1)),t("div",qt,[t("div",zt,[t("table",Qt,[e[50]||(e[50]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"Peminatan"),t("th",null,"Kategori Mata Pelajaran"),t("th",null,"Mata Pelajaran"),t("th",null,"Judul Tryout"),t("th",null,"Waktu Mulai"),t("th",null,"Waktu Selesai")])],-1)),t("tbody",null,[a.grades.length?d("",!0):(r(),i("tr",Xt,[...e[49]||(e[49]=[t("td",{colspan:"8",align:"center"},"Tidak Ada Riwayat Latihan Soal",-1)])])),(r(!0),i(b,null,c(a.grades,(n,o)=>(r(),i("tr",{key:o},[t("td",null,s(++o),1),t("td",null,[t("span",Zt,s(n.category.name),1)]),t("td",null,s(n.lesson_category.name),1),t("td",null,s(n.lesson.name),1),t("td",null,s(n.exam.title),1),t("td",null,s(l.formatDateWithTime(n.start_time)),1),t("td",null,s(l.formatDateWithTime(n.end_time)),1)]))),128))])])])])]),t("div",$t,[e[54]||(e[54]=t("div",{class:"card-header"},[t("h6",{class:"card-title mb-0"},"Riwayat Tryout")],-1)),t("div",te,[t("div",ee,[t("table",ne,[e[53]||(e[53]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"No"),t("th",null,"Peminatan"),t("th",null,"Kategori"),t("th",null,"Judul Tryout"),t("th",null,"Tanggal Pengerjaan")])],-1)),t("tbody",null,[a.histories.length?d("",!0):(r(),i("tr",se,[...e[52]||(e[52]=[t("td",{colspan:"8",align:"center"},"Tidak Ada Riwayat Tryout",-1)])])),(r(!0),i(b,null,c(a.histories,(n,o)=>(r(),i("tr",{key:o},[t("td",null,s(++o),1),t("td",null,[t("span",ae,s(n.exam_group.category.name),1)]),t("td",null,[t("span",le,s(n.exam_group.lesson_category.name),1)]),t("td",null,s(n.exam_group.title),1),t("td",null,s(u.formatDate(n.created_at)),1)]))),128))])])])])])])])],64)}const ge=F(G,[["render",ie]]);export{ge as default};
