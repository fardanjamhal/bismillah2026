import{L as y}from"./Layout.48c4e186.js";import{L as p,H as P,m as D,c as n,a as m,w,b as l,d as S,e as j,k as f,g as e,t as i,f as B,p as T,n as b,F as x,i as H,j as g,o as s}from"./app.c75ce23b.js";import{S as L}from"./sweetalert2.esm.all.089855d2.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";const K={layout:y,components:{Link:p,Head:P},props:{errors:Object,withdrawal:Object},setup(r){const t=D({status:r.withdrawal.status,file:""});return{form:t,submit:()=>{H.Inertia.post(`/admin/affiliates/withdrawals/${r.withdrawal.id}`,{forceFormData:!0,_method:"put",status:t.status,file:t.file},{onSuccess:()=>{L.fire({title:"Success!",text:"Status Pengajuan Berhasil Diupdate!.",icon:"success",showConfirmButton:!1,timer:1e3})}})}}},methods:{formatPrice(r){return"Rp."+Math.floor(r).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}},N={class:"page-wrapper"},V={class:"page-content"},C={class:"card border-top border-0 border-3 border-primary"},h={class:"card-body"},A={class:"d-lg-flex align-items-center"},F={class:"ms-auto"},U={key:0,class:"alert alert-danger border-0"},W=["innerHTML"],E={class:"table-responsive"},I={class:"table mb-0"},O={key:0,class:"badge bg-warning"},z={key:1,class:"badge bg-danger"},J={key:2,class:"badge bg-success"},R={key:0},q={key:1},G=["src"],Q={key:2},X={key:0,class:"invalid-feedback"},Y={key:3},Z={key:0,class:"invalid-feedback"},_={key:4};function c(r,t,a,u,$,o){const v=g("Head"),k=g("Link");return s(),n(x,null,[m(v,null,{default:w(()=>{var d;return[l("title",null,i((d=r.$page.props.setting.app_name)!=null?d:"Atur Setting Terlebih Dahulu")+" - Detail Penarikan Komisi",1)]}),_:1}),l("div",N,[l("div",V,[t[36]||(t[36]=S('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Pengajuan Penarikan Komisi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Penarikan Komisi</li></ol></nav></div></div>',1)),l("div",C,[l("div",h,[l("div",A,[l("div",F,[m(k,{href:"/user/affiliates/withdrawals",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:w(()=>[...t[3]||(t[3]=[f("Kembali",-1)])]),_:1})])]),l("form",{onSubmit:t[2]||(t[2]=j((...d)=>u.submit&&u.submit(...d),["prevent"]))},[r.$page.props.session.error?(s(),n("div",U,[t[4]||(t[4]=l("i",{class:"fa fa-exclamation-triangle"},null,-1)),t[5]||(t[5]=f()),l("div",{innerHTML:r.$page.props.session.error},null,8,W)])):e("",!0),l("div",E,[l("table",I,[l("tbody",null,[t[33]||(t[33]=l("tr",null,[l("th",{colspan:"3"},"Biodata")],-1)),l("tr",null,[t[6]||(t[6]=l("td",null,"Nama",-1)),t[7]||(t[7]=l("td",{width:"10"},":",-1)),l("td",null,i(a.withdrawal.user?a.withdrawal.user.name:"-"),1)]),l("tr",null,[t[8]||(t[8]=l("td",null,"Email",-1)),t[9]||(t[9]=l("td",null,":",-1)),l("td",null,i(a.withdrawal.user?a.withdrawal.user.email:"-"),1)]),l("tr",null,[t[10]||(t[10]=l("td",null,"Username",-1)),t[11]||(t[11]=l("td",null,":",-1)),l("td",null,i(a.withdrawal.user?a.withdrawal.user.username:"-"),1)]),t[34]||(t[34]=l("tr",null,[l("th",{colspan:"3"},"\xA0")],-1)),t[35]||(t[35]=l("tr",null,[l("th",{colspan:"3"},"Pengajuan Penarikan")],-1)),l("tr",null,[t[12]||(t[12]=l("td",null,"Waktu Pengajuan",-1)),t[13]||(t[13]=l("td",null,":",-1)),l("td",null,i(r.formatDateWithTimeHourMinute(a.withdrawal.created_at)),1)]),l("tr",null,[t[14]||(t[14]=l("td",null,"Jumlah Penarikan Komisi",-1)),t[15]||(t[15]=l("td",null,":",-1)),l("td",null,i(o.formatPrice(a.withdrawal.total_withdrawal)),1)]),l("tr",null,[t[16]||(t[16]=l("td",null,"Biaya Admin Penarikan",-1)),t[17]||(t[17]=l("td",null,":",-1)),l("td",null,i(o.formatPrice(a.withdrawal.admin_fee)),1)]),l("tr",null,[t[18]||(t[18]=l("td",null,"Komisi Diterima",-1)),t[19]||(t[19]=l("td",null,":",-1)),l("td",null,i(o.formatPrice(a.withdrawal.total_paid)),1)]),l("tr",null,[t[20]||(t[20]=l("td",null,"Dikirim ke Bank",-1)),t[21]||(t[21]=l("td",null,":",-1)),l("td",null,i(a.withdrawal.user_bank.bank_name+" - "+a.withdrawal.user_bank.account_number+" - "+a.withdrawal.user_bank.account_name),1)]),l("tr",null,[l("td",null,"Status Pengajuan "+i(u.form.status),1),t[22]||(t[22]=l("td",null,":",-1)),l("td",null,[a.withdrawal.status=="pending"?(s(),n("span",O,"Pending")):e("",!0),a.withdrawal.status=="failed"?(s(),n("span",z,"Ditolak")):e("",!0),a.withdrawal.status=="approved"?(s(),n("span",J,"Disetujui")):e("",!0)])]),a.withdrawal.status=="approved"?(s(),n("tr",R,[t[23]||(t[23]=l("td",null,"Tanggal Disetujui",-1)),t[24]||(t[24]=l("td",null,":",-1)),l("td",null,i(a.withdrawal.date_approved?r.formatDateWithTimeHourMinute(a.withdrawal.date_approved):"-"),1)])):e("",!0),a.withdrawal.status=="approved"?(s(),n("tr",q,[t[25]||(t[25]=l("td",null,"Bukti Transfer",-1)),t[26]||(t[26]=l("td",null,":",-1)),l("td",null,[l("img",{src:"/storage/upload_files/withdrawal_payment_confirmation/"+a.withdrawal.file,style:{width:"300px"}},null,8,G)])])):e("",!0),a.withdrawal.status=="pending"?(s(),n("tr",Q,[t[28]||(t[28]=l("td",null,"Ubah Status Transaksi",-1)),t[29]||(t[29]=l("td",null,":",-1)),l("td",null,[B(l("select",{class:b(["form-control",{"is-invalid":a.errors.status}]),"onUpdate:modelValue":t[0]||(t[0]=d=>u.form.status=d)},[...t[27]||(t[27]=[l("option",{value:""},"[ Pilih Status Transaksi ]",-1),l("option",{value:"pending"},"Pending",-1),l("option",{value:"approved"},"Disetujui",-1),l("option",{value:"failed"},"Ditolak",-1)])],2),[[T,u.form.status]]),a.errors.status?(s(),n("div",X,i(a.errors.status),1)):e("",!0)])])):e("",!0),a.withdrawal.status=="pending"?(s(),n("tr",Y,[t[30]||(t[30]=l("td",null,"Bukti Transfer",-1)),t[31]||(t[31]=l("td",null,":",-1)),l("td",null,[l("input",{type:"file",class:b(["form-control",{"is-invalid":a.errors.file}]),onInput:t[1]||(t[1]=d=>u.form.file=d.target.files[0]),placeholder:"file"},null,34),a.errors.file?(s(),n("div",Z,i(a.errors.file),1)):e("",!0)])])):e("",!0),a.withdrawal.status=="pending"?(s(),n("tr",_,[...t[32]||(t[32]=[l("td",null,"\xA0",-1),l("td",null,"\xA0",-1),l("td",null,[l("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Submit")],-1)])])):e("",!0)])])])],32)])])])])],64)}const nt=M(K,[["render",c]]);export{nt as default};
