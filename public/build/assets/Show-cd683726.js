import{L as k}from"./Layout-80160f1d.js";import{L as h,H as w,l as x,a as b,o as n,c as e,b as m,w as d,d as t,e as T,h as o,q as S,k as r,F as y,i as P,j as C,t as f}from"./app-50a2f634.js";import{S as p}from"./sweetalert2.esm.all-61741a63.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const B={layout:k,components:{Link:h,Head:w},props:{errors:Object,transaction:Object,banks:Object},setup(l){const s=x({payment_method:""});return{form:s,submit:()=>{C.Inertia.post(`/user/vouchers/${l.voucher.id}/buy`,{payment_method:s.payment_method},{onSuccess:()=>{p.fire({title:"Success!",text:"Silakan Lakukan Pembayaran",icon:"success",showConfirmButton:!1,timer:1e3})}})},pay:()=>{typeof window.snap<"u"?window.snap.pay(l.transaction.snap_token,{onSuccess:()=>{this.$inertia.visit($page.props.setting.app_url+"/user/transactions/success")},onPending:()=>{this.$inertia.visit($page.props.setting.app_url)},onError:()=>{this.$inertia.visit($page.props.setting.app_url)}}):p.fire({title:"Error",text:"Midtrans Snap belum diinisialisasi.",icon:"error",showConfirmButton:!0})}}},methods:{formatPrice(l){return"Rp."+(l/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},copyText(l){const s=document.createElement("textarea");s.value=l,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}}},D={class:"page-wrapper"},H={class:"page-content"},M={class:"row"},N={class:"col-lg-12"},z={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},K=["innerHTML"],A={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},E=["innerHTML"],j={class:"col-lg-12"},V={class:"card border-top border-0 border-3 border-primary"},F={class:"card-header"},O={class:"d-lg-flex align-items-center"},U={class:"ms-auto"},R={class:"text-center"},q=["href"],G={class:"card-body p-4"},I={class:"row mb-3"},J={class:"col-sm-9"},W=["value"],Q={class:"row mb-3"},X={class:"col-sm-9"},Y=["value"],Z={class:"row mb-3"},$={class:"col-sm-9"},tt=["value"],st={class:"row mb-3"},at={class:"col-sm-9"},nt=["value"],et={class:"row mb-3"},ot={class:"col-sm-9"},lt=["value"],it={key:0,class:"row mb-3"},rt={class:"col-sm-9"},ct=["value"],dt={class:"row mb-3"},mt={class:"col-sm-9"},ut=["value"],_t={class:"row mb-3"},bt={class:"col-sm-9"},ft={class:"form-select",disabled:"",style:{"background-color":"#fff"}},yt=["selected"],pt=["selected"],vt=["selected"],gt=["selected"],kt={class:"row mb-3"},ht={class:"col-sm-9"},wt=["value"],xt={class:"row mb-3"},Tt={class:"col-sm-9"},St={key:0,style:{"font-size":"12px"},class:"badge bg-warning text-dark"},Pt={key:1,style:{"font-size":"12px"},class:"badge bg-primary"},Ct={key:2,style:{"font-size":"12px"},class:"badge bg-danger"},Lt={key:3,style:{"font-size":"12px"},class:"badge bg-success"},Bt={key:4,style:{"font-size":"12px"},class:"badge bg-danger"},Dt={key:1,class:"row mb-3"},Ht={class:"col-sm-9"},Mt={key:2},Nt={class:"row mb-3"},zt={class:"col-sm-9"},Kt=["value"],At={class:"row mb-3"},Et={class:"col-sm-9"},jt=["value"],Vt={class:"row mb-3"},Ft={class:"col-sm-9"},Ot=["value"],Ut={class:"row mb-3"},Rt={class:"col-sm-9"},qt=["value"],Gt={class:"row mb-3"},It={class:"col-sm-9"},Jt=["src"],Wt={key:3,class:"row"},Qt={class:"col-lg-12"},Xt={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-3"},Yt={class:"col"},Zt={class:"card"},$t={style:{height:"75px"}},ts=["src"],ss={class:"card-body text-center"},as={class:"card-title"},ns={class:"input-group mb-3"},es=["value"],os=["onClick"],ls={class:"card-text mt-3 fw-bold"},is={key:0,class:"text-center"},rs=["href"];function cs(l,s,a,c,ds,u){const v=b("Head"),_=b("Link"),g=b("center");return n(),e(y,null,[m(v,null,{default:d(()=>[t("title",null,f(l.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Transaksi",1)]),_:1}),t("div",D,[t("div",H,[s[31]||(s[31]=T('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Detail Transaksi</li></ol></nav></div></div>',1)),t("div",M,[t("div",N,[l.$page.props.session.error?(n(),e("div",z,[t("div",{innerHTML:l.$page.props.session.error},null,8,K)])):o("",!0),l.$page.props.session.success?(n(),e("div",A,[t("div",{innerHTML:l.$page.props.session.success},null,8,E)])):o("",!0)]),t("div",j,[t("div",V,[t("div",F,[t("div",O,[s[5]||(s[5]=t("h6",null,"Detail Transaksi",-1)),t("div",U,[t("div",R,[a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(n(),S(_,{key:0,href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:d(()=>[...s[2]||(s[2]=[r("Upload Bukti Pembayaran",-1)])]),_:1},8,["href"])):o("",!0),a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(n(),e("a",{key:1,target:"_blank",href:`https://wa.me/${l.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},[...s[3]||(s[3]=[t("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),r("Hubungi Admin",-1)])],8,q)):o("",!0),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(n(),e("button",{key:2,onClick:s[0]||(s[0]=(...i)=>c.pay&&c.pay(...i)),class:"btn btn-success btn-sm m-1"},"Bayar Transaksi")):o("",!0),m(_,{href:"/user/transactions",class:"btn btn-primary btn-sm m-1"},{default:d(()=>[...s[4]||(s[4]=[r("Riwayat Transaksi",-1)])]),_:1})])])])]),t("div",G,[s[29]||(s[29]=t("h5",{class:"mb-3"},"Data Pembeli",-1)),t("div",I,[s[6]||(s[6]=t("label",{class:"col-sm-3 col-form-label"},"Nama Lengkap",-1)),t("div",J,[t("input",{type:"text",class:"form-control",value:a.transaction.user.name,disabled:"",style:{"background-color":"#fff"}},null,8,W)])]),t("div",Q,[s[7]||(s[7]=t("label",{class:"col-sm-3 col-form-label"},"Email",-1)),t("div",X,[t("input",{type:"text",class:"form-control",value:a.transaction.user.email,disabled:"",style:{"background-color":"#fff"}},null,8,Y)])]),t("div",Z,[s[8]||(s[8]=t("label",{class:"col-sm-3 col-form-label"},"Nomor Telepon (Whatsapp)",-1)),t("div",$,[t("input",{type:"text",class:"form-control",value:a.transaction.user.student&&a.transaction.user.student.phone_number?a.transaction.user.student.phone_number:"-",disabled:"",style:{"background-color":"#fff"}},null,8,tt)])]),s[30]||(s[30]=t("h5",{class:"mb-3"},"Detail Transaksi",-1)),t("div",st,[s[9]||(s[9]=t("label",{class:"col-sm-3 col-form-label"},"Kode Transaksi",-1)),t("div",at,[t("input",{type:"text",class:"form-control",value:a.transaction.code,disabled:"",style:{"background-color":"#fff"}},null,8,nt)])]),t("div",et,[s[10]||(s[10]=t("label",{class:"col-sm-3 col-form-label"},"Tanggal Transaksi",-1)),t("div",ot,[t("input",{type:"text",class:"form-control",value:a.transaction.created_at,disabled:"",style:{"background-color":"#fff"}},null,8,lt)])]),a.transaction.category?(n(),e("div",it,[s[11]||(s[11]=t("label",{class:"col-sm-3 col-form-label"},"Kategori Peminatan",-1)),t("div",rt,[t("input",{type:"text",class:"form-control",value:a.transaction.category.name,disabled:"",style:{"background-color":"#fff"}},null,8,ct)])])):o("",!0),t("div",dt,[s[12]||(s[12]=t("label",{class:"col-sm-3 col-form-label"},"Deskripsi Transaksi",-1)),t("div",mt,[t("input",{type:"text",class:"form-control",value:a.transaction.description,disabled:"",style:{"background-color":"#fff"}},null,8,ut)])]),t("div",_t,[s[14]||(s[14]=t("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1)),t("div",bt,[t("select",ft,[t("option",{value:"account_balance",selected:a.transaction.payment_method=="account_balance"},"Saldo Akun",8,yt),t("option",{value:"manual_transfer",selected:a.transaction.payment_method=="manual_transfer"},"Transfer Manual (Konfirmasi Pembayaran)",8,pt),t("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="automatic_transfer_midtrans"},"Transfer Otomatis",8,vt),t("option",{value:"automatic_transfer_midtrans",selected:a.transaction.payment_method=="not_payment_method"},"Tanpa Metode Pembayaran",8,gt),s[13]||(s[13]=r(" not_payment_method ",-1))])])]),t("div",kt,[s[15]||(s[15]=t("label",{class:"col-sm-3 col-form-label"},"Total Transaksi",-1)),t("div",ht,[t("input",{type:"text",class:"form-control",value:u.formatPrice(a.transaction.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,wt)])]),t("div",xt,[s[16]||(s[16]=t("label",{class:"col-sm-3 col-form-label"},"Status Transaksi",-1)),t("div",Tt,[a.transaction.transaction_status=="pending"?(n(),e("span",St,"Pending - belum melakukan pembayaran")):o("",!0),a.transaction.transaction_status=="paid"?(n(),e("span",Pt,"Paid - sudah melakukan pembayaran")):o("",!0),a.transaction.transaction_status=="failed"?(n(),e("span",Ct,"Failed - transaksi Gagal")):o("",!0),a.transaction.transaction_status=="done"?(n(),e("span",Lt,"Done - transaksi Selesai")):o("",!0),a.transaction.transaction_status=="expired"?(n(),e("span",Bt,"Expired - Transaksi Kadaluarsa")):o("",!0)])]),a.transaction.payment_method=="automatic_transfer_midtrans"&&a.transaction.transaction_status=="pending"?(n(),e("div",Dt,[s[17]||(s[17]=t("label",{class:"col-sm-3 col-form-label"},"Action",-1)),t("div",Ht,[t("button",{onClick:s[1]||(s[1]=(...i)=>c.pay&&c.pay(...i)),class:"btn btn-success btn-sm"},"Bayar Transaksi Sekarang")])])):o("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.payment_confirmation?(n(),e("div",Mt,[s[23]||(s[23]=t("hr",null,null,-1)),s[24]||(s[24]=t("h5",{class:"mb-3"},"Data Konfirmasi Pembayaran",-1)),t("div",Nt,[s[18]||(s[18]=t("label",{class:"col-sm-3 col-form-label"},"Nama Pengirim Transfer",-1)),t("div",zt,[t("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,Kt)])]),t("div",At,[s[19]||(s[19]=t("label",{class:"col-sm-3 col-form-label"},"Di Transfer Ke",-1)),t("div",Et,[t("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.bank.bank_name+" - "+a.transaction.payment_confirmation.bank.rekening_number+" - "+a.transaction.payment_confirmation.bank.rekening_name,disabled:"",style:{"background-color":"#fff"}},null,8,jt)])]),t("div",Vt,[s[20]||(s[20]=t("label",{class:"col-sm-3 col-form-label"},"Tanggal Transfer",-1)),t("div",Ft,[t("input",{type:"text",class:"form-control",value:a.transaction.payment_confirmation.transfer_date,disabled:"",style:{"background-color":"#fff"}},null,8,Ot)])]),t("div",Ut,[s[21]||(s[21]=t("label",{class:"col-sm-3 col-form-label"},"Jumlah Transfer",-1)),t("div",Rt,[t("input",{type:"text",class:"form-control",value:u.formatPrice(a.transaction.payment_confirmation.total_payment),disabled:"",style:{"background-color":"#fff"}},null,8,qt)])]),t("div",Gt,[s[22]||(s[22]=t("label",{class:"col-sm-3 col-form-label"},"Bukti Transfer",-1)),t("div",It,[t("img",{src:"/storage/upload_files/payment_confirmation/"+a.transaction.payment_confirmation.file,style:{width:"300px"}},null,8,Jt)])])])):o("",!0),a.transaction.payment_method=="manual_transfer"&&a.transaction.transaction_status=="pending"?(n(),e("div",Wt,[t("div",Qt,[s[27]||(s[27]=t("h6",{class:"text-center"},"Silakan lakukan pembayaran melalui rekening bank/e-wallet berikut ini dan lakukan konfirmasi",-1)),s[28]||(s[28]=t("br",null,null,-1)),t("div",Xt,[(n(!0),e(y,null,P(a.banks,i=>(n(),e("div",Yt,[t("div",Zt,[t("div",$t,[m(g,null,{default:d(()=>[t("img",{src:"/storage/upload_files/banks/"+i.image,style:{width:"125px","margin-top":"20px"}},null,8,ts)]),_:2},1024)]),t("div",ss,[t("h5",as,f(i.bank_name),1),t("div",ns,[t("input",{type:"text",class:"form-control form-control-sm text-center",value:i.rekening_number,disabled:"",style:{"background-color":"#fff"}},null,8,es),t("button",{class:"btn btn-primary btn-sm",type:"button",onClick:ms=>u.copyText(i.rekening_number)},"Copy",8,os)]),t("p",ls,f(i.rekening_name),1)])])]))),256))]),a.transaction.transaction_status=="pending"&&a.transaction.payment_method=="manual_transfer"?(n(),e("div",is,[m(_,{href:`/user/transactions/${a.transaction.id}/payment-confirmations`,class:"btn btn-danger m-1 btn-sm"},{default:d(()=>[...s[25]||(s[25]=[r("Upload Bukti Pembayaran",-1)])]),_:1},8,["href"]),t("a",{target:"_blank",href:`https://wa.me/${l.$page.props.setting.whatsapp_number}`,class:"btn btn-success btn-sm m-1"},[...s[26]||(s[26]=[t("i",{class:"lni lni-whatsapp",style:{"font-size":"17px","margin-top":"-20px"}},null,-1),r("Klik Untuk Menghubungi Admin",-1)])],8,rs)])):o("",!0)])])):o("",!0)])])])])])])],64)}const ys=L(B,[["render",cs]]);export{ys as default};
