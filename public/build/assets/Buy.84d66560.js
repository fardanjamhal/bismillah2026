import{L as v}from"./Layout.dad8fa9c.js";import{L as g,H as k,p as w,c as a,a as u,w as h,b as e,t as n,f as r,F as d,g as m,d as B,e as x,q as T,n as M,h as L,j as b,o,k as P}from"./app.ce8f6c38.js";import{S as j}from"./sweetalert2.all.59f1eca5.js";import{_ as H}from"./_plugin-vue_export-helper.cdc0426e.js";const S={layout:v,components:{Link:g,Head:k},props:{errors:Object,purchase:Object,type:Object,typeTranslation:Object,urlBack:Object,paymentMethods:Object},setup(l){const c=w({payment_method:"",price:""});return{form:c,submit:()=>{j.fire({title:"Selamat",text:"Selangkah lagi pembelianmu berhasil",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Lanjutkan",cancelButtonText:"Batalkan"}).then(i=>{i.isConfirmed&&L.Inertia.post(`/user/transactions/${l.type}/${l.purchase.id}/buy`,{payment_method:c.payment_method,price:l.purchase.price_after_discount})})}}},methods:{formatPrice(l){return"Rp."+(l/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(l=>!(this.type==="topupBalance"&&l.code==="account_balance"))}}},C={class:"page-wrapper"},O={class:"page-content"},D={class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},N={class:"breadcrumb-title pe-3"},V={class:"ps-3"},A={"aria-label":"breadcrumb"},F={class:"breadcrumb mb-0 p-0"},K=e("li",{class:"breadcrumb-item"},[e("a",{href:"javascript:;"},[e("i",{class:"bx bx-home-alt"})])],-1),U={class:"breadcrumb-item active","aria-current":"page"},q={class:"row"},z={class:"col-lg-12"},E={key:0,class:"alert alert-danger border-0 alert-dismissible fade show"},I=["innerHTML"],R={key:1,class:"alert alert-success border-0 alert-dismissible fade show"},G=["innerHTML"],J={key:2,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},Q=e("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1),W={class:"mt-3"},X={class:"col-lg-12"},Y={class:"card border-top border-0 border-3 border-primary"},Z={class:"card-header"},$={class:"d-lg-flex align-items-center"},ee={class:"ms-auto"},se=P("Kembali"),te={class:"card-body p-4"},ae={key:0,class:"row mb-3"},oe=e("label",{class:"col-sm-3 col-form-label"},"Kategori",-1),le={class:"col-sm-9"},ne=["value"],ie={class:"row mb-3"},ce={class:"col-sm-3 col-form-label"},re={class:"col-sm-9"},de=["value"],me={key:1,class:"row mb-3"},_e=e("label",{class:"col-sm-3 col-form-label"},"Masa Aktif",-1),ue={class:"col-sm-9"},he=["value"],be={class:"row mb-3"},pe={class:"col-sm-3 col-form-label"},fe={class:"col-sm-9"},ye=["value"],ve={key:2,class:"row mb-3"},ge=e("label",{class:"col-sm-3 col-form-label"},"Kategori Member",-1),ke={class:"col-sm-9"},we={key:0},Be={class:"badge bg-success ms-1"},xe={key:1},Te=e("span",{class:"badge bg-success ms-1"},"Akses Untuk Seluruh Tipe Member",-1),Me=[Te],Le={class:"row mb-3"},Pe=e("label",{class:"col-sm-3 col-form-label"},"Metode Pembayaran",-1),je={class:"col-sm-9"},He=e("option",{value:""},"[ Pilih Metode Pembayaran ]",-1),Se=["value"],Ce={key:0,class:"invalid-feedback"},Oe={key:3,class:"row mb-3"},De=e("label",{class:"col-sm-3 col-form-label"},null,-1),Ne={class:"col-sm-9"},Ve={class:"alert border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2 alert-success"},Ae=e("div",{class:"row"},[e("label",{class:"col-sm-3 col-form-label"}),e("div",{class:"col-sm-9"},[e("div",{class:"d-md-flex d-grid align-items-center gap-3"},[e("button",{class:"btn btn-primary btn-sm px-4",onclick:"buy()"},"Lanjutkan ke pembayaran")])])],-1);function Fe(l,c,s,i,Ke,_){const p=b("Head"),f=b("Link");return o(),a(d,null,[u(p,null,{default:h(()=>{var t;return[e("title",null,n((t=l.$page.props.setting.app_name)!=null?t:"Atur Setting Terlebih Dahulu")+" - Pembelian "+n(s.typeTranslation),1)]}),_:1}),e("div",C,[e("div",O,[e("div",D,[e("div",N,n(s.typeTranslation),1),e("div",V,[e("nav",A,[e("ol",F,[K,e("li",U,"Pembelian "+n(s.typeTranslation),1)])])])]),e("div",q,[e("div",z,[l.$page.props.session.error?(o(),a("div",E,[e("div",{innerHTML:l.$page.props.session.error},null,8,I)])):r("",!0),l.$page.props.session.success?(o(),a("div",R,[e("div",{innerHTML:l.$page.props.session.success},null,8,G)])):r("",!0),Object.keys(s.errors).length>0?(o(),a("div",J,[Q,e("ul",W,[(o(!0),a(d,null,m(s.errors,t=>(o(),a("li",null,n(t),1))),256))])])):r("",!0)]),e("div",X,[e("form",{onSubmit:c[1]||(c[1]=B((...t)=>i.submit&&i.submit(...t),["prevent"]))},[e("div",Y,[e("div",Z,[e("div",$,[e("h6",null,"Detail Pembelian "+n(s.typeTranslation),1),e("div",ee,[u(f,{href:s.urlBack,class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:h(()=>[se]),_:1},8,["href"])])])]),e("div",te,[s.type!="topupBalance"?(o(),a("div",ae,[oe,e("div",le,[e("input",{type:"text",class:"form-control",value:s.purchase.category.name,disabled:""},null,8,ne)])])):r("",!0),e("div",ie,[e("label",ce,n(s.type=="topupBalance"?"Deskripsi Pembelian":"Pembelian "+s.typeTranslation),1),e("div",re,[e("input",{type:"text",class:"form-control",value:s.purchase.title,disabled:"",style:{"background-color":"#fff"}},null,8,de)])]),s.type=="voucher"?(o(),a("div",me,[_e,e("div",ue,[e("input",{type:"text",class:"form-control",value:s.purchase.active_period+(s.purchase.period_type=="day"?" Hari":" Bulan"),disabled:"",style:{"background-color":"#fff"}},null,8,he)])])):r("",!0),e("div",be,[e("label",pe,n(s.type=="topupBalance"?"Nominal":"Harga")+" "+n(s.typeTranslation),1),e("div",fe,[e("input",{type:"text",class:"form-control",value:_.formatPrice(s.purchase.price_after_discount),disabled:"",style:{"background-color":"#fff"}},null,8,ye)])]),s.type!="topupBalance"?(o(),a("div",ve,[ge,e("div",ke,[s.purchase.member_categories.length?(o(),a("div",we,[(o(!0),a(d,null,m(s.purchase.member_categories,(t,y)=>(o(),a("div",{key:y,style:{display:"inline"}},[e("span",Be,n(t.name),1)]))),128))])):(o(),a("div",xe,Me))])])):r("",!0),e("div",Le,[Pe,e("div",je,[x(e("select",{"onUpdate:modelValue":c[0]||(c[0]=t=>i.form.payment_method=t),class:M([{"is-invalid":s.errors.payment_method},"form-select"])},[He,(o(!0),a(d,null,m(_.filteredPaymentMethods,t=>(o(),a("option",{key:t.code,value:t.code},n(t.name),9,Se))),128))],2),[[T,i.form.payment_method]]),s.errors.payment_method?(o(),a("div",Ce,n(s.errors.payment_method),1)):r("",!0)])]),s.paymentMethods.find(t=>t.code===i.form.payment_method)&&s.paymentMethods.find(t=>t.code===i.form.payment_method).show_description==1?(o(),a("div",Oe,[De,e("div",Ne,[e("div",Ve,n(s.paymentMethods.find(t=>t.code===i.form.payment_method).description),1)])])):r("",!0),Ae])])],32)])])])])],64)}const Ie=H(S,[["render",Fe]]);export{Ie as default};
