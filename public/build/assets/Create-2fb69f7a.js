import{L as g}from"./Layout-39f88415.js";import{c as d,L as b,H as f,v as e,d as p}from"./app-548cbf60.js";import{M as V}from"./vue3-multiselect.umd.min-7f7c3295.js";import{a as s}from"./index-91056434.js";/* empty css                                                                  */import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-2725ad78.js";var N=typeof d=="object"&&d&&d.Object===Object&&d,B=N,x=B,C=typeof self=="object"&&self&&self.Object===Object&&self,S=x||C||Function("return this")(),h=S,D=h,T=D.Symbol,_=T,m=_;m&&m.toStringTag;var c=_;c&&c.toStringTag;const P={layout:g,components:{Link:b,Head:f,Multiselect:V},props:{errors:Object,categories:Object,memberCategories:Object,users:Object},methods:{formatPrice(l){return"Rp."+(l/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},computed:{filteredPaymentMethods(){return this.$page.props.setting.payment_methods.filter(l=>!(this.form.item_type==3&&l.code==="account_balance"))}},setup(){const l=e.reactive({item_type:"",category_id:"",voucher_id:"",lesson_category_id:"",lesson_id:"",exam_id:"",exam_group_id:"",user_id:"",expired_date:"",total_payment:"",payment_method:"",reduce_account_balance:"",transaction_status:"",created_at:"",lessonCategories:[],lessons:[],exams:[],examGroups:[],users:[],vouchers:[]});return{form:l,submit:()=>{p.Inertia.post("/admin/transactions",{item_type:l.item_type,category_id:l.category_id,voucher_id:l.voucher_id,lesson_category_id:l.lesson_category_id,lesson_id:l.lesson_id,exam_id:l.exam_id,exam_group_id:l.exam_group_id,user_id:l.user_id,expired_date:l.expired_date,total_payment:l.total_payment,created_at:l.created_at,payment_method:l.payment_method,reduce_account_balance:l.reduce_account_balance,transaction_status:l.transaction_status})},lessonCategoryData:()=>{l.lesson_category_id="",l.lesson_id="",l.exam_id="",l.exam_group_id="",s.get(`/admin/categories/${l.category_id}/vouchers`).then(n=>{l.vouchers=n.data}).catch(n=>console.error(n)),s.get(`/admin/categories/${l.category_id}/lesson-categories`).then(n=>{l.lessonCategories=n.data}).catch(n=>console.error(n))},lessonData:()=>{l.lesson_id="",l.exam_id="",s.get(`/admin/lesson-categories/${l.lesson_category_id}/exam-groups`).then(n=>{l.examGroups=n.data}).catch(n=>console.error(n)),s.get(`/admin/lesson-categories/${l.lesson_category_id}/lessons`).then(n=>{l.lessons=n.data}).catch(n=>console.error(n))},examData:()=>{l.exam_id="",s.get(`/admin/lessons/${l.lesson_id}/exams`).then(n=>{l.exams=n.data}).catch(n=>console.error(n))},changeTransactionType:()=>{l.category_id="",l.voucher_id="",l.lesson_category_id="",l.lesson_id="",l.exam_id="",l.exam_group_id="",l.user_id="",l.expired_date="",l.total_payment="",l.payment_method="",l.created_at="",l.reduce_account_balance="",l.transaction_status=""}}}},w={class:"page-wrapper"},M={class:"page-content"},L={key:0,class:"alert alert-danger border-0 bg-danger alert-dismissible fade show py-2"},j={class:"d-flex align-items-center"},U={class:"ms-3"},z={class:"text-white"},F={class:"row"},O={class:"col-lg-12 col-md-12"},K={class:"card border-top border-0 border-3 border-primary"},G={class:"card-body"},A={key:0,class:"alert alert-danger border-0 alert-dismissible fade show mb-3 p-0 px-3 py-2"},H={class:"mt-3"},q={class:"d-lg-flex align-items-center"},I={class:"ms-auto"},J={class:"col-12"},R={key:0,class:"invalid-feedback"},Y={key:0,class:"col-12"},Q=["value"],W={key:0,class:"invalid-feedback"},X={key:1,class:"col-12"},Z=["value"],$={key:0,class:"invalid-feedback"},ee={key:2,class:"col-12"},te=["value"],oe={key:0,class:"invalid-feedback"},ae={key:3,class:"col-12"},le=["value"],re={key:0,class:"invalid-feedback"},ne={key:4,class:"col-12"},ie=["value"],se={key:0,class:"invalid-feedback"},de={key:5,class:"col-12"},me=["value"],ce={key:0,class:"invalid-feedback"},_e={key:6,class:"col-12"},ue={key:0,class:"invalid-feedback"},ve={class:"col-12"},ke={key:0,class:"invalid-feedback"},ye={class:"col-12"},ge=["value"],be={key:0,class:"invalid-feedback"},fe={key:7,class:"col-12"},pe={key:0,class:"invalid-feedback"},Ve={key:8,class:"col-12"},Ee={key:0,class:"invalid-feedback"},Ne={class:"col-12"},Be={key:0,class:"invalid-feedback"},xe={class:"col-12"},Ce={key:0,value:"pending"},Se={key:1,value:"paid"},he={key:2,value:"failed"},De={key:3,value:"expired"},Te={key:0,class:"invalid-feedback"};function Pe(l,t,r,a,u,i){const n=e.resolveComponent("Head"),v=e.resolveComponent("Link"),k=e.resolveComponent("multiselect");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(n,null,{default:e.withCtx(()=>[e.createElementVNode("title",null,e.toDisplayString(l.$page.props.setting.app_name??"Atur Setting Terlebih Dahulu")+" - Tambah Transaksi",1)]),_:1}),e.createElementVNode("div",w,[e.createElementVNode("div",M,[t[49]||(t[49]=e.createStaticVNode('<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3"><div class="breadcrumb-title pe-3">Transaksi</div><div class="ps-3"><nav aria-label="breadcrumb"><ol class="breadcrumb mb-0 p-0"><li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a></li><li class="breadcrumb-item active" aria-current="page">Tambah Transaksi</li></ol></nav></div></div>',1)),l.$page.props.session.error?(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",j,[t[20]||(t[20]=e.createElementVNode("div",{class:"font-35 text-white"},[e.createElementVNode("i",{class:"bx bxs-message-square-x"})],-1)),e.createElementVNode("div",U,[t[19]||(t[19]=e.createElementVNode("h6",{class:"mb-0 text-white"},"Gagal",-1)),e.createElementVNode("div",z,e.toDisplayString(l.$page.props.session.error),1)])])])):e.createCommentVNode("",!0),e.createElementVNode("div",F,[e.createElementVNode("div",O,[e.createElementVNode("div",K,[e.createElementVNode("div",G,[Object.keys(r.errors).length>0?(e.openBlock(),e.createElementBlock("div",A,[t[21]||(t[21]=e.createElementVNode("strong",null,"Perhatian, pastikan inputan diisi dengan benar.",-1)),e.createElementVNode("ul",H,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.errors,o=>(e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(o),1))),256))])])):e.createCommentVNode("",!0),e.createElementVNode("div",q,[e.createElementVNode("div",I,[e.createVNode(v,{href:"/admin/exams",class:"btn btn-primary btn-sm mt-2 mt-lg-0"},{default:e.withCtx(()=>[...t[22]||(t[22]=[e.createTextVNode("Kembali",-1)])]),_:1})])]),e.createElementVNode("form",{onSubmit:t[18]||(t[18]=e.withModifiers((...o)=>a.submit&&a.submit(...o),["prevent"])),class:"row g-3"},[e.createElementVNode("div",J,[t[24]||(t[24]=e.createElementVNode("label",{class:"form-label"},"Jenis Transaksi",-1)),e.withDirectives(e.createElementVNode("select",{onChange:t[0]||(t[0]=(...o)=>a.changeTransactionType&&a.changeTransactionType(...o)),"onUpdate:modelValue":t[1]||(t[1]=o=>a.form.item_type=o),class:e.normalizeClass([{"is-invalid":r.errors.item_type},"form-select"])},[...t[23]||(t[23]=[e.createStaticVNode('<option value="">[ Pilih ]</option><option value="0">Pembelian Latihan Soal</option><option value="1">Pembelian Tryout</option><option value="2">Pembelian Membership</option><option value="3">Top Up Saldo</option>',5)])],34),[[e.vModelSelect,a.form.item_type]]),r.errors.item_type?(e.openBlock(),e.createElementBlock("div",R,e.toDisplayString(r.errors.item_type),1)):e.createCommentVNode("",!0)]),a.form.item_type&&a.form.item_type!="3"?(e.openBlock(),e.createElementBlock("div",Y,[t[26]||(t[26]=e.createElementVNode("label",{class:"form-label"},"Kategori Peminatan",-1)),e.withDirectives(e.createElementVNode("select",{onChange:t[2]||(t[2]=(...o)=>a.lessonCategoryData&&a.lessonCategoryData(...o)),"onUpdate:modelValue":t[3]||(t[3]=o=>a.form.category_id=o),class:e.normalizeClass([{"is-invalid":r.errors.category_id},"form-select"])},[t[25]||(t[25]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.categories,(o,y)=>(e.openBlock(),e.createElementBlock("option",{key:y,value:o.id},e.toDisplayString(o.name),9,Q))),128))],34),[[e.vModelSelect,a.form.category_id]]),r.errors.category_id?(e.openBlock(),e.createElementBlock("div",W,e.toDisplayString(r.errors.category_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="2"?(e.openBlock(),e.createElementBlock("div",X,[t[28]||(t[28]=e.createElementVNode("label",{class:"form-label"},"Voucher Membership",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>a.form.voucher_id=o),class:e.normalizeClass([{"is-invalid":r.errors.voucher_id},"form-select"])},[t[27]||(t[27]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.form.vouchers,o=>(e.openBlock(),e.createElementBlock("option",{value:o.id},e.toDisplayString(o.title)+" [ "+e.toDisplayString(i.formatPrice(o.price_after_discount))+" ]",9,Z))),256))],2),[[e.vModelSelect,a.form.voucher_id]]),r.errors.voucher_id?(e.openBlock(),e.createElementBlock("div",$,e.toDisplayString(r.errors.voucher_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="0"||a.form.item_type=="1"?(e.openBlock(),e.createElementBlock("div",ee,[t[30]||(t[30]=e.createElementVNode("label",{class:"form-label"},"Kategori Mata Pelajaran",-1)),e.withDirectives(e.createElementVNode("select",{onChange:t[5]||(t[5]=(...o)=>a.lessonData&&a.lessonData(...o)),"onUpdate:modelValue":t[6]||(t[6]=o=>a.form.lesson_category_id=o),class:e.normalizeClass([{"is-invalid":r.errors.lesson_category_id},"form-select"])},[t[29]||(t[29]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.form.lessonCategories,o=>(e.openBlock(),e.createElementBlock("option",{value:o.id},e.toDisplayString(o.name),9,te))),256))],34),[[e.vModelSelect,a.form.lesson_category_id]]),r.errors.lesson_category_id?(e.openBlock(),e.createElementBlock("div",oe,e.toDisplayString(r.errors.lesson_category_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="0"?(e.openBlock(),e.createElementBlock("div",ae,[t[32]||(t[32]=e.createElementVNode("label",{class:"form-label"},"Mata Pelajaran",-1)),e.withDirectives(e.createElementVNode("select",{onChange:t[7]||(t[7]=(...o)=>a.examData&&a.examData(...o)),"onUpdate:modelValue":t[8]||(t[8]=o=>a.form.lesson_id=o),class:e.normalizeClass([{"is-invalid":r.errors.lesson_id},"form-select"])},[t[31]||(t[31]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.form.lessons,o=>(e.openBlock(),e.createElementBlock("option",{value:o.id},e.toDisplayString(o.name),9,le))),256))],34),[[e.vModelSelect,a.form.lesson_id]]),r.errors.lesson_id?(e.openBlock(),e.createElementBlock("div",re,e.toDisplayString(r.errors.lesson_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="0"?(e.openBlock(),e.createElementBlock("div",ne,[t[34]||(t[34]=e.createElementVNode("label",{class:"form-label"},"Latihan Soal",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>a.form.exam_id=o),class:e.normalizeClass([{"is-invalid":r.errors.exam_id},"form-select"])},[t[33]||(t[33]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.form.exams,o=>(e.openBlock(),e.createElementBlock("option",{value:o.id},e.toDisplayString(o.title)+" [ "+e.toDisplayString(i.formatPrice(o.price_after_discount))+" ]",9,ie))),256))],2),[[e.vModelSelect,a.form.exam_id]]),r.errors.exam_id?(e.openBlock(),e.createElementBlock("div",se,e.toDisplayString(r.errors.exam_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="1"?(e.openBlock(),e.createElementBlock("div",de,[t[36]||(t[36]=e.createElementVNode("label",{class:"form-label"},"Tryout",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>a.form.exam_group_id=o),class:e.normalizeClass([{"is-invalid":r.errors.exam_group_id},"form-select"])},[t[35]||(t[35]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.form.examGroups,o=>(e.openBlock(),e.createElementBlock("option",{value:o.id},e.toDisplayString(o.title)+" [ "+e.toDisplayString(i.formatPrice(o.price_after_discount))+" ]",9,me))),256))],2),[[e.vModelSelect,a.form.exam_group_id]]),r.errors.exam_group_id?(e.openBlock(),e.createElementBlock("div",ce,e.toDisplayString(r.errors.exam_group_id),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="3"?(e.openBlock(),e.createElementBlock("div",_e,[t[37]||(t[37]=e.createElementVNode("label",{class:"form-label"},"Nominal Saldo",-1)),e.withDirectives(e.createElementVNode("input",{type:"number",min:"1",class:e.normalizeClass(["form-control",{"is-invalid":r.errors.total_payment}]),"onUpdate:modelValue":t[11]||(t[11]=o=>a.form.total_payment=o),placeholder:"Nominal Saldo"},null,2),[[e.vModelText,a.form.total_payment]]),r.errors.total_payment?(e.openBlock(),e.createElementBlock("div",ue,e.toDisplayString(r.errors.total_payment),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",ve,[t[38]||(t[38]=e.createElementVNode("label",{class:"form-label"},"Peserta",-1)),e.createVNode(k,{class:e.normalizeClass({"is-invalid":r.errors.user_id}),modelValue:a.form.user_id,"onUpdate:modelValue":t[12]||(t[12]=o=>a.form.user_id=o),options:r.users,multiple:!1,label:"name","close-on-select":!0,"allow-empty":!1,"track-by":"id",placeholder:"[ Pilih ]"},null,8,["class","modelValue","options"]),r.errors.user_id?(e.openBlock(),e.createElementBlock("div",ke,e.toDisplayString(r.errors.user_id),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",ye,[t[40]||(t[40]=e.createElementVNode("label",{class:"form-label"},"Metode Pembayaran",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>a.form.payment_method=o),class:e.normalizeClass([{"is-invalid":r.errors.payment_method},"form-select"])},[t[39]||(t[39]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.filteredPaymentMethods,o=>(e.openBlock(),e.createElementBlock("option",{key:o.code,value:o.code},e.toDisplayString(o.name),9,ge))),128))],2),[[e.vModelSelect,a.form.payment_method]]),r.errors.payment_method?(e.openBlock(),e.createElementBlock("div",be,e.toDisplayString(r.errors.payment_method),1)):e.createCommentVNode("",!0)]),a.form.payment_method=="account_balance"?(e.openBlock(),e.createElementBlock("div",fe,[t[42]||(t[42]=e.createElementVNode("label",{class:"form-label"},"Potong Saldo Akun",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>a.form.reduce_account_balance=o),class:e.normalizeClass([{"is-invalid":r.errors.reduce_account_balance},"form-select"])},[...t[41]||(t[41]=[e.createElementVNode("option",{value:""},"[ Pilih ]",-1),e.createElementVNode("option",{value:"1"},"Ya",-1),e.createElementVNode("option",{value:"0"},"Tidak",-1)])],2),[[e.vModelSelect,a.form.reduce_account_balance]]),r.errors.reduce_account_balance?(e.openBlock(),e.createElementBlock("div",pe,e.toDisplayString(r.errors.reduce_account_balance),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),a.form.item_type=="2"?(e.openBlock(),e.createElementBlock("div",Ve,[t[43]||(t[43]=e.createElementVNode("label",{class:"form-label"},"Tanggal Kedaluarsa Membership (Kosongkan untuk otomatis sesuai durasi voucher)",-1)),e.withDirectives(e.createElementVNode("input",{type:"date",class:e.normalizeClass(["form-control",{"is-invalid":r.errors.expired_date}]),"onUpdate:modelValue":t[15]||(t[15]=o=>a.form.expired_date=o),placeholder:"Tanggal Kedaluarsa Membership"},null,2),[[e.vModelText,a.form.expired_date]]),r.errors.expired_date?(e.openBlock(),e.createElementBlock("div",Ee,e.toDisplayString(r.errors.expired_date),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Ne,[t[44]||(t[44]=e.createElementVNode("label",{class:"form-label"},"Tanggal Transaksi (Kosongkan untuk otomatis sesuai tanggal dibuatnya transaksi)",-1)),e.withDirectives(e.createElementVNode("input",{type:"datetime-local",class:e.normalizeClass(["form-control",{"is-invalid":r.errors.created_at}]),"onUpdate:modelValue":t[16]||(t[16]=o=>a.form.created_at=o),placeholder:"Tanggal Transaksi"},null,2),[[e.vModelText,a.form.created_at]]),r.errors.created_at?(e.openBlock(),e.createElementBlock("div",Be,e.toDisplayString(r.errors.created_at),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",xe,[t[47]||(t[47]=e.createElementVNode("label",{class:"form-label"},"Status Transaksi",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[17]||(t[17]=o=>a.form.transaction_status=o),class:e.normalizeClass([{"is-invalid":r.errors.transaction_status},"form-select"])},[t[45]||(t[45]=e.createElementVNode("option",{value:""},"[ Pilih ]",-1)),a.form.payment_method!="account_balance"?(e.openBlock(),e.createElementBlock("option",Ce,"Pending - Belum Melakukan Pembayaran")):e.createCommentVNode("",!0),a.form.payment_method!="account_balance"?(e.openBlock(),e.createElementBlock("option",Se,"Paid - Sudah bayar dan Perlu Approval dari Admin")):e.createCommentVNode("",!0),a.form.payment_method!="account_balance"?(e.openBlock(),e.createElementBlock("option",he,"Failed - Transaksi Gagal")):e.createCommentVNode("",!0),t[46]||(t[46]=e.createElementVNode("option",{value:"done"},"Done - Transaksi Selesai",-1)),a.form.payment_method!="account_balance"?(e.openBlock(),e.createElementBlock("option",De,"Expired - Transaksi Kadaluarsa")):e.createCommentVNode("",!0)],2),[[e.vModelSelect,a.form.transaction_status]]),r.errors.transaction_status?(e.openBlock(),e.createElementBlock("div",Te,e.toDisplayString(r.errors.transaction_status),1)):e.createCommentVNode("",!0)]),t[48]||(t[48]=e.createElementVNode("div",{class:"col-12"},[e.createElementVNode("button",{type:"submit",class:"btn btn-primary btn-sm px-5"},"Buat Transaksi")],-1))],32)])])])])])])],64)}const Oe=E(P,[["render",Pe]]);export{Oe as default};
